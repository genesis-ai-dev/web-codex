/*! For license information please see main.cf747429.js.LICENSE.txt */
(()=>{var e={8:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var i=r(284);function s(e){var t=function(e,t){if("object"!=(0,i.A)(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=(0,i.A)(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,i.A)(t)?t:t+""}function n(e,t,r){return(t=s(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}},43:(e,t,r)=>{"use strict";e.exports=r(202)},45:(e,t,r)=>{var i=r(738).default;e.exports=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=i(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},69:(e,t,r)=>{var i,s=r(897).default;globalThis,i=()=>(()=>{"use strict";var e={4567:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.AccessibilityManager=void 0;const n=r(9042),o=r(9924),a=r(844),l=r(4725),c=r(2585),u=r(3656);let h=t.AccessibilityManager=class extends a.Disposable{constructor(e,t,r,i){super(),this._terminal=e,this._coreBrowserService=r,this._renderService=i,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let s=0;s<this._terminal.rows;s++)this._rowElements[s]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[s]);if(this._topBoundaryFocusListener=e=>this._handleBoundaryFocus(e,0),this._bottomBoundaryFocusListener=e=>this._handleBoundaryFocus(e,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new o.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(e=>this._handleResize(e.rows))),this.register(this._terminal.onRender(e=>this._refreshRows(e.start,e.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(e=>this._handleChar(e))),this.register(this._terminal.onLineFeed(()=>this._handleChar("\n"))),this.register(this._terminal.onA11yTab(e=>this._handleTab(e))),this.register(this._terminal.onKey(e=>this._handleKey(e.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,u.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,a.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(e){for(let t=0;t<e;t++)this._handleChar(" ")}_handleChar(e){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,"\n"===e&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=n.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(e){this._clearLiveRegion(),/[\0-\x1F\x7F-\x9F]/.test(e)||this._charsToConsume.push(e)}_refreshRows(e,t){this._liveRegionDebouncer.refresh(e,t,this._terminal.rows)}_renderRows(e,t){const r=this._terminal.buffer,i=r.lines.length.toString();for(let s=e;s<=t;s++){const e=r.lines.get(r.ydisp+s),t=[],n=(null===e||void 0===e?void 0:e.translateToString(!0,void 0,void 0,t))||"",o=(r.ydisp+s+1).toString(),a=this._rowElements[s];a&&(0===n.length?(a.innerText="\xa0",this._rowColumns.set(a,[0,1])):(a.textContent=n,this._rowColumns.set(a,t)),a.setAttribute("aria-posinset",o),a.setAttribute("aria-setsize",i))}this._announceCharacters()}_announceCharacters(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(e,t){const r=e.target,i=this._rowElements[0===t?1:this._rowElements.length-2];if(r.getAttribute("aria-posinset")===(0===t?"1":"".concat(this._terminal.buffer.lines.length)))return;if(e.relatedTarget!==i)return;let s,n;if(0===t?(s=r,n=this._rowElements.pop(),this._rowContainer.removeChild(n)):(s=this._rowElements.shift(),n=r,this._rowContainer.removeChild(s)),s.removeEventListener("focus",this._topBoundaryFocusListener),n.removeEventListener("focus",this._bottomBoundaryFocusListener),0===t){const e=this._createAccessibilityTreeNode();this._rowElements.unshift(e),this._rowContainer.insertAdjacentElement("afterbegin",e)}else{const e=this._createAccessibilityTreeNode();this._rowElements.push(e),this._rowContainer.appendChild(e)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===t?-1:1),this._rowElements[0===t?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}_handleSelectionChange(){var e,t;if(0===this._rowElements.length)return;const r=document.getSelection();if(!r)return;if(r.isCollapsed)return void(this._rowContainer.contains(r.anchorNode)&&this._terminal.clearSelection());if(!r.anchorNode||!r.focusNode)return void console.error("anchorNode and/or focusNode are null");let i={node:r.anchorNode,offset:r.anchorOffset},s={node:r.focusNode,offset:r.focusOffset};if((i.node.compareDocumentPosition(s.node)&Node.DOCUMENT_POSITION_PRECEDING||i.node===s.node&&i.offset>s.offset)&&([i,s]=[s,i]),i.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(i={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(i.node))return;const n=this._rowElements.slice(-1)[0];if(s.node.compareDocumentPosition(n)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(s={node:n,offset:null!==(e=null===(t=n.textContent)||void 0===t?void 0:t.length)&&void 0!==e?e:0}),!this._rowContainer.contains(s.node))return;const o=e=>{let{node:t,offset:r}=e;const i=t instanceof Text?t.parentNode:t;let s=parseInt(null===i||void 0===i?void 0:i.getAttribute("aria-posinset"),10)-1;if(isNaN(s))return console.warn("row is invalid. Race condition?"),null;const n=this._rowColumns.get(i);if(!n)return console.warn("columns is null. Race condition?"),null;let o=r<n.length?n[r]:n.slice(-1)[0]+1;return o>=this._terminal.cols&&(++s,o=0),{row:s,column:o}},a=o(i),l=o(s);if(a&&l){if(a.row>l.row||a.row===l.row&&a.column>=l.column)throw new Error("invalid range");this._terminal.select(a.column,a.row,(l.row-a.row)*this._terminal.cols-a.column+l.column)}}_handleResize(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let t=this._rowContainer.children.length;t<this._terminal.rows;t++)this._rowElements[t]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[t]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const e=this._coreBrowserService.mainDocument.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width="".concat(this._renderService.dimensions.css.canvas.width,"px"),this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e])}}_refreshRowDimensions(e){e.style.height="".concat(this._renderService.dimensions.css.cell.height,"px")}};t.AccessibilityManager=h=i([s(1,c.IInstantiationService),s(2,l.ICoreBrowserService),s(3,l.IRenderService)],h)},3614:(e,t)=>{function r(e){return e.replace(/\r?\n/g,"\r")}function i(e,t){return t?"\x1b[200~"+e+"\x1b[201~":e}function s(e,t,s,n){e=i(e=r(e),s.decPrivateModes.bracketedPasteMode&&!0!==n.rawOptions.ignoreBracketedPasteMode),s.triggerDataEvent(e,!0),t.value=""}function n(e,t,r){const i=r.getBoundingClientRect(),s=e.clientX-i.left-10,n=e.clientY-i.top-10;t.style.width="20px",t.style.height="20px",t.style.left="".concat(s,"px"),t.style.top="".concat(n,"px"),t.style.zIndex="1000",t.focus()}Object.defineProperty(t,"__esModule",{value:!0}),t.rightClickHandler=t.moveTextAreaUnderMouseCursor=t.paste=t.handlePasteEvent=t.copyHandler=t.bracketTextForPaste=t.prepareTextForTerminal=void 0,t.prepareTextForTerminal=r,t.bracketTextForPaste=i,t.copyHandler=function(e,t){e.clipboardData&&e.clipboardData.setData("text/plain",t.selectionText),e.preventDefault()},t.handlePasteEvent=function(e,t,r,i){e.stopPropagation(),e.clipboardData&&s(e.clipboardData.getData("text/plain"),t,r,i)},t.paste=s,t.moveTextAreaUnderMouseCursor=n,t.rightClickHandler=function(e,t,r,i,s){n(e,t,r),s&&i.rightClickSelect(e),t.value=i.selectionText,t.select()}},7239:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorContrastCache=void 0;const i=r(1505);t.ColorContrastCache=class{constructor(){this._color=new i.TwoKeyMap,this._css=new i.TwoKeyMap}setCss(e,t,r){this._css.set(e,t,r)}getCss(e,t){return this._css.get(e,t)}setColor(e,t,r){this._color.set(e,t,r)}getColor(e,t){return this._color.get(e,t)}clear(){this._color.clear(),this._css.clear()}}},3656:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addDisposableDomListener=void 0,t.addDisposableDomListener=function(e,t,r,i){e.addEventListener(t,r,i);let s=!1;return{dispose:()=>{s||(s=!0,e.removeEventListener(t,r,i))}}}},3551:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Linkifier=void 0;const n=r(3656),o=r(8460),a=r(844),l=r(2585),c=r(4725);let u=t.Linkifier=class extends a.Disposable{get currentLink(){return this._currentLink}constructor(e,t,r,i,s){super(),this._element=e,this._mouseService=t,this._renderService=r,this._bufferService=i,this._linkProviderService=s,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new o.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new o.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,a.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,a.toDisposable)(()=>{var e;this._lastMouseEvent=void 0,null===(e=this._activeProviderReplies)||void 0===e||e.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,n.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,n.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,n.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,n.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(e){this._lastMouseEvent=e;const t=this._positionFromMouseEvent(e,this._element,this._mouseService);if(!t)return;this._isMouseOut=!1;const r=e.composedPath();for(let i=0;i<r.length;i++){const e=r[i];if(e.classList.contains("xterm"))break;if(e.classList.contains("xterm-hover"))return}this._lastBufferCell&&t.x===this._lastBufferCell.x&&t.y===this._lastBufferCell.y||(this._handleHover(t),this._lastBufferCell=t)}_handleHover(e){if(this._activeLine!==e.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(e,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))}_askForLink(e,t){var r;this._activeProviderReplies&&t||(null!==(r=this._activeProviderReplies)&&void 0!==r&&r.forEach(e=>{null===e||void 0===e||e.forEach(e=>{e.link.dispose&&e.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);let i=!1;for(const[n,o]of this._linkProviderService.linkProviders.entries())if(t){var s;(null===(s=this._activeProviderReplies)||void 0===s?void 0:s.get(n))&&(i=this._checkLinkProviderResult(n,e,i))}else o.provideLinks(e.y,t=>{var r,s;if(this._isMouseOut)return;const o=null===t||void 0===t?void 0:t.map(e=>({link:e}));null!==(r=this._activeProviderReplies)&&void 0!==r&&r.set(n,o),i=this._checkLinkProviderResult(n,e,i),(null===(s=this._activeProviderReplies)||void 0===s?void 0:s.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(e.y,this._activeProviderReplies)})}_removeIntersectingLinks(e,t){const r=new Set;for(let i=0;i<t.size;i++){const s=t.get(i);if(s)for(let t=0;t<s.length;t++){const i=s[t],n=i.link.range.start.y<e?0:i.link.range.start.x,o=i.link.range.end.y>e?this._bufferService.cols:i.link.range.end.x;for(let e=n;e<=o;e++){if(r.has(e)){s.splice(t--,1);break}r.add(e)}}}}_checkLinkProviderResult(e,t,r){if(!this._activeProviderReplies)return r;const i=this._activeProviderReplies.get(e);let s=!1;for(let o=0;o<e;o++)this._activeProviderReplies.has(o)&&!this._activeProviderReplies.get(o)||(s=!0);if(!s&&i){const e=i.find(e=>this._linkAtPosition(e.link,t));e&&(r=!0,this._handleNewLink(e))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!r)for(let o=0;o<this._activeProviderReplies.size;o++){var n;const e=null===(n=this._activeProviderReplies.get(o))||void 0===n?void 0:n.find(e=>this._linkAtPosition(e.link,t));if(e){r=!0,this._handleNewLink(e);break}}return r}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(e){if(!this._currentLink)return;const t=this._positionFromMouseEvent(e,this._element,this._mouseService);t&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,t)&&this._currentLink.link.activate(e,this._currentLink.link.text)}_clearCurrentLink(e,t){this._currentLink&&this._lastMouseEvent&&(!e||!t||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=t)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,a.disposeArray)(this._linkCacheDisposables))}_handleNewLink(e){if(!this._lastMouseEvent)return;const t=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);t&&this._linkAtPosition(e.link,t)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:void 0===e.link.decorations||e.link.decorations.underline,pointerCursor:void 0===e.link.decorations||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:()=>{var e;return null===(e=this._currentLink)||void 0===e||null===(e=e.state)||void 0===e?void 0:e.decorations.pointerCursor},set:e=>{var t;(null===(t=this._currentLink)||void 0===t?void 0:t.state)&&this._currentLink.state.decorations.pointerCursor!==e&&(this._currentLink.state.decorations.pointerCursor=e,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",e))}},underline:{get:()=>{var e;return null===(e=this._currentLink)||void 0===e||null===(e=e.state)||void 0===e?void 0:e.decorations.underline},set:t=>{var r,i;(null===(r=this._currentLink)||void 0===r?void 0:r.state)&&(null===(i=this._currentLink)||void 0===i||null===(i=i.state)||void 0===i?void 0:i.decorations.underline)!==t&&(this._currentLink.state.decorations.underline=t,this._currentLink.state.isHovered&&this._fireUnderlineEvent(e.link,t))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(e=>{if(!this._currentLink)return;const t=0===e.start?0:e.start+1+this._bufferService.buffer.ydisp,r=this._bufferService.buffer.ydisp+1+e.end;if(this._currentLink.link.range.start.y>=t&&this._currentLink.link.range.end.y<=r&&(this._clearCurrentLink(t,r),this._lastMouseEvent)){const e=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);e&&this._askForLink(e,!1)}})))}_linkHover(e,t,r){var i;null!==(i=this._currentLink)&&void 0!==i&&i.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),t.hover&&t.hover(r,t.text)}_fireUnderlineEvent(e,t){const r=e.range,i=this._bufferService.buffer.ydisp,s=this._createLinkUnderlineEvent(r.start.x-1,r.start.y-i-1,r.end.x,r.end.y-i-1,void 0);(t?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(s)}_linkLeave(e,t,r){var i;null!==(i=this._currentLink)&&void 0!==i&&i.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),t.leave&&t.leave(r,t.text)}_linkAtPosition(e,t){const r=e.range.start.y*this._bufferService.cols+e.range.start.x,i=e.range.end.y*this._bufferService.cols+e.range.end.x,s=t.y*this._bufferService.cols+t.x;return r<=s&&s<=i}_positionFromMouseEvent(e,t,r){const i=r.getCoords(e,t,this._bufferService.cols,this._bufferService.rows);if(i)return{x:i[0],y:i[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(e,t,r,i,s){return{x1:e,y1:t,x2:r,y2:i,cols:this._bufferService.cols,fg:s}}};t.Linkifier=u=i([s(1,c.IMouseService),s(2,c.IRenderService),s(3,l.IBufferService),s(4,c.ILinkProviderService)],u)},9042:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tooMuchOutput=t.promptLabel=void 0,t.promptLabel="Terminal input",t.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.OscLinkProvider=void 0;const n=r(511),o=r(2585);let a=t.OscLinkProvider=class{constructor(e,t,r){this._bufferService=e,this._optionsService=t,this._oscLinkService=r}provideLinks(e,t){const r=this._bufferService.buffer.lines.get(e-1);if(!r)return void t(void 0);const i=[],s=this._optionsService.rawOptions.linkHandler,o=new n.CellData,a=r.getTrimmedLength();let c=-1,u=-1,h=!1;for(let n=0;n<a;n++)if(-1!==u||r.hasContent(n)){if(r.loadCell(n,o),o.hasExtendedAttrs()&&o.extended.urlId){if(-1===u){u=n,c=o.extended.urlId;continue}h=o.extended.urlId!==c}else-1!==u&&(h=!0);if(h||-1!==u&&n===a-1){var d;const t=null===(d=this._oscLinkService.getLinkData(c))||void 0===d?void 0:d.uri;if(t){const r={start:{x:u+1,y:e},end:{x:n+(h||n!==a-1?0:1),y:e}};let o=!1;if(null===s||void 0===s||!s.allowNonHttpProtocols)try{const e=new URL(t);["http:","https:"].includes(e.protocol)||(o=!0)}catch(e){o=!0}o||i.push({text:t,range:r,activate:(e,t)=>s?s.activate(e,t,r):l(0,t),hover:(e,t)=>{var i;return null===s||void 0===s||null===(i=s.hover)||void 0===i?void 0:i.call(s,e,t,r)},leave:(e,t)=>{var i;return null===s||void 0===s||null===(i=s.leave)||void 0===i?void 0:i.call(s,e,t,r)}})}h=!1,o.hasExtendedAttrs()&&o.extended.urlId?(u=n,c=o.extended.urlId):(u=-1,c=-1)}}t(i)}};function l(e,t){if(confirm("Do you want to navigate to ".concat(t,"?\n\nWARNING: This link could potentially be dangerous"))){const e=window.open();if(e){try{e.opener=null}catch(r){}e.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}}t.OscLinkProvider=a=i([s(0,o.IBufferService),s(1,o.IOptionsService),s(2,o.IOscLinkService)],a)},6193:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RenderDebouncer=void 0,t.RenderDebouncer=class{constructor(e,t){this._renderCallback=e,this._coreBrowserService=t,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(e){return this._refreshCallbacks.push(e),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(e,t,r){this._rowCount=r,e=void 0!==e?e:0,t=void 0!==t?t:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,e):e,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,t):t,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,void 0===this._rowStart||void 0===this._rowEnd||void 0===this._rowCount)return void this._runRefreshCallbacks();const e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const e of this._refreshCallbacks)e(0);this._refreshCallbacks=[]}}},3236:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Terminal=void 0;const i=r(3614),s=r(3656),n=r(3551),o=r(9042),a=r(3730),l=r(1680),c=r(3107),u=r(5744),h=r(2950),d=r(1296),f=r(428),p=r(4269),g=r(5114),_=r(8934),m=r(3230),v=r(9312),y=r(4725),w=r(6731),b=r(8055),S=r(8969),x=r(8460),C=r(844),k=r(6114),E=r(8437),R=r(2584),L=r(7399),A=r(5941),T=r(9074),j=r(2585),N=r(5435),D=r(4567),P=r(779);class M extends S.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.browser=k,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new C.MutableDisposable),this._onCursorMove=this.register(new x.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new x.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new x.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new x.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new x.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new x.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new x.EventEmitter),this._onBlur=this.register(new x.EventEmitter),this._onA11yCharEmitter=this.register(new x.EventEmitter),this._onA11yTabEmitter=this.register(new x.EventEmitter),this._onWillOpen=this.register(new x.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(T.DecorationService),this._instantiationService.setService(j.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(P.LinkProviderService),this._instantiationService.setService(y.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(a.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((e,t)=>this.refresh(e,t))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(e=>this._reportWindowsOptions(e))),this.register(this._inputHandler.onColor(e=>this._handleColorEvent(e))),this.register((0,x.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,x.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,x.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,x.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(e=>this._afterResize(e.cols,e.rows))),this.register((0,C.toDisposable)(()=>{var e;this._customKeyEventHandler=void 0,null===(e=this.element)||void 0===e||null===(e=e.parentNode)||void 0===e||e.removeChild(this.element)}))}_handleColorEvent(e){if(this._themeService)for(const t of e){let e,r="";switch(t.index){case 256:e="foreground",r="10";break;case 257:e="background",r="11";break;case 258:e="cursor",r="12";break;default:e="ansi",r="4;"+t.index}switch(t.type){case 0:const i=b.color.toColorRGB("ansi"===e?this._themeService.colors.ansi[t.index]:this._themeService.colors[e]);this.coreService.triggerDataEvent("".concat(R.C0.ESC,"]").concat(r,";").concat((0,A.toRgbString)(i)).concat(R.C1_ESCAPED.ST));break;case 1:if("ansi"===e)this._themeService.modifyColors(e=>e.ansi[t.index]=b.channels.toColor(...t.color));else{const r=e;this._themeService.modifyColors(e=>e[r]=b.channels.toColor(...t.color))}break;case 2:this._themeService.restoreColor(t.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(e){e?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(D.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(e){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(R.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var e;return null===(e=this.textarea)||void 0===e?void 0:e.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(R.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const e=this.buffer.ybase+this.buffer.y,t=this.buffer.lines.get(e);if(!t)return;const r=Math.min(this.buffer.x,this.cols-1),i=this._renderService.dimensions.css.cell.height,s=t.getWidth(r),n=this._renderService.dimensions.css.cell.width*s,o=this.buffer.y*this._renderService.dimensions.css.cell.height,a=r*this._renderService.dimensions.css.cell.width;this.textarea.style.left=a+"px",this.textarea.style.top=o+"px",this.textarea.style.width=n+"px",this.textarea.style.height=i+"px",this.textarea.style.lineHeight=i+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,s.addDisposableDomListener)(this.element,"copy",e=>{this.hasSelection()&&(0,i.copyHandler)(e,this._selectionService)}));const e=e=>(0,i.handlePasteEvent)(e,this.textarea,this.coreService,this.optionsService);this.register((0,s.addDisposableDomListener)(this.textarea,"paste",e)),this.register((0,s.addDisposableDomListener)(this.element,"paste",e)),k.isFirefox?this.register((0,s.addDisposableDomListener)(this.element,"mousedown",e=>{2===e.button&&(0,i.rightClickHandler)(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,s.addDisposableDomListener)(this.element,"contextmenu",e=>{(0,i.rightClickHandler)(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),k.isLinux&&this.register((0,s.addDisposableDomListener)(this.element,"auxclick",e=>{1===e.button&&(0,i.moveTextAreaUnderMouseCursor)(e,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,s.addDisposableDomListener)(this.textarea,"keyup",e=>this._keyUp(e),!0)),this.register((0,s.addDisposableDomListener)(this.textarea,"keydown",e=>this._keyDown(e),!0)),this.register((0,s.addDisposableDomListener)(this.textarea,"keypress",e=>this._keyPress(e),!0)),this.register((0,s.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,s.addDisposableDomListener)(this.textarea,"compositionupdate",e=>this._compositionHelper.compositionupdate(e))),this.register((0,s.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,s.addDisposableDomListener)(this.textarea,"input",e=>this._inputEvent(e),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(e){var t,r,i;if(!e)throw new Error("Terminal requires a parent element.");if(e.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),null!==(t=this.element)&&void 0!==t&&t.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=e.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),e.appendChild(this.element);const a=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),a.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,s.addDisposableDomListener)(this.screenElement,"mousemove",e=>this.updateCursorStyle(e))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),a.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",o.promptLabel),k.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(g.CoreBrowserService,this.textarea,null!==(r=e.ownerDocument.defaultView)&&void 0!==r?r:window,(null!==(i=this._document)&&void 0!==i?i:"undefined"!=typeof window)?window.document:null)),this._instantiationService.setService(y.ICoreBrowserService,this._coreBrowserService),this.register((0,s.addDisposableDomListener)(this.textarea,"focus",e=>this._handleTextAreaFocus(e))),this.register((0,s.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(f.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(y.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(w.ThemeService),this._instantiationService.setService(y.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(p.CharacterJoinerService),this._instantiationService.setService(y.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(m.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(y.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(e=>this._onRender.fire(e))),this.onResize(e=>this._renderService.resize(e.cols,e.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(h.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(_.MouseService),this._instantiationService.setService(y.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(n.Linkifier,this.screenElement)),this.element.appendChild(a);try{this._onWillOpen.fire(this.element)}catch(d){}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(l.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(e=>this.scrollLines(e.amount,e.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(v.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(y.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(e=>this.scrollLines(e.amount,e.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(e=>this._renderService.handleSelectionChanged(e.start,e.end,e.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(e=>{this.textarea.value=e,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(e=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,s.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(c.BufferDecorationRenderer,this.screenElement)),this.register((0,s.addDisposableDomListener)(this.element,"mousedown",e=>this._selectionService.handleMouseDown(e))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(D.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",e=>this._handleScreenReaderModeOptionChange(e))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(u.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",e=>{!this._overviewRulerRenderer&&e&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(u.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(d.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const e=this,t=this.element;function r(t){const r=e._mouseService.getMouseReportCoords(t,e.screenElement);if(!r)return!1;let i,s;switch(t.overrideType||t.type){case"mousemove":s=32,void 0===t.buttons?(i=3,void 0!==t.button&&(i=t.button<3?t.button:3)):i=1&t.buttons?0:4&t.buttons?1:2&t.buttons?2:3;break;case"mouseup":s=0,i=t.button<3?t.button:3;break;case"mousedown":s=1,i=t.button<3?t.button:3;break;case"wheel":if(e._customWheelEventHandler&&!1===e._customWheelEventHandler(t))return!1;if(0===e.viewport.getLinesScrolled(t))return!1;s=t.deltaY<0?0:1,i=4;break;default:return!1}return!(void 0===s||void 0===i||i>4)&&e.coreMouseService.triggerMouseEvent({col:r.col,row:r.row,x:r.x,y:r.y,button:i,action:s,ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey})}const i={mouseup:null,wheel:null,mousedrag:null,mousemove:null},n={mouseup:e=>(r(e),e.buttons||(this._document.removeEventListener("mouseup",i.mouseup),i.mousedrag&&this._document.removeEventListener("mousemove",i.mousedrag)),this.cancel(e)),wheel:e=>(r(e),this.cancel(e,!0)),mousedrag:e=>{e.buttons&&r(e)},mousemove:e=>{e.buttons||r(e)}};this.register(this.coreMouseService.onProtocolChange(e=>{e?("debug"===this.optionsService.rawOptions.logLevel&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(e)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&e?i.mousemove||(t.addEventListener("mousemove",n.mousemove),i.mousemove=n.mousemove):(t.removeEventListener("mousemove",i.mousemove),i.mousemove=null),16&e?i.wheel||(t.addEventListener("wheel",n.wheel,{passive:!1}),i.wheel=n.wheel):(t.removeEventListener("wheel",i.wheel),i.wheel=null),2&e?i.mouseup||(i.mouseup=n.mouseup):(this._document.removeEventListener("mouseup",i.mouseup),i.mouseup=null),4&e?i.mousedrag||(i.mousedrag=n.mousedrag):(this._document.removeEventListener("mousemove",i.mousedrag),i.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,s.addDisposableDomListener)(t,"mousedown",e=>{if(e.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(e))return r(e),i.mouseup&&this._document.addEventListener("mouseup",i.mouseup),i.mousedrag&&this._document.addEventListener("mousemove",i.mousedrag),this.cancel(e)})),this.register((0,s.addDisposableDomListener)(t,"wheel",e=>{if(!i.wheel){if(this._customWheelEventHandler&&!1===this._customWheelEventHandler(e))return!1;if(!this.buffer.hasScrollback){const t=this.viewport.getLinesScrolled(e);if(0===t)return;const r=R.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(e.deltaY<0?"A":"B");let i="";for(let e=0;e<Math.abs(t);e++)i+=r;return this.coreService.triggerDataEvent(i,!0),this.cancel(e,!0)}return this.viewport.handleWheel(e)?this.cancel(e):void 0}},{passive:!1})),this.register((0,s.addDisposableDomListener)(t,"touchstart",e=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(e),this.cancel(e)},{passive:!0})),this.register((0,s.addDisposableDomListener)(t,"touchmove",e=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(e)?void 0:this.cancel(e)},{passive:!1}))}refresh(e,t){var r;null===(r=this._renderService)||void 0===r||r.refreshRows(e,t)}updateCursorStyle(e){var t;null!==(t=this._selectionService)&&void 0!==t&&t.shouldColumnSelect(e)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(e,t){var r;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;1===i?(super.scrollLines(e,t,i),this.refresh(0,this.rows-1)):null===(r=this.viewport)||void 0===r||r.scrollLines(e)}paste(e){(0,i.paste)(e,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(e){this._customKeyEventHandler=e}attachCustomWheelEventHandler(e){this._customWheelEventHandler=e}registerLinkProvider(e){return this._linkProviderService.registerLinkProvider(e)}registerCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const t=this._characterJoinerService.register(e);return this.refresh(0,this.rows-1),t}deregisterCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(e)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(e){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+e)}registerDecoration(e){return this._decorationService.registerDecoration(e)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(e,t,r){this._selectionService.setSelection(e,t,r)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var e;null===(e=this._selectionService)||void 0===e||e.clearSelection()}selectAll(){var e;null===(e=this._selectionService)||void 0===e||e.selectAll()}selectLines(e,t){var r;null===(r=this._selectionService)||void 0===r||r.selectLines(e,t)}_keyDown(e){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;const t=this.browser.isMac&&this.options.macOptionIsMeta&&e.altKey;if(!t&&!this._compositionHelper.keydown(e))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;t||"Dead"!==e.key&&"AltGraph"!==e.key||(this._unprocessedDeadKey=!0);const r=(0,L.evaluateKeyboardEvent)(e,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(e),3===r.type||2===r.type){const t=this.rows-1;return this.scrollLines(2===r.type?-t:t),this.cancel(e,!0)}return 1===r.type&&this.selectAll(),!!this._isThirdLevelShift(this.browser,e)||(r.cancel&&this.cancel(e,!0),!r.key||!!(e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&1===e.key.length&&e.key.charCodeAt(0)>=65&&e.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(r.key!==R.C0.ETX&&r.key!==R.C0.CR||(this.textarea.value=""),this._onKey.fire({key:r.key,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(r.key,!0),!this.optionsService.rawOptions.screenReaderMode||e.altKey||e.ctrlKey?this.cancel(e,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(e,t){const r=e.isMac&&!this.options.macOptionIsMeta&&t.altKey&&!t.ctrlKey&&!t.metaKey||e.isWindows&&t.altKey&&t.ctrlKey&&!t.metaKey||e.isWindows&&t.getModifierState("AltGraph");return"keypress"===t.type?r:r&&(!t.keyCode||t.keyCode>47)}_keyUp(e){this._keyDownSeen=!1,this._customKeyEventHandler&&!1===this._customKeyEventHandler(e)||(function(e){return 16===e.keyCode||17===e.keyCode||18===e.keyCode}(e)||this.focus(),this.updateCursorStyle(e),this._keyPressHandled=!1)}_keyPress(e){let t;if(this._keyPressHandled=!1,this._keyDownHandled)return!1;if(this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;if(this.cancel(e),e.charCode)t=e.charCode;else if(null===e.which||void 0===e.which)t=e.keyCode;else{if(0===e.which||0===e.charCode)return!1;t=e.which}return!(!t||(e.altKey||e.ctrlKey||e.metaKey)&&!this._isThirdLevelShift(this.browser,e)||(t=String.fromCharCode(t),this._onKey.fire({key:t,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(t,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(e){if(e.data&&"insertText"===e.inputType&&(!e.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const t=e.data;return this.coreService.triggerDataEvent(t,!0),this.cancel(e),!0}return!1}resize(e,t){e!==this.cols||t!==this.rows?super.resize(e,t):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(e,t){var r,i;null!==(r=this._charSizeService)&&void 0!==r&&r.measure(),null===(i=this.viewport)||void 0===i||i.syncScrollArea(!0)}clear(){if(0!==this.buffer.ybase||0!==this.buffer.y){var e;this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let e=1;e<this.rows;e++)this.buffer.lines.push(this.buffer.getBlankLine(E.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),null!==(e=this.viewport)&&void 0!==e&&e.reset(),this.refresh(0,this.rows-1)}}reset(){var e,t;this.options.rows=this.rows,this.options.cols=this.cols;const r=this._customKeyEventHandler;this._setup(),super.reset(),null!==(e=this._selectionService)&&void 0!==e&&e.reset(),this._decorationService.reset(),null!==(t=this.viewport)&&void 0!==t&&t.reset(),this._customKeyEventHandler=r,this.refresh(0,this.rows-1)}clearTextureAtlas(){var e;null===(e=this._renderService)||void 0===e||e.clearTextureAtlas()}_reportFocus(){var e;null!==(e=this.element)&&void 0!==e&&e.classList.contains("focus")?this.coreService.triggerDataEvent(R.C0.ESC+"[I"):this.coreService.triggerDataEvent(R.C0.ESC+"[O")}_reportWindowsOptions(e){if(this._renderService)switch(e){case N.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const e=this._renderService.dimensions.css.canvas.width.toFixed(0),t=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent("".concat(R.C0.ESC,"[4;").concat(t,";").concat(e,"t"));break;case N.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const r=this._renderService.dimensions.css.cell.width.toFixed(0),i=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent("".concat(R.C0.ESC,"[6;").concat(i,";").concat(r,"t"))}}cancel(e,t){if(this.options.cancelEvents||t)return e.preventDefault(),e.stopPropagation(),!1}}t.Terminal=M},9924:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TimeBasedDebouncer=void 0,t.TimeBasedDebouncer=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this._renderCallback=e,this._debounceThresholdMS=t,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(e,t,r){this._rowCount=r,e=void 0!==e?e:0,t=void 0!==t?t:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,e):e,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,t):t;const i=Date.now();if(i-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=i,this._innerRefresh();else if(!this._additionalRefreshRequested){const e=i-this._lastRefreshMs,t=this._debounceThresholdMS-e;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},t)}}_innerRefresh(){if(void 0===this._rowStart||void 0===this._rowEnd||void 0===this._rowCount)return;const e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t)}}},1680:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Viewport=void 0;const n=r(3656),o=r(4725),a=r(8460),l=r(844),c=r(2585);let u=t.Viewport=class extends l.Disposable{constructor(e,t,r,i,s,o,l,c){super(),this._viewportElement=e,this._scrollArea=t,this._bufferService=r,this._optionsService=i,this._charSizeService=s,this._renderService=o,this._coreBrowserService=l,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new a.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,n.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(e=>this._activeBuffer=e.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(e=>this._renderDimensions=e)),this._handleThemeChange(c.colors),this.register(c.onChangeColors(e=>this._handleThemeChange(e))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(e){this._viewportElement.style.backgroundColor=e.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(e){if(e)return this._innerRefresh(),void(null!==this._refreshAnimationFrame&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const e=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==e&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=e),this._refreshAnimationFrame=null}syncScrollArea(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(e)}_handleScroll(e){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const t=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:t,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||-1===this._smoothScrollState.origin||-1===this._smoothScrollState.target)return;const e=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(e*(this._smoothScrollState.target-this._smoothScrollState.origin)),e<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(e,t){const r=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(t<0&&0!==this._viewportElement.scrollTop||t>0&&r<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)}handleWheel(e){const t=this._getPixelsScrolled(e);return 0!==t&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,-1===this._smoothScrollState.target?this._smoothScrollState.target=this._viewportElement.scrollTop+t:this._smoothScrollState.target+=t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))}scrollLines(e){if(0!==e)if(this._optionsService.rawOptions.smoothScrollDuration){const t=e*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:e,suppressScrollEvent:!1})}_getPixelsScrolled(e){if(0===e.deltaY||e.shiftKey)return 0;let t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?t*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._currentRowHeight*this._bufferService.rows),t}getBufferElements(e,t){let r,i="";const s=[],n=null!==t&&void 0!==t?t:this._bufferService.buffer.lines.length,o=this._bufferService.buffer.lines;for(let l=e;l<n;l++){var a;const e=o.get(l);if(!e)continue;const t=null===(a=o.get(l+1))||void 0===a?void 0:a.isWrapped;if(i+=e.translateToString(!t),!t||l===o.length-1){const e=document.createElement("div");e.textContent=i,s.push(e),i.length>0&&(r=e),i=""}}return{bufferElements:s,cursorElement:r}}getLinesScrolled(e){if(0===e.deltaY||e.shiftKey)return 0;let t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(t/=this._currentRowHeight+0,this._wheelPartialScroll+=t,t=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._bufferService.rows),t}_applyScrollModifier(e,t){const r=this._optionsService.rawOptions.fastScrollModifier;return"alt"===r&&t.altKey||"ctrl"===r&&t.ctrlKey||"shift"===r&&t.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(e){this._lastTouchY=e.touches[0].pageY}handleTouchMove(e){const t=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,0!==t&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))}};t.Viewport=u=i([s(2,c.IBufferService),s(3,c.IOptionsService),s(4,o.ICharSizeService),s(5,o.IRenderService),s(6,o.ICoreBrowserService),s(7,o.IThemeService)],u)},3107:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferDecorationRenderer=void 0;const n=r(4725),o=r(844),a=r(2585);let l=t.BufferDecorationRenderer=class extends o.Disposable{constructor(e,t,r,i,s){super(),this._screenElement=e,this._bufferService=t,this._coreBrowserService=r,this._decorationService=i,this._renderService=s,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(e=>this._removeDecoration(e))),this.register((0,o.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){void 0===this._animationFrame&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const e of this._decorationService.decorations)this._renderDecoration(e);this._dimensionsChanged=!1}_renderDecoration(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)}_createElement(e){var t,r;const i=this._coreBrowserService.mainDocument.createElement("div");i.classList.add("xterm-decoration"),i.classList.toggle("xterm-decoration-top-layer","top"===(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.layer)),i.style.width="".concat(Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width),"px"),i.style.height=(e.options.height||1)*this._renderService.dimensions.css.cell.height+"px",i.style.top=(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",i.style.lineHeight="".concat(this._renderService.dimensions.css.cell.height,"px");const s=null!==(r=e.options.x)&&void 0!==r?r:0;return s&&s>this._bufferService.cols&&(i.style.display="none"),this._refreshXPosition(e,i),i}_refreshStyle(e){const t=e.marker.line-this._bufferService.buffers.active.ydisp;if(t<0||t>=this._bufferService.rows)e.element&&(e.element.style.display="none",e.onRenderEmitter.fire(e.element));else{let r=this._decorationElements.get(e);r||(r=this._createElement(e),e.element=r,this._decorationElements.set(e,r),this._container.appendChild(r),e.onDispose(()=>{this._decorationElements.delete(e),r.remove()})),r.style.top=t*this._renderService.dimensions.css.cell.height+"px",r.style.display=this._altBufferIsActive?"none":"block",e.onRenderEmitter.fire(r)}}_refreshXPosition(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.element;if(!r)return;const i=null!==(t=e.options.x)&&void 0!==t?t:0;"right"===(e.options.anchor||"left")?r.style.right=i?i*this._renderService.dimensions.css.cell.width+"px":"":r.style.left=i?i*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(e){var t;null!==(t=this._decorationElements.get(e))&&void 0!==t&&t.remove(),this._decorationElements.delete(e),e.dispose()}};t.BufferDecorationRenderer=l=i([s(1,a.IBufferService),s(2,n.ICoreBrowserService),s(3,a.IDecorationService),s(4,n.IRenderService)],l)},5871:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorZoneStore=void 0,t.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(e){if(e.options.overviewRulerOptions){for(const t of this._zones)if(t.color===e.options.overviewRulerOptions.color&&t.position===e.options.overviewRulerOptions.position){if(this._lineIntersectsZone(t,e.marker.line))return;if(this._lineAdjacentToZone(t,e.marker.line,e.options.overviewRulerOptions.position))return void this._addLineToZone(t,e.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=e.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=e.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=e.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=e.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:e.options.overviewRulerOptions.color,position:e.options.overviewRulerOptions.position,startBufferLine:e.marker.line,endBufferLine:e.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(e){this._linePadding=e}_lineIntersectsZone(e,t){return t>=e.startBufferLine&&t<=e.endBufferLine}_lineAdjacentToZone(e,t,r){return t>=e.startBufferLine-this._linePadding[r||"full"]&&t<=e.endBufferLine+this._linePadding[r||"full"]}_addLineToZone(e,t){e.startBufferLine=Math.min(e.startBufferLine,t),e.endBufferLine=Math.max(e.endBufferLine,t)}}},5744:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.OverviewRulerRenderer=void 0;const n=r(5871),o=r(4725),a=r(844),l=r(2585),c={full:0,left:0,center:0,right:0},u={full:0,left:0,center:0,right:0},h={full:0,left:0,center:0,right:0};let d=t.OverviewRulerRenderer=class extends a.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(e,t,r,i,s,o,l){var c;super(),this._viewportElement=e,this._screenElement=t,this._bufferService=r,this._decorationService=i,this._renderService=s,this._optionsService=o,this._coreBrowserService=l,this._colorZoneStore=new n.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),null===(c=this._viewportElement.parentElement)||void 0===c||c.insertBefore(this._canvas,this._viewportElement);const u=this._canvas.getContext("2d");if(!u)throw new Error("Ctx cannot be null");this._ctx=u,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,a.toDisposable)(()=>{var e;null===(e=this._canvas)||void 0===e||e.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const e=Math.floor(this._canvas.width/3),t=Math.ceil(this._canvas.width/3);u.full=this._canvas.width,u.left=e,u.center=t,u.right=e,this._refreshDrawHeightConstants(),h.full=0,h.left=0,h.center=u.left,h.right=u.left+u.center}_refreshDrawHeightConstants(){c.full=Math.round(2*this._coreBrowserService.dpr);const e=this._canvas.height/this._bufferService.buffer.lines.length,t=Math.round(Math.max(Math.min(e,12),6)*this._coreBrowserService.dpr);c.left=t,c.center=t,c.right=t}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width="".concat(this._width,"px"),this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height="".concat(this._screenElement.clientHeight,"px"),this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const t of this._decorationService.decorations)this._colorZoneStore.addDecoration(t);this._ctx.lineWidth=1;const e=this._colorZoneStore.zones;for(const t of e)"full"!==t.position&&this._renderColorZone(t);for(const t of e)"full"===t.position&&this._renderColorZone(t);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(e){this._ctx.fillStyle=e.color,this._ctx.fillRect(h[e.position||"full"],Math.round((this._canvas.height-1)*(e.startBufferLine/this._bufferService.buffers.active.lines.length)-c[e.position||"full"]/2),u[e.position||"full"],Math.round((this._canvas.height-1)*((e.endBufferLine-e.startBufferLine)/this._bufferService.buffers.active.lines.length)+c[e.position||"full"]))}_queueRefresh(e,t){this._shouldUpdateDimensions=e||this._shouldUpdateDimensions,this._shouldUpdateAnchor=t||this._shouldUpdateAnchor,void 0===this._animationFrame&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};t.OverviewRulerRenderer=d=i([s(2,l.IBufferService),s(3,l.IDecorationService),s(4,o.IRenderService),s(5,l.IOptionsService),s(6,o.ICoreBrowserService)],d)},2950:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CompositionHelper=void 0;const n=r(4725),o=r(2585),a=r(2584);let l=t.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(e,t,r,i,s,n){this._textarea=e,this._compositionView=t,this._bufferService=r,this._optionsService=i,this._coreService=s,this._renderService=n,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(e){this._compositionView.textContent=e.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(e){if(this._isComposing||this._isSendingComposition){if(229===e.keyCode)return!1;if(16===e.keyCode||17===e.keyCode||18===e.keyCode)return!1;this._finalizeComposition(!1)}return 229!==e.keyCode||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(e){if(this._compositionView.classList.remove("active"),this._isComposing=!1,e){const e={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let t;this._isSendingComposition=!1,e.start+=this._dataAlreadySent.length,t=this._isComposing?this._textarea.value.substring(e.start,e.end):this._textarea.value.substring(e.start),t.length>0&&this._coreService.triggerDataEvent(t,!0)}},0)}else{this._isSendingComposition=!1;const e=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(e,!0)}}_handleAnyTextareaChanges(){const e=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const t=this._textarea.value,r=t.replace(e,"");this._dataAlreadySent=r,t.length>e.length?this._coreService.triggerDataEvent(r,!0):t.length<e.length?this._coreService.triggerDataEvent("".concat(a.C0.DEL),!0):t.length===e.length&&t!==e&&this._coreService.triggerDataEvent(t,!0)}},0)}updateCompositionElements(e){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const e=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),t=this._renderService.dimensions.css.cell.height,r=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,i=e*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=i+"px",this._compositionView.style.top=r+"px",this._compositionView.style.height=t+"px",this._compositionView.style.lineHeight=t+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const s=this._compositionView.getBoundingClientRect();this._textarea.style.left=i+"px",this._textarea.style.top=r+"px",this._textarea.style.width=Math.max(s.width,1)+"px",this._textarea.style.height=Math.max(s.height,1)+"px",this._textarea.style.lineHeight=s.height+"px"}e||setTimeout(()=>this.updateCompositionElements(!0),0)}}};t.CompositionHelper=l=i([s(2,o.IBufferService),s(3,o.IOptionsService),s(4,o.ICoreService),s(5,n.IRenderService)],l)},9806:(e,t)=>{function r(e,t,r){const i=r.getBoundingClientRect(),s=e.getComputedStyle(r),n=parseInt(s.getPropertyValue("padding-left")),o=parseInt(s.getPropertyValue("padding-top"));return[t.clientX-i.left-n,t.clientY-i.top-o]}Object.defineProperty(t,"__esModule",{value:!0}),t.getCoords=t.getCoordsRelativeToElement=void 0,t.getCoordsRelativeToElement=r,t.getCoords=function(e,t,i,s,n,o,a,l,c){if(!o)return;const u=r(e,t,i);return u?(u[0]=Math.ceil((u[0]+(c?a/2:0))/a),u[1]=Math.ceil(u[1]/l),u[0]=Math.min(Math.max(u[0],1),s+(c?1:0)),u[1]=Math.min(Math.max(u[1],1),n),u):void 0}},9504:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.moveToCellSequence=void 0;const i=r(2584);function s(e,t,r,i){const s=e-n(e,r),a=t-n(t,r),u=Math.abs(s-a)-function(e,t,r){let i=0;const s=e-n(e,r),a=t-n(t,r);for(let n=0;n<Math.abs(s-a);n++){const a="A"===o(e,t)?-1:1,l=r.buffer.lines.get(s+a*n);(null===l||void 0===l?void 0:l.isWrapped)&&i++}return i}(e,t,r);return c(u,l(o(e,t),i))}function n(e,t){var r;let i=0,s=t.buffer.lines.get(e),n=null===(r=s)||void 0===r?void 0:r.isWrapped;for(;n&&e>=0&&e<t.rows;){var o;i++,s=t.buffer.lines.get(--e),n=null===(o=s)||void 0===o?void 0:o.isWrapped}return i}function o(e,t){return e>t?"A":"B"}function a(e,t,r,i,s,n){let o=e,a=t,l="";for(;o!==r||a!==i;)o+=s?1:-1,s&&o>n.cols-1?(l+=n.buffer.translateBufferLineToString(a,!1,e,o),o=0,e=0,a++):!s&&o<0&&(l+=n.buffer.translateBufferLineToString(a,!1,0,e+1),o=n.cols-1,e=o,a--);return l+n.buffer.translateBufferLineToString(a,!1,e,o)}function l(e,t){const r=t?"O":"[";return i.C0.ESC+r+e}function c(e,t){e=Math.floor(e);let r="";for(let i=0;i<e;i++)r+=t;return r}t.moveToCellSequence=function(e,t,r,i){const o=r.buffer.x,u=r.buffer.y;if(!r.buffer.hasScrollback)return function(e,t,r,i,o,u){return 0===s(t,i,o,u).length?"":c(a(e,t,e,t-n(t,o),!1,o).length,l("D",u))}(o,u,0,t,r,i)+s(u,t,r,i)+function(e,t,r,i,o,u){let h;h=s(t,i,o,u).length>0?i-n(i,o):t;const d=i,f=function(e,t,r,i,o,a){let l;return l=s(r,i,o,a).length>0?i-n(i,o):t,e<r&&l<=i||e>=r&&l<i?"C":"D"}(e,t,r,i,o,u);return c(a(e,h,r,d,"C"===f,o).length,l(f,u))}(o,u,e,t,r,i);let h;if(u===t)return h=o>e?"D":"C",c(Math.abs(o-e),l(h,i));h=u>t?"D":"C";const d=Math.abs(u-t);return c(function(e,t){return t.cols-e}(u>t?e:o,r)+(d-1)*r.cols+1+((u>t?o:e)-1),l(h,i))}},1296:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomRenderer=void 0;const n=r(3787),o=r(2550),a=r(2223),l=r(6171),c=r(6052),u=r(4725),h=r(8055),d=r(8460),f=r(844),p=r(2585),g="xterm-dom-renderer-owner-",_="xterm-rows",m="xterm-fg-",v="xterm-bg-",y="xterm-focus",w="xterm-selection";let b=1,S=t.DomRenderer=class extends f.Disposable{constructor(e,t,r,i,s,a,u,h,p,m,v,y,S){super(),this._terminal=e,this._document=t,this._element=r,this._screenElement=i,this._viewportElement=s,this._helperContainer=a,this._linkifier2=u,this._charSizeService=p,this._optionsService=m,this._bufferService=v,this._coreBrowserService=y,this._themeService=S,this._terminalClass=b++,this._rowElements=[],this._selectionRenderModel=(0,c.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new d.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(_),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(w),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,l.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(e=>this._injectCss(e))),this._injectCss(this._themeService.colors),this._rowFactory=h.createInstance(n.DomRendererRowFactory,document),this._element.classList.add(g+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(e=>this._handleLinkHover(e))),this.register(this._linkifier2.onHideLinkUnderline(e=>this._handleLinkLeave(e))),this.register((0,f.toDisposable)(()=>{this._element.classList.remove(g+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new o.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const e=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*e,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*e),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/e),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/e),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const r of this._rowElements)r.style.width="".concat(this.dimensions.css.canvas.width,"px"),r.style.height="".concat(this.dimensions.css.cell.height,"px"),r.style.lineHeight="".concat(this.dimensions.css.cell.height,"px"),r.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const t="".concat(this._terminalSelector," .").concat(_," span { display: inline-block; height: 100%; vertical-align: top;}");this._dimensionsStyleElement.textContent=t,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width="".concat(this.dimensions.css.canvas.width,"px"),this._screenElement.style.height="".concat(this.dimensions.css.canvas.height,"px")}_injectCss(e){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let t="".concat(this._terminalSelector," .").concat(_," { color: ").concat(e.foreground.css,"; font-family: ").concat(this._optionsService.rawOptions.fontFamily,"; font-size: ").concat(this._optionsService.rawOptions.fontSize,"px; font-kerning: none; white-space: pre}");t+="".concat(this._terminalSelector," .").concat(_," .xterm-dim { color: ").concat(h.color.multiplyOpacity(e.foreground,.5).css,";}"),t+="".concat(this._terminalSelector," span:not(.xterm-bold) { font-weight: ").concat(this._optionsService.rawOptions.fontWeight,";}").concat(this._terminalSelector," span.xterm-bold { font-weight: ").concat(this._optionsService.rawOptions.fontWeightBold,";}").concat(this._terminalSelector," span.xterm-italic { font-style: italic;}");const r="blink_underline_".concat(this._terminalClass),i="blink_bar_".concat(this._terminalClass),s="blink_block_".concat(this._terminalClass);t+="@keyframes ".concat(r," { 50% {  border-bottom-style: hidden; }}"),t+="@keyframes ".concat(i," { 50% {  box-shadow: none; }}"),t+="@keyframes ".concat(s," { 0% {  background-color: ").concat(e.cursor.css,";  color: ").concat(e.cursorAccent.css,"; } 50% {  background-color: inherit;  color: ").concat(e.cursor.css,"; }}"),t+="".concat(this._terminalSelector," .").concat(_,".").concat(y," .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ").concat(r," 1s step-end infinite;}").concat(this._terminalSelector," .").concat(_,".").concat(y," .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ").concat(i," 1s step-end infinite;}").concat(this._terminalSelector," .").concat(_,".").concat(y," .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ").concat(s," 1s step-end infinite;}").concat(this._terminalSelector," .").concat(_," .xterm-cursor.xterm-cursor-block { background-color: ").concat(e.cursor.css,"; color: ").concat(e.cursorAccent.css,";}").concat(this._terminalSelector," .").concat(_," .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ").concat(e.cursor.css," !important; color: ").concat(e.cursorAccent.css," !important;}").concat(this._terminalSelector," .").concat(_," .xterm-cursor.xterm-cursor-outline { outline: 1px solid ").concat(e.cursor.css,"; outline-offset: -1px;}").concat(this._terminalSelector," .").concat(_," .xterm-cursor.xterm-cursor-bar { box-shadow: ").concat(this._optionsService.rawOptions.cursorWidth,"px 0 0 ").concat(e.cursor.css," inset;}").concat(this._terminalSelector," .").concat(_," .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ").concat(e.cursor.css,"; border-bottom-style: solid; height: calc(100% - 1px);}"),t+="".concat(this._terminalSelector," .").concat(w," { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}").concat(this._terminalSelector,".focus .").concat(w," div { position: absolute; background-color: ").concat(e.selectionBackgroundOpaque.css,";}").concat(this._terminalSelector," .").concat(w," div { position: absolute; background-color: ").concat(e.selectionInactiveBackgroundOpaque.css,";}");for(const[n,o]of e.ansi.entries())t+="".concat(this._terminalSelector," .").concat(m).concat(n," { color: ").concat(o.css,"; }").concat(this._terminalSelector," .").concat(m).concat(n,".xterm-dim { color: ").concat(h.color.multiplyOpacity(o,.5).css,"; }").concat(this._terminalSelector," .").concat(v).concat(n," { background-color: ").concat(o.css,"; }");t+="".concat(this._terminalSelector," .").concat(m).concat(a.INVERTED_DEFAULT_COLOR," { color: ").concat(h.color.opaque(e.background).css,"; }").concat(this._terminalSelector," .").concat(m).concat(a.INVERTED_DEFAULT_COLOR,".xterm-dim { color: ").concat(h.color.multiplyOpacity(h.color.opaque(e.background),.5).css,"; }").concat(this._terminalSelector," .").concat(v).concat(a.INVERTED_DEFAULT_COLOR," { background-color: ").concat(e.foreground.css,"; }"),this._themeStyleElement.textContent=t}_setDefaultSpacing(){const e=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing="".concat(e,"px"),this._rowFactory.defaultSpacing=e}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(e,t){for(let r=this._rowElements.length;r<=t;r++){const e=this._document.createElement("div");this._rowContainer.appendChild(e),this._rowElements.push(e)}for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(e,t){this._refreshRowElements(e,t),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(y),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(y),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(e,t,r){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(e,t,r),this.renderRows(0,this._bufferService.rows-1),!e||!t)return;this._selectionRenderModel.update(this._terminal,e,t,r);const i=this._selectionRenderModel.viewportStartRow,s=this._selectionRenderModel.viewportEndRow,n=this._selectionRenderModel.viewportCappedStartRow,o=this._selectionRenderModel.viewportCappedEndRow;if(n>=this._bufferService.rows||o<0)return;const a=this._document.createDocumentFragment();if(r){const r=e[0]>t[0];a.appendChild(this._createSelectionElement(n,r?t[0]:e[0],r?e[0]:t[0],o-n+1))}else{const r=i===n?e[0]:0,l=n===s?t[0]:this._bufferService.cols;a.appendChild(this._createSelectionElement(n,r,l));const c=o-n-1;if(a.appendChild(this._createSelectionElement(n+1,0,this._bufferService.cols,c)),n!==o){const e=s===o?t[0]:this._bufferService.cols;a.appendChild(this._createSelectionElement(o,0,e))}}this._selectionContainer.appendChild(a)}_createSelectionElement(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const s=this._document.createElement("div"),n=t*this.dimensions.css.cell.width;let o=this.dimensions.css.cell.width*(r-t);return n+o>this.dimensions.css.canvas.width&&(o=this.dimensions.css.canvas.width-n),s.style.height=i*this.dimensions.css.cell.height+"px",s.style.top=e*this.dimensions.css.cell.height+"px",s.style.left="".concat(n,"px"),s.style.width="".concat(o,"px"),s}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const e of this._rowElements)e.replaceChildren()}renderRows(e,t){const r=this._bufferService.buffer,i=r.ybase+r.y,s=Math.min(r.x,this._bufferService.cols-1),n=this._optionsService.rawOptions.cursorBlink,o=this._optionsService.rawOptions.cursorStyle,a=this._optionsService.rawOptions.cursorInactiveStyle;for(let l=e;l<=t;l++){const e=l+r.ydisp,t=this._rowElements[l],c=r.lines.get(e);if(!t||!c)break;t.replaceChildren(...this._rowFactory.createRow(c,e,e===i,o,a,s,n,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return".".concat(g).concat(this._terminalClass)}_handleLinkHover(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!0)}_handleLinkLeave(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!1)}_setCellUnderline(e,t,r,i,s,n){r<0&&(e=0),i<0&&(t=0);const o=this._bufferService.rows-1;r=Math.max(Math.min(r,o),0),i=Math.max(Math.min(i,o),0),s=Math.min(s,this._bufferService.cols);const a=this._bufferService.buffer,l=a.ybase+a.y,c=Math.min(a.x,s-1),u=this._optionsService.rawOptions.cursorBlink,h=this._optionsService.rawOptions.cursorStyle,d=this._optionsService.rawOptions.cursorInactiveStyle;for(let f=r;f<=i;++f){const o=f+a.ydisp,p=this._rowElements[f],g=a.lines.get(o);if(!p||!g)break;p.replaceChildren(...this._rowFactory.createRow(g,o,o===l,h,d,c,u,this.dimensions.css.cell.width,this._widthCache,n?f===r?e:0:-1,n?(f===i?t:s)-1:-1))}}};t.DomRenderer=S=i([s(7,p.IInstantiationService),s(8,u.ICharSizeService),s(9,p.IOptionsService),s(10,p.IBufferService),s(11,u.ICoreBrowserService),s(12,u.IThemeService)],S)},3787:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomRendererRowFactory=void 0;const n=r(2223),o=r(643),a=r(511),l=r(2585),c=r(8055),u=r(4725),h=r(4269),d=r(6171),f=r(3734);let p=t.DomRendererRowFactory=class{constructor(e,t,r,i,s,n,o){this._document=e,this._characterJoinerService=t,this._optionsService=r,this._coreBrowserService=i,this._coreService=s,this._decorationService=n,this._themeService=o,this._workCell=new a.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(e,t,r){this._selectionStart=e,this._selectionEnd=t,this._columnSelectMode=r}createRow(e,t,r,i,s,a,l,u,d,p,_){const m=[],v=this._characterJoinerService.getJoinedCharacters(t),y=this._themeService.colors;let w,b=e.getNoBgTrimmedLength();r&&b<a+1&&(b=a+1);let S=0,x="",C=0,k=0,E=0,R=!1,L=0,A=!1,T=0;const j=[],N=-1!==p&&-1!==_;for(let D=0;D<b;D++){e.loadCell(D,this._workCell);let b=this._workCell.getWidth();if(0===b)continue;let P=!1,M=D,O=this._workCell;if(v.length>0&&D===v[0][0]){P=!0;const t=v.shift();O=new h.JoinedCellData(this._workCell,e.translateToString(!0,t[0],t[1]),t[1]-t[0]),M=t[1]-1,b=O.getWidth()}const I=this._isCellInSelection(D,t),B=r&&D===a,H=N&&D>=p&&D<=_;let U=!1;this._decorationService.forEachDecorationAtCell(D,t,void 0,e=>{U=!0});let F=O.getChars()||o.WHITESPACE_CELL_CHAR;if(" "===F&&(O.isUnderline()||O.isOverline())&&(F="\xa0"),T=b*u-d.get(F,O.isBold(),O.isItalic()),w){if(S&&(I&&A||!I&&!A&&O.bg===C)&&(I&&A&&y.selectionForeground||O.fg===k)&&O.extended.ext===E&&H===R&&T===L&&!B&&!P&&!U){O.isInvisible()?x+=o.WHITESPACE_CELL_CHAR:x+=F,S++;continue}S&&(w.textContent=x),w=this._document.createElement("span"),S=0,x=""}else w=this._document.createElement("span");if(C=O.bg,k=O.fg,E=O.extended.ext,R=H,L=T,A=I,P&&a>=D&&a<=M&&(a=D),!this._coreService.isCursorHidden&&B&&this._coreService.isCursorInitialized)if(j.push("xterm-cursor"),this._coreBrowserService.isFocused)l&&j.push("xterm-cursor-blink"),j.push("bar"===i?"xterm-cursor-bar":"underline"===i?"xterm-cursor-underline":"xterm-cursor-block");else if(s)switch(s){case"outline":j.push("xterm-cursor-outline");break;case"block":j.push("xterm-cursor-block");break;case"bar":j.push("xterm-cursor-bar");break;case"underline":j.push("xterm-cursor-underline")}if(O.isBold()&&j.push("xterm-bold"),O.isItalic()&&j.push("xterm-italic"),O.isDim()&&j.push("xterm-dim"),x=O.isInvisible()?o.WHITESPACE_CELL_CHAR:O.getChars()||o.WHITESPACE_CELL_CHAR,O.isUnderline()&&(j.push("xterm-underline-".concat(O.extended.underlineStyle))," "===x&&(x="\xa0"),!O.isUnderlineColorDefault()))if(O.isUnderlineColorRGB())w.style.textDecorationColor="rgb(".concat(f.AttributeData.toColorRGB(O.getUnderlineColor()).join(","),")");else{let e=O.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&O.isBold()&&e<8&&(e+=8),w.style.textDecorationColor=y.ansi[e].css}O.isOverline()&&(j.push("xterm-overline")," "===x&&(x="\xa0")),O.isStrikethrough()&&j.push("xterm-strikethrough"),H&&(w.style.textDecoration="underline");let W=O.getFgColor(),z=O.getFgColorMode(),q=O.getBgColor(),K=O.getBgColorMode();const V=!!O.isInverse();if(V){const e=W;W=q,q=e;const t=z;z=K,K=t}let G,J,$,X=!1;switch(this._decorationService.forEachDecorationAtCell(D,t,void 0,e=>{"top"!==e.options.layer&&X||(e.backgroundColorRGB&&(K=50331648,q=e.backgroundColorRGB.rgba>>8&16777215,G=e.backgroundColorRGB),e.foregroundColorRGB&&(z=50331648,W=e.foregroundColorRGB.rgba>>8&16777215,J=e.foregroundColorRGB),X="top"===e.options.layer)}),!X&&I&&(G=this._coreBrowserService.isFocused?y.selectionBackgroundOpaque:y.selectionInactiveBackgroundOpaque,q=G.rgba>>8&16777215,K=50331648,X=!0,y.selectionForeground&&(z=50331648,W=y.selectionForeground.rgba>>8&16777215,J=y.selectionForeground)),X&&j.push("xterm-decoration-top"),K){case 16777216:case 33554432:$=y.ansi[q],j.push("xterm-bg-".concat(q));break;case 50331648:$=c.channels.toColor(q>>16,q>>8&255,255&q),this._addStyle(w,"background-color:#".concat(g((q>>>0).toString(16),"0",6)));break;default:V?($=y.foreground,j.push("xterm-bg-".concat(n.INVERTED_DEFAULT_COLOR))):$=y.background}switch(G||O.isDim()&&(G=c.color.multiplyOpacity($,.5)),z){case 16777216:case 33554432:O.isBold()&&W<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(W+=8),this._applyMinimumContrast(w,$,y.ansi[W],O,G,void 0)||j.push("xterm-fg-".concat(W));break;case 50331648:const e=c.channels.toColor(W>>16&255,W>>8&255,255&W);this._applyMinimumContrast(w,$,e,O,G,J)||this._addStyle(w,"color:#".concat(g(W.toString(16),"0",6)));break;default:this._applyMinimumContrast(w,$,y.foreground,O,G,J)||V&&j.push("xterm-fg-".concat(n.INVERTED_DEFAULT_COLOR))}j.length&&(w.className=j.join(" "),j.length=0),B||P||U?w.textContent=x:S++,T!==this.defaultSpacing&&(w.style.letterSpacing="".concat(T,"px")),m.push(w),D=M}return w&&S&&(w.textContent=x),m}_applyMinimumContrast(e,t,r,i,s,n){if(1===this._optionsService.rawOptions.minimumContrastRatio||(0,d.treatGlyphAsBackgroundColor)(i.getCode()))return!1;const o=this._getContrastCache(i);let a;if(s||n||(a=o.getColor(t.rgba,r.rgba)),void 0===a){const e=this._optionsService.rawOptions.minimumContrastRatio/(i.isDim()?2:1);a=c.color.ensureContrastRatio(s||t,n||r,e),o.setColor((s||t).rgba,(n||r).rgba,null!==a&&void 0!==a?a:null)}return!!a&&(this._addStyle(e,"color:".concat(a.css)),!0)}_getContrastCache(e){return e.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(e,t){e.setAttribute("style","".concat(e.getAttribute("style")||"").concat(t,";"))}_isCellInSelection(e,t){const r=this._selectionStart,i=this._selectionEnd;return!(!r||!i)&&(this._columnSelectMode?r[0]<=i[0]?e>=r[0]&&t>=r[1]&&e<i[0]&&t<=i[1]:e<r[0]&&t>=r[1]&&e>=i[0]&&t<=i[1]:t>r[1]&&t<i[1]||r[1]===i[1]&&t===r[1]&&e>=r[0]&&e<i[0]||r[1]<i[1]&&t===i[1]&&e<i[0]||r[1]<i[1]&&t===r[1]&&e>=r[0])}};function g(e,t,r){for(;e.length<r;)e=t+e;return e}t.DomRendererRowFactory=p=i([s(1,u.ICharacterJoinerService),s(2,l.IOptionsService),s(3,u.ICoreBrowserService),s(4,l.ICoreService),s(5,l.IDecorationService),s(6,u.IThemeService)],p)},2550:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WidthCache=void 0,t.WidthCache=class{constructor(e,t){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=e.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const r=e.createElement("span");r.classList.add("xterm-char-measure-element");const i=e.createElement("span");i.classList.add("xterm-char-measure-element"),i.style.fontWeight="bold";const s=e.createElement("span");s.classList.add("xterm-char-measure-element"),s.style.fontStyle="italic";const n=e.createElement("span");n.classList.add("xterm-char-measure-element"),n.style.fontWeight="bold",n.style.fontStyle="italic",this._measureElements=[r,i,s,n],this._container.appendChild(r),this._container.appendChild(i),this._container.appendChild(s),this._container.appendChild(n),t.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(e,t,r,i){e===this._font&&t===this._fontSize&&r===this._weight&&i===this._weightBold||(this._font=e,this._fontSize=t,this._weight=r,this._weightBold=i,this._container.style.fontFamily=this._font,this._container.style.fontSize="".concat(this._fontSize,"px"),this._measureElements[0].style.fontWeight="".concat(r),this._measureElements[1].style.fontWeight="".concat(i),this._measureElements[2].style.fontWeight="".concat(r),this._measureElements[3].style.fontWeight="".concat(i),this.clear())}get(e,t,r){let i=0;if(!t&&!r&&1===e.length&&(i=e.charCodeAt(0))<256){if(-9999!==this._flat[i])return this._flat[i];const t=this._measure(e,0);return t>0&&(this._flat[i]=t),t}let s=e;t&&(s+="B"),r&&(s+="I");let n=this._holey.get(s);if(void 0===n){let i=0;t&&(i|=1),r&&(i|=2),n=this._measure(e,i),n>0&&this._holey.set(s,n)}return n}_measure(e,t){const r=this._measureElements[t];return r.textContent=e.repeat(32),r.offsetWidth/32}}},2223:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT_BASELINE=t.DIM_OPACITY=t.INVERTED_DEFAULT_COLOR=void 0;const i=r(6114);t.INVERTED_DEFAULT_COLOR=257,t.DIM_OPACITY=.5,t.TEXT_BASELINE=i.isFirefox||i.isLegacyEdge?"bottom":"ideographic"},6171:(e,t)=>{function r(e){return 57508<=e&&e<=57558}function i(e){return e>=128512&&e<=128591||e>=127744&&e<=128511||e>=128640&&e<=128767||e>=9728&&e<=9983||e>=9984&&e<=10175||e>=65024&&e<=65039||e>=129280&&e<=129535||e>=127462&&e<=127487}Object.defineProperty(t,"__esModule",{value:!0}),t.computeNextVariantOffset=t.createRenderDimensions=t.treatGlyphAsBackgroundColor=t.allowRescaling=t.isEmoji=t.isRestrictedPowerlineGlyph=t.isPowerlineGlyph=t.throwIfFalsy=void 0,t.throwIfFalsy=function(e){if(!e)throw new Error("value must not be falsy");return e},t.isPowerlineGlyph=r,t.isRestrictedPowerlineGlyph=function(e){return 57520<=e&&e<=57527},t.isEmoji=i,t.allowRescaling=function(e,t,s,n){return 1===t&&s>Math.ceil(1.5*n)&&void 0!==e&&e>255&&!i(e)&&!r(e)&&!function(e){return 57344<=e&&e<=63743}(e)},t.treatGlyphAsBackgroundColor=function(e){return r(e)||function(e){return 9472<=e&&e<=9631}(e)},t.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},t.computeNextVariantOffset=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(e-(2*Math.round(t)-r))%(2*Math.round(t))}},6052:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createSelectionRenderModel=void 0;class r{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.selectionStart=t,this.selectionEnd=r,!t||!r||t[0]===r[0]&&t[1]===r[1])return void this.clear();const s=e.buffers.active.ydisp,n=t[1]-s,o=r[1]-s,a=Math.max(n,0),l=Math.min(o,e.rows-1);a>=e.rows||l<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=i,this.viewportStartRow=n,this.viewportEndRow=o,this.viewportCappedStartRow=a,this.viewportCappedEndRow=l,this.startCol=t[0],this.endCol=r[0])}isCellSelected(e,t,r){return!!this.hasSelection&&(r-=e.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?t>=this.startCol&&r>=this.viewportCappedStartRow&&t<this.endCol&&r<=this.viewportCappedEndRow:t<this.startCol&&r>=this.viewportCappedStartRow&&t>=this.endCol&&r<=this.viewportCappedEndRow:r>this.viewportStartRow&&r<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&r===this.viewportStartRow&&t>=this.startCol&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&r===this.viewportEndRow&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&r===this.viewportStartRow&&t>=this.startCol)}}t.createSelectionRenderModel=function(){return new r}},456:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionModel=void 0,t.SelectionModel=class{constructor(e){this._bufferService=e,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?e%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)-1]:[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[e,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[Math.max(e,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const e=this.selectionStart,t=this.selectionEnd;return!(!e||!t)&&(e[1]>t[1]||e[1]===t[1]&&e[0]>t[0])}handleTrim(e){return this.selectionStart&&(this.selectionStart[1]-=e),this.selectionEnd&&(this.selectionEnd[1]-=e),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharSizeService=void 0;const n=r(2585),o=r(8460),a=r(844);let l=t.CharSizeService=class extends a.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(e,t,r){super(),this._optionsService=r,this.width=0,this.height=0,this._onCharSizeChange=this.register(new o.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new h(this._optionsService))}catch(i){this._measureStrategy=this.register(new u(e,t,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const e=this._measureStrategy.measure();e.width===this.width&&e.height===this.height||(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};t.CharSizeService=l=i([s(2,n.IOptionsService)],l);class c extends a.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(e,t){void 0!==e&&e>0&&void 0!==t&&t>0&&(this._result.width=e,this._result.height=t)}}class u extends c{constructor(e,t,r){super(),this._document=e,this._parentElement=t,this._optionsService=r,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize="".concat(this._optionsService.rawOptions.fontSize,"px"),this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class h extends c{constructor(e){super(),this._optionsService=e,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const t=this._ctx.measureText("W");if(!("width"in t&&"fontBoundingBoxAscent"in t&&"fontBoundingBoxDescent"in t))throw new Error("Required font metrics not supported")}measure(){this._ctx.font="".concat(this._optionsService.rawOptions.fontSize,"px ").concat(this._optionsService.rawOptions.fontFamily);const e=this._ctx.measureText("W");return this._validateAndSet(e.width,e.fontBoundingBoxAscent+e.fontBoundingBoxDescent),this._result}}},4269:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterJoinerService=t.JoinedCellData=void 0;const n=r(3734),o=r(643),a=r(511),l=r(2585);class c extends n.AttributeData{constructor(e,t,r){super(),this.content=0,this.combinedData="",this.fg=e.fg,this.bg=e.bg,this.combinedData=t,this._width=r}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}t.JoinedCellData=c;let u=t.CharacterJoinerService=class e{constructor(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new a.CellData}register(e){const t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id}deregister(e){for(let t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1}getJoinedCharacters(e){if(0===this._characterJoiners.length)return[];const t=this._bufferService.buffer.lines.get(e);if(!t||0===t.length)return[];const r=[],i=t.translateToString(!0);let s=0,n=0,a=0,l=t.getFg(0),c=t.getBg(0);for(let u=0;u<t.getTrimmedLength();u++)if(t.loadCell(u,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==l||this._workCell.bg!==c){if(u-s>1){const e=this._getJoinedRanges(i,a,n,t,s);for(let t=0;t<e.length;t++)r.push(e[t])}s=u,a=n,l=this._workCell.fg,c=this._workCell.bg}n+=this._workCell.getChars().length||o.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-s>1){const e=this._getJoinedRanges(i,a,n,t,s);for(let t=0;t<e.length;t++)r.push(e[t])}return r}_getJoinedRanges(t,r,i,s,n){const o=t.substring(r,i);let a=[];try{a=this._characterJoiners[0].handler(o)}catch(e){console.error(e)}for(let l=1;l<this._characterJoiners.length;l++)try{const t=this._characterJoiners[l].handler(o);for(let r=0;r<t.length;r++)e._mergeRanges(a,t[r])}catch(e){console.error(e)}return this._stringRangesToCellRanges(a,s,n),a}_stringRangesToCellRanges(e,t,r){let i=0,s=!1,n=0,a=e[i];if(a){for(let l=r;l<this._bufferService.cols;l++){const r=t.getWidth(l),c=t.getString(l).length||o.WHITESPACE_CELL_CHAR.length;if(0!==r){if(!s&&a[0]<=n&&(a[0]=l,s=!0),a[1]<=n){if(a[1]=l,a=e[++i],!a)break;a[0]<=n?(a[0]=l,s=!0):s=!1}n+=c}}a&&(a[1]=this._bufferService.cols)}}static _mergeRanges(e,t){let r=!1;for(let i=0;i<e.length;i++){const s=e[i];if(r){if(t[1]<=s[0])return e[i-1][1]=t[1],e;if(t[1]<=s[1])return e[i-1][1]=Math.max(t[1],s[1]),e.splice(i,1),e;e.splice(i,1),i--}else{if(t[1]<=s[0])return e.splice(i,0,t),e;if(t[1]<=s[1])return s[0]=Math.min(t[0],s[0]),e;t[0]<s[1]&&(s[0]=Math.min(t[0],s[0]),r=!0)}}return r?e[e.length-1][1]=t[1]:e.push(t),e}};t.CharacterJoinerService=u=i([s(0,l.IBufferService)],u)},5114:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CoreBrowserService=void 0;const i=r(844),s=r(8460),n=r(3656);class o extends i.Disposable{constructor(e,t,r){super(),this._textarea=e,this._window=t,this.mainDocument=r,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new a(this._window),this._onDprChange=this.register(new s.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new s.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(e=>this._screenDprMonitor.setWindow(e))),this.register((0,s.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(e){this._window!==e&&(this._window=e,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return void 0===this._cachedIsFocused&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}t.CoreBrowserService=o;class a extends i.Disposable{constructor(e){super(),this._parentWindow=e,this._windowResizeListener=this.register(new i.MutableDisposable),this._onDprChange=this.register(new s.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,i.toDisposable)(()=>this.clearListener()))}setWindow(e){this._parentWindow=e,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,n.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var e;this._outerListener&&(null!==(e=this._resolutionMediaMatchList)&&void 0!==e&&e.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia("screen and (resolution: ".concat(this._parentWindow.devicePixelRatio,"dppx)")),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LinkProviderService=void 0;const i=r(844);class s extends i.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,i.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(e){return this.linkProviders.push(e),{dispose:()=>{const t=this.linkProviders.indexOf(e);-1!==t&&this.linkProviders.splice(t,1)}}}}t.LinkProviderService=s},8934:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseService=void 0;const n=r(4725),o=r(9806);let a=t.MouseService=class{constructor(e,t){this._renderService=e,this._charSizeService=t}getCoords(e,t,r,i,s){return(0,o.getCoords)(window,e,t,r,i,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,s)}getMouseReportCoords(e,t){const r=(0,o.getCoordsRelativeToElement)(window,e,t);if(this._charSizeService.hasValidSize)return r[0]=Math.min(Math.max(r[0],0),this._renderService.dimensions.css.canvas.width-1),r[1]=Math.min(Math.max(r[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(r[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(r[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(r[0]),y:Math.floor(r[1])}}};t.MouseService=a=i([s(0,n.IRenderService),s(1,n.ICharSizeService)],a)},3230:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RenderService=void 0;const n=r(6193),o=r(4725),a=r(8460),l=r(844),c=r(7226),u=r(2585);let h=t.RenderService=class extends l.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(e,t,r,i,s,o,u,h){super(),this._rowCount=e,this._charSizeService=i,this._renderer=this.register(new l.MutableDisposable),this._pausedResizeTask=new c.DebouncedIdleTask,this._observerDisposable=this.register(new l.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new a.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new a.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new a.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new a.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new n.RenderDebouncer((e,t)=>this._renderRows(e,t),u),this.register(this._renderDebouncer),this.register(u.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(o.onResize(()=>this._fullRefresh())),this.register(o.buffers.onBufferActivate(()=>{var e;return null===(e=this._renderer.value)||void 0===e?void 0:e.clear()})),this.register(r.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(s.onDecorationRegistered(()=>this._fullRefresh())),this.register(s.onDecorationRemoved(()=>this._fullRefresh())),this.register(r.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(o.cols,o.rows),this._fullRefresh()})),this.register(r.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(o.buffer.y,o.buffer.y,!0))),this.register(h.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(u.window,t),this.register(u.onWindowChange(e=>this._registerIntersectionObserver(e,t)))}_registerIntersectionObserver(e,t){if("IntersectionObserver"in e){const r=new e.IntersectionObserver(e=>this._handleIntersectionChange(e[e.length-1]),{threshold:0});r.observe(t),this._observerDisposable.value=(0,l.toDisposable)(()=>r.disconnect())}}_handleIntersectionChange(e){this._isPaused=void 0===e.isIntersecting?0===e.intersectionRatio:!e.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._isPaused?this._needsFullRefresh=!0:(r||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,t,this._rowCount))}_renderRows(e,t){this._renderer.value&&(e=Math.min(e,this._rowCount-1),t=Math.min(t,this._rowCount-1),this._renderer.value.renderRows(e,t),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:t}),this._onRender.fire({start:e,end:t}),this._isNextRenderRedrawOnly=!0)}resize(e,t){this._rowCount=t,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(e){this._renderer.value=e,this._renderer.value&&(this._renderer.value.onRequestRedraw(e=>this.refreshRows(e.start,e.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(e){return this._renderDebouncer.addRefreshCallback(e)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var e,t;this._renderer.value&&(null!==(e=(t=this._renderer.value).clearTextureAtlas)&&void 0!==e&&e.call(t),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(e,t){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var r;return null===(r=this._renderer.value)||void 0===r?void 0:r.handleResize(e,t)}):this._renderer.value.handleResize(e,t),this._fullRefresh())}handleCharSizeChanged(){var e;null===(e=this._renderer.value)||void 0===e||e.handleCharSizeChanged()}handleBlur(){var e;null===(e=this._renderer.value)||void 0===e||e.handleBlur()}handleFocus(){var e;null===(e=this._renderer.value)||void 0===e||e.handleFocus()}handleSelectionChanged(e,t,r){var i;this._selectionState.start=e,this._selectionState.end=t,this._selectionState.columnSelectMode=r,null===(i=this._renderer.value)||void 0===i||i.handleSelectionChanged(e,t,r)}handleCursorMove(){var e;null===(e=this._renderer.value)||void 0===e||e.handleCursorMove()}clear(){var e;null===(e=this._renderer.value)||void 0===e||e.clear()}};t.RenderService=h=i([s(2,u.IOptionsService),s(3,o.ICharSizeService),s(4,u.IDecorationService),s(5,u.IBufferService),s(6,o.ICoreBrowserService),s(7,o.IThemeService)],h)},9312:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionService=void 0;const n=r(9806),o=r(9504),a=r(456),l=r(4725),c=r(8460),u=r(844),h=r(6114),d=r(4841),f=r(511),p=r(2585),g=String.fromCharCode(160),_=new RegExp(g,"g");let m=t.SelectionService=class extends u.Disposable{constructor(e,t,r,i,s,n,o,l,h){super(),this._element=e,this._screenElement=t,this._linkifier=r,this._bufferService=i,this._coreService=s,this._mouseService=n,this._optionsService=o,this._renderService=l,this._coreBrowserService=h,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new f.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new c.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new c.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new c.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new c.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=e=>this._handleMouseMove(e),this._mouseUpListener=e=>this._handleMouseUp(e),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(e=>this._handleTrim(e)),this.register(this._bufferService.buffers.onBufferActivate(e=>this._handleBufferActivate(e))),this.enable(),this._model=new a.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,u.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;return!(!e||!t||e[0]===t[0]&&e[1]===t[1])}get selectionText(){const e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;if(!e||!t)return"";const r=this._bufferService.buffer,i=[];if(3===this._activeSelectionMode){if(e[0]===t[0])return"";const s=e[0]<t[0]?e[0]:t[0],n=e[0]<t[0]?t[0]:e[0];for(let o=e[1];o<=t[1];o++){const e=r.translateBufferLineToString(o,!0,s,n);i.push(e)}}else{const s=e[1]===t[1]?t[0]:void 0;i.push(r.translateBufferLineToString(e[1],!0,e[0],s));for(let n=e[1]+1;n<=t[1]-1;n++){const e=r.lines.get(n),t=r.translateBufferLineToString(n,!0);null!==e&&void 0!==e&&e.isWrapped?i[i.length-1]+=t:i.push(t)}if(e[1]!==t[1]){const e=r.lines.get(t[1]),s=r.translateBufferLineToString(t[1],!0,0,t[0]);e&&e.isWrapped?i[i.length-1]+=s:i.push(s)}}return i.map(e=>e.replace(_," ")).join(h.isWindows?"\r\n":"\n")}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(e){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),h.isLinux&&e&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})}_isClickInSelection(e){const t=this._getMouseBufferCoords(e),r=this._model.finalSelectionStart,i=this._model.finalSelectionEnd;return!!(r&&i&&t)&&this._areCoordsInSelection(t,r,i)}isCellInSelection(e,t){const r=this._model.finalSelectionStart,i=this._model.finalSelectionEnd;return!(!r||!i)&&this._areCoordsInSelection([e,t],r,i)}_areCoordsInSelection(e,t,r){return e[1]>t[1]&&e[1]<r[1]||t[1]===r[1]&&e[1]===t[1]&&e[0]>=t[0]&&e[0]<r[0]||t[1]<r[1]&&e[1]===r[1]&&e[0]<r[0]||t[1]<r[1]&&e[1]===t[1]&&e[0]>=t[0]}_selectWordAtCursor(e,t){var r;const i=null===(r=this._linkifier.currentLink)||void 0===r||null===(r=r.link)||void 0===r?void 0:r.range;if(i)return this._model.selectionStart=[i.start.x-1,i.start.y-1],this._model.selectionStartLength=(0,d.getRangeLength)(i,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const s=this._getMouseBufferCoords(e);return!!s&&(this._selectWordAt(s,t),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(e,t){this._model.clearSelection(),e=Math.max(e,0),t=Math.min(t,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,e],this._model.selectionEnd=[this._bufferService.cols,t],this.refresh(),this._onSelectionChange.fire()}_handleTrim(e){this._model.handleTrim(e)&&this.refresh()}_getMouseBufferCoords(e){const t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(t)return t[0]--,t[1]--,t[1]+=this._bufferService.buffer.ydisp,t}_getMouseEventScrollAmount(e){let t=(0,n.getCoordsRelativeToElement)(this._coreBrowserService.window,e,this._screenElement)[1];const r=this._renderService.dimensions.css.canvas.height;return t>=0&&t<=r?0:(t>r&&(t-=r),t=Math.min(Math.max(t,-50),50),t/=50,t/Math.abs(t)+Math.round(14*t))}shouldForceSelection(e){return h.isMac?e.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:e.shiftKey}handleMouseDown(e){if(this._mouseDownTimeStamp=e.timeStamp,(2!==e.button||!this.hasSelection)&&0===e.button){if(!this._enabled){if(!this.shouldForceSelection(e))return;e.stopPropagation()}e.preventDefault(),this._dragScrollAmount=0,this._enabled&&e.shiftKey?this._handleIncrementalClick(e):1===e.detail?this._handleSingleClick(e):2===e.detail?this._handleDoubleClick(e):3===e.detail&&this._handleTripleClick(e),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(e){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(e))}_handleSingleClick(e){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(e)?3:0,this._model.selectionStart=this._getMouseBufferCoords(e),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const t=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);t&&t.length!==this._model.selectionStart[0]&&0===t.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++}_handleDoubleClick(e){this._selectWordAtCursor(e,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(e){const t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=2,this._selectLineAt(t[1]))}shouldColumnSelect(e){return e.altKey&&!(h.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(e){if(e.stopImmediatePropagation(),!this._model.selectionStart)return;const t=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(e),!this._model.selectionEnd)return void this.refresh(!0);2===this._activeSelectionMode?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(e),3!==this._activeSelectionMode&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const r=this._bufferService.buffer;if(this._model.selectionEnd[1]<r.lines.length){const e=r.lines.get(this._model.selectionEnd[1]);e&&0===e.hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}t&&t[0]===this._model.selectionEnd[0]&&t[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const e=this._bufferService.buffer;this._dragScrollAmount>0?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(e.ydisp+this._bufferService.rows,e.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=e.ydisp),this.refresh()}}_handleMouseUp(e){const t=e.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&t<500&&e.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const t=this._mouseService.getCoords(e,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(t&&void 0!==t[0]&&void 0!==t[1]){const e=(0,o.moveToCellSequence)(t[0]-1,t[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(e,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd,r=!(!e||!t||e[0]===t[0]&&e[1]===t[1]);r?e&&t&&(this._oldSelectionStart&&this._oldSelectionEnd&&e[0]===this._oldSelectionStart[0]&&e[1]===this._oldSelectionStart[1]&&t[0]===this._oldSelectionEnd[0]&&t[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(e,t,r)):this._oldHasSelection&&this._fireOnSelectionChange(e,t,r)}_fireOnSelectionChange(e,t,r){this._oldSelectionStart=e,this._oldSelectionEnd=t,this._oldHasSelection=r,this._onSelectionChange.fire()}_handleBufferActivate(e){this.clearSelection(),this._trimListener.dispose(),this._trimListener=e.activeBuffer.lines.onTrim(e=>this._handleTrim(e))}_convertViewportColToCharacterIndex(e,t){let r=t;for(let i=0;t>=i;i++){const s=e.loadCell(i,this._workCell).getChars().length;0===this._workCell.getWidth()?r--:s>1&&t!==i&&(r+=s-1)}return r}setSelection(e,t,r){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[e,t],this._model.selectionStartLength=r,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(e){this._isClickInSelection(e)||(this._selectWordAtCursor(e,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e[0]>=this._bufferService.cols)return;const s=this._bufferService.buffer,n=s.lines.get(e[1]);if(!n)return;const o=s.translateBufferLineToString(e[1],!1);let a=this._convertViewportColToCharacterIndex(n,e[0]),l=a;const c=e[0]-a;let u=0,h=0,d=0,f=0;if(" "===o.charAt(a)){for(;a>0&&" "===o.charAt(a-1);)a--;for(;l<o.length&&" "===o.charAt(l+1);)l++}else{let t=e[0],r=e[0];0===n.getWidth(t)&&(u++,t--),2===n.getWidth(r)&&(h++,r++);const i=n.getString(r).length;for(i>1&&(f+=i-1,l+=i-1);t>0&&a>0&&!this._isCharWordSeparator(n.loadCell(t-1,this._workCell));){n.loadCell(t-1,this._workCell);const e=this._workCell.getChars().length;0===this._workCell.getWidth()?(u++,t--):e>1&&(d+=e-1,a-=e-1),a--,t--}for(;r<n.length&&l+1<o.length&&!this._isCharWordSeparator(n.loadCell(r+1,this._workCell));){n.loadCell(r+1,this._workCell);const e=this._workCell.getChars().length;2===this._workCell.getWidth()?(h++,r++):e>1&&(f+=e-1,l+=e-1),l++,r++}}l++;let p=a+c-u+d,g=Math.min(this._bufferService.cols,l-a+u+h-d-f);if(t||""!==o.slice(a,l).trim()){if(r&&0===p&&32!==n.getCodePoint(0)){const t=s.lines.get(e[1]-1);if(t&&n.isWrapped&&32!==t.getCodePoint(this._bufferService.cols-1)){const t=this._getWordAt([this._bufferService.cols-1,e[1]-1],!1,!0,!1);if(t){const e=this._bufferService.cols-t.start;p-=e,g+=e}}}if(i&&p+g===this._bufferService.cols&&32!==n.getCodePoint(this._bufferService.cols-1)){const t=s.lines.get(e[1]+1);if(null!==t&&void 0!==t&&t.isWrapped&&32!==t.getCodePoint(0)){const t=this._getWordAt([0,e[1]+1],!1,!1,!0);t&&(g+=t.length)}}return{start:p,length:g}}}_selectWordAt(e,t){const r=this._getWordAt(e,t);if(r){for(;r.start<0;)r.start+=this._bufferService.cols,e[1]--;this._model.selectionStart=[r.start,e[1]],this._model.selectionStartLength=r.length}}_selectToWordAt(e){const t=this._getWordAt(e,!0);if(t){let r=e[1];for(;t.start<0;)t.start+=this._bufferService.cols,r--;if(!this._model.areSelectionValuesReversed())for(;t.start+t.length>this._bufferService.cols;)t.length-=this._bufferService.cols,r++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?t.start:t.start+t.length,r]}}_isCharWordSeparator(e){return 0!==e.getWidth()&&this._optionsService.rawOptions.wordSeparator.indexOf(e.getChars())>=0}_selectLineAt(e){const t=this._bufferService.buffer.getWrappedRangeForLine(e),r={start:{x:0,y:t.first},end:{x:this._bufferService.cols-1,y:t.last}};this._model.selectionStart=[0,t.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,d.getRangeLength)(r,this._bufferService.cols)}};t.SelectionService=m=i([s(3,p.IBufferService),s(4,p.ICoreService),s(5,l.IMouseService),s(6,p.IOptionsService),s(7,l.IRenderService),s(8,l.ICoreBrowserService)],m)},4725:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ILinkProviderService=t.IThemeService=t.ICharacterJoinerService=t.ISelectionService=t.IRenderService=t.IMouseService=t.ICoreBrowserService=t.ICharSizeService=void 0;const i=r(8343);t.ICharSizeService=(0,i.createDecorator)("CharSizeService"),t.ICoreBrowserService=(0,i.createDecorator)("CoreBrowserService"),t.IMouseService=(0,i.createDecorator)("MouseService"),t.IRenderService=(0,i.createDecorator)("RenderService"),t.ISelectionService=(0,i.createDecorator)("SelectionService"),t.ICharacterJoinerService=(0,i.createDecorator)("CharacterJoinerService"),t.IThemeService=(0,i.createDecorator)("ThemeService"),t.ILinkProviderService=(0,i.createDecorator)("LinkProviderService")},6731:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeService=t.DEFAULT_ANSI_COLORS=void 0;const n=r(7239),o=r(8055),a=r(8460),l=r(844),c=r(2585),u=o.css.toColor("#ffffff"),h=o.css.toColor("#000000"),d=o.css.toColor("#ffffff"),f=o.css.toColor("#000000"),p={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};t.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const e=[o.css.toColor("#2e3436"),o.css.toColor("#cc0000"),o.css.toColor("#4e9a06"),o.css.toColor("#c4a000"),o.css.toColor("#3465a4"),o.css.toColor("#75507b"),o.css.toColor("#06989a"),o.css.toColor("#d3d7cf"),o.css.toColor("#555753"),o.css.toColor("#ef2929"),o.css.toColor("#8ae234"),o.css.toColor("#fce94f"),o.css.toColor("#729fcf"),o.css.toColor("#ad7fa8"),o.css.toColor("#34e2e2"),o.css.toColor("#eeeeec")],t=[0,95,135,175,215,255];for(let r=0;r<216;r++){const i=t[r/36%6|0],s=t[r/6%6|0],n=t[r%6];e.push({css:o.channels.toCss(i,s,n),rgba:o.channels.toRgba(i,s,n)})}for(let r=0;r<24;r++){const t=8+10*r;e.push({css:o.channels.toCss(t,t,t),rgba:o.channels.toRgba(t,t,t)})}return e})());let g=t.ThemeService=class extends l.Disposable{get colors(){return this._colors}constructor(e){super(),this._optionsService=e,this._contrastCache=new n.ColorContrastCache,this._halfContrastCache=new n.ColorContrastCache,this._onChangeColors=this.register(new a.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:u,background:h,cursor:d,cursorAccent:f,selectionForeground:void 0,selectionBackgroundTransparent:p,selectionBackgroundOpaque:o.color.blend(h,p),selectionInactiveBackgroundTransparent:p,selectionInactiveBackgroundOpaque:o.color.blend(h,p),ansi:t.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this._colors;if(r.foreground=_(e.foreground,u),r.background=_(e.background,h),r.cursor=_(e.cursor,d),r.cursorAccent=_(e.cursorAccent,f),r.selectionBackgroundTransparent=_(e.selectionBackground,p),r.selectionBackgroundOpaque=o.color.blend(r.background,r.selectionBackgroundTransparent),r.selectionInactiveBackgroundTransparent=_(e.selectionInactiveBackground,r.selectionBackgroundTransparent),r.selectionInactiveBackgroundOpaque=o.color.blend(r.background,r.selectionInactiveBackgroundTransparent),r.selectionForeground=e.selectionForeground?_(e.selectionForeground,o.NULL_COLOR):void 0,r.selectionForeground===o.NULL_COLOR&&(r.selectionForeground=void 0),o.color.isOpaque(r.selectionBackgroundTransparent)){const e=.3;r.selectionBackgroundTransparent=o.color.opacity(r.selectionBackgroundTransparent,e)}if(o.color.isOpaque(r.selectionInactiveBackgroundTransparent)){const e=.3;r.selectionInactiveBackgroundTransparent=o.color.opacity(r.selectionInactiveBackgroundTransparent,e)}if(r.ansi=t.DEFAULT_ANSI_COLORS.slice(),r.ansi[0]=_(e.black,t.DEFAULT_ANSI_COLORS[0]),r.ansi[1]=_(e.red,t.DEFAULT_ANSI_COLORS[1]),r.ansi[2]=_(e.green,t.DEFAULT_ANSI_COLORS[2]),r.ansi[3]=_(e.yellow,t.DEFAULT_ANSI_COLORS[3]),r.ansi[4]=_(e.blue,t.DEFAULT_ANSI_COLORS[4]),r.ansi[5]=_(e.magenta,t.DEFAULT_ANSI_COLORS[5]),r.ansi[6]=_(e.cyan,t.DEFAULT_ANSI_COLORS[6]),r.ansi[7]=_(e.white,t.DEFAULT_ANSI_COLORS[7]),r.ansi[8]=_(e.brightBlack,t.DEFAULT_ANSI_COLORS[8]),r.ansi[9]=_(e.brightRed,t.DEFAULT_ANSI_COLORS[9]),r.ansi[10]=_(e.brightGreen,t.DEFAULT_ANSI_COLORS[10]),r.ansi[11]=_(e.brightYellow,t.DEFAULT_ANSI_COLORS[11]),r.ansi[12]=_(e.brightBlue,t.DEFAULT_ANSI_COLORS[12]),r.ansi[13]=_(e.brightMagenta,t.DEFAULT_ANSI_COLORS[13]),r.ansi[14]=_(e.brightCyan,t.DEFAULT_ANSI_COLORS[14]),r.ansi[15]=_(e.brightWhite,t.DEFAULT_ANSI_COLORS[15]),e.extendedAnsi){const i=Math.min(r.ansi.length-16,e.extendedAnsi.length);for(let s=0;s<i;s++)r.ansi[s+16]=_(e.extendedAnsi[s],t.DEFAULT_ANSI_COLORS[s+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(e){this._restoreColor(e),this._onChangeColors.fire(this.colors)}_restoreColor(e){if(void 0!==e)switch(e){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[e]=this._restoreColors.ansi[e]}else for(let t=0;t<this._restoreColors.ansi.length;++t)this._colors.ansi[t]=this._restoreColors.ansi[t]}modifyColors(e){e(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function _(e,t){if(void 0!==e)try{return o.css.toColor(e)}catch(r){}return t}t.ThemeService=g=i([s(0,c.IOptionsService)],g)},6349:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CircularList=void 0;const i=r(8460),s=r(844);class n extends s.Disposable{constructor(e){super(),this._maxLength=e,this.onDeleteEmitter=this.register(new i.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new i.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new i.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(e){if(this._maxLength===e)return;const t=new Array(e);for(let r=0;r<Math.min(e,this.length);r++)t[r]=this._array[this._getCyclicIndex(r)];this._array=t,this._maxLength=e,this._startIndex=0}get length(){return this._length}set length(e){if(e>this._length)for(let t=this._length;t<e;t++)this._array[t]=void 0;this._length=e}get(e){return this._array[this._getCyclicIndex(e)]}set(e,t){this._array[this._getCyclicIndex(e)]=t}push(e){this._array[this._getCyclicIndex(this._length)]=e,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(e,t){if(t){for(let r=e;r<this._length-t;r++)this._array[this._getCyclicIndex(r)]=this._array[this._getCyclicIndex(r+t)];this._length-=t,this.onDeleteEmitter.fire({index:e,amount:t})}for(let r=this._length-1;r>=e;r--)this._array[this._getCyclicIndex(r+(arguments.length<=2?0:arguments.length-2))]=this._array[this._getCyclicIndex(r)];for(let r=0;r<(arguments.length<=2?0:arguments.length-2);r++)this._array[this._getCyclicIndex(e+r)]=r+2<2||arguments.length<=r+2?void 0:arguments[r+2];if((arguments.length<=2?0:arguments.length-2)&&this.onInsertEmitter.fire({index:e,amount:arguments.length<=2?0:arguments.length-2}),this._length+(arguments.length<=2?0:arguments.length-2)>this._maxLength){const e=this._length+(arguments.length<=2?0:arguments.length-2)-this._maxLength;this._startIndex+=e,this._length=this._maxLength,this.onTrimEmitter.fire(e)}else this._length+=arguments.length<=2?0:arguments.length-2}trimStart(e){e>this._length&&(e=this._length),this._startIndex+=e,this._length-=e,this.onTrimEmitter.fire(e)}shiftElements(e,t,r){if(!(t<=0)){if(e<0||e>=this._length)throw new Error("start argument out of range");if(e+r<0)throw new Error("Cannot shift elements in list beyond index 0");if(r>0){for(let s=t-1;s>=0;s--)this.set(e+s+r,this.get(e+s));const i=e+t+r-this._length;if(i>0)for(this._length+=i;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let i=0;i<t;i++)this.set(e+i+r,this.get(e+i))}}_getCyclicIndex(e){return(this._startIndex+e)%this._maxLength}}t.CircularList=n},1439:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clone=void 0,t.clone=function e(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("object"!=typeof t)return t;const i=Array.isArray(t)?[]:{};for(const s in t)i[s]=r<=1?t[s]:t[s]&&e(t[s],r-1);return i}},8055:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.contrastRatio=t.toPaddedHex=t.rgba=t.rgb=t.css=t.color=t.channels=t.NULL_COLOR=void 0;let r=0,i=0,s=0,n=0;var o,a,l,c,u;function h(e){const t=e.toString(16);return t.length<2?"0"+t:t}function d(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)}t.NULL_COLOR={css:"#00000000",rgba:0},function(e){e.toCss=function(e,t,r,i){return void 0!==i?"#".concat(h(e)).concat(h(t)).concat(h(r)).concat(h(i)):"#".concat(h(e)).concat(h(t)).concat(h(r))},e.toRgba=function(e,t,r){return(e<<24|t<<16|r<<8|(arguments.length>3&&void 0!==arguments[3]?arguments[3]:255))>>>0},e.toColor=function(t,r,i,s){return{css:e.toCss(t,r,i,s),rgba:e.toRgba(t,r,i,s)}}}(o||(t.channels=o={})),function(e){function t(e,t){return n=Math.round(255*t),[r,i,s]=u.toChannels(e.rgba),{css:o.toCss(r,i,s,n),rgba:o.toRgba(r,i,s,n)}}e.blend=function(e,t){if(n=(255&t.rgba)/255,1===n)return{css:t.css,rgba:t.rgba};const a=t.rgba>>24&255,l=t.rgba>>16&255,c=t.rgba>>8&255,u=e.rgba>>24&255,h=e.rgba>>16&255,d=e.rgba>>8&255;return r=u+Math.round((a-u)*n),i=h+Math.round((l-h)*n),s=d+Math.round((c-d)*n),{css:o.toCss(r,i,s),rgba:o.toRgba(r,i,s)}},e.isOpaque=function(e){return 255==(255&e.rgba)},e.ensureContrastRatio=function(e,t,r){const i=u.ensureContrastRatio(e.rgba,t.rgba,r);if(i)return o.toColor(i>>24&255,i>>16&255,i>>8&255)},e.opaque=function(e){const t=(255|e.rgba)>>>0;return[r,i,s]=u.toChannels(t),{css:o.toCss(r,i,s),rgba:t}},e.opacity=t,e.multiplyOpacity=function(e,r){return n=255&e.rgba,t(e,n*r/255)},e.toColorRGB=function(e){return[e.rgba>>24&255,e.rgba>>16&255,e.rgba>>8&255]}}(a||(t.color=a={})),function(e){let t,a;try{const e=document.createElement("canvas");e.width=1,e.height=1;const r=e.getContext("2d",{willReadFrequently:!0});r&&(t=r,t.globalCompositeOperation="copy",a=t.createLinearGradient(0,0,1,1))}catch(l){}e.toColor=function(e){if(e.match(/#[\da-f]{3,8}/i))switch(e.length){case 4:return r=parseInt(e.slice(1,2).repeat(2),16),i=parseInt(e.slice(2,3).repeat(2),16),s=parseInt(e.slice(3,4).repeat(2),16),o.toColor(r,i,s);case 5:return r=parseInt(e.slice(1,2).repeat(2),16),i=parseInt(e.slice(2,3).repeat(2),16),s=parseInt(e.slice(3,4).repeat(2),16),n=parseInt(e.slice(4,5).repeat(2),16),o.toColor(r,i,s,n);case 7:return{css:e,rgba:(parseInt(e.slice(1),16)<<8|255)>>>0};case 9:return{css:e,rgba:parseInt(e.slice(1),16)>>>0}}const l=e.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(l)return r=parseInt(l[1]),i=parseInt(l[2]),s=parseInt(l[3]),n=Math.round(255*(void 0===l[5]?1:parseFloat(l[5]))),o.toColor(r,i,s,n);if(!t||!a)throw new Error("css.toColor: Unsupported css format");if(t.fillStyle=a,t.fillStyle=e,"string"!=typeof t.fillStyle)throw new Error("css.toColor: Unsupported css format");if(t.fillRect(0,0,1,1),[r,i,s,n]=t.getImageData(0,0,1,1).data,255!==n)throw new Error("css.toColor: Unsupported css format");return{rgba:o.toRgba(r,i,s,n),css:e}}}(l||(t.css=l={})),function(e){function t(e,t,r){const i=e/255,s=t/255,n=r/255;return.2126*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))+.7152*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))}e.relativeLuminance=function(e){return t(e>>16&255,e>>8&255,255&e)},e.relativeLuminance2=t}(c||(t.rgb=c={})),function(e){function t(e,t,r){const i=e>>24&255,s=e>>16&255,n=e>>8&255;let o=t>>24&255,a=t>>16&255,l=t>>8&255,u=d(c.relativeLuminance2(o,a,l),c.relativeLuminance2(i,s,n));for(;u<r&&(o>0||a>0||l>0);)o-=Math.max(0,Math.ceil(.1*o)),a-=Math.max(0,Math.ceil(.1*a)),l-=Math.max(0,Math.ceil(.1*l)),u=d(c.relativeLuminance2(o,a,l),c.relativeLuminance2(i,s,n));return(o<<24|a<<16|l<<8|255)>>>0}function a(e,t,r){const i=e>>24&255,s=e>>16&255,n=e>>8&255;let o=t>>24&255,a=t>>16&255,l=t>>8&255,u=d(c.relativeLuminance2(o,a,l),c.relativeLuminance2(i,s,n));for(;u<r&&(o<255||a<255||l<255);)o=Math.min(255,o+Math.ceil(.1*(255-o))),a=Math.min(255,a+Math.ceil(.1*(255-a))),l=Math.min(255,l+Math.ceil(.1*(255-l))),u=d(c.relativeLuminance2(o,a,l),c.relativeLuminance2(i,s,n));return(o<<24|a<<16|l<<8|255)>>>0}e.blend=function(e,t){if(n=(255&t)/255,1===n)return t;const a=t>>24&255,l=t>>16&255,c=t>>8&255,u=e>>24&255,h=e>>16&255,d=e>>8&255;return r=u+Math.round((a-u)*n),i=h+Math.round((l-h)*n),s=d+Math.round((c-d)*n),o.toRgba(r,i,s)},e.ensureContrastRatio=function(e,r,i){const s=c.relativeLuminance(e>>8),n=c.relativeLuminance(r>>8);if(d(s,n)<i){if(n<s){const n=t(e,r,i),o=d(s,c.relativeLuminance(n>>8));if(o<i){const t=a(e,r,i);return o>d(s,c.relativeLuminance(t>>8))?n:t}return n}const o=a(e,r,i),l=d(s,c.relativeLuminance(o>>8));if(l<i){const n=t(e,r,i);return l>d(s,c.relativeLuminance(n>>8))?o:n}return o}},e.reduceLuminance=t,e.increaseLuminance=a,e.toChannels=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]}}(u||(t.rgba=u={})),t.toPaddedHex=h,t.contrastRatio=d},8969:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CoreTerminal=void 0;const i=r(844),s=r(2585),n=r(4348),o=r(7866),a=r(744),l=r(7302),c=r(6975),u=r(8460),h=r(1753),d=r(1480),f=r(7994),p=r(9282),g=r(5435),_=r(5981),m=r(2660);let v=!1;class y extends i.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new u.EventEmitter),this._onScroll.event(e=>{var t;null===(t=this._onScrollApi)||void 0===t||t.fire(e.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(e){for(const t in e)this.optionsService.options[t]=e[t]}constructor(e){super(),this._windowsWrappingHeuristics=this.register(new i.MutableDisposable),this._onBinary=this.register(new u.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new u.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new u.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new u.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new u.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new u.EventEmitter),this._instantiationService=new n.InstantiationService,this.optionsService=this.register(new l.OptionsService(e)),this._instantiationService.setService(s.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(a.BufferService)),this._instantiationService.setService(s.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(o.LogService)),this._instantiationService.setService(s.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(c.CoreService)),this._instantiationService.setService(s.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(h.CoreMouseService)),this._instantiationService.setService(s.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(d.UnicodeService)),this._instantiationService.setService(s.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(f.CharsetService),this._instantiationService.setService(s.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(m.OscLinkService),this._instantiationService.setService(s.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new g.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,u.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,u.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,u.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,u.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(e=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(e=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new _.WriteBuffer((e,t)=>this._inputHandler.parse(e,t))),this.register((0,u.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(e,t){this._writeBuffer.write(e,t)}writeSync(e,t){this._logService.logLevel<=s.LogLevelEnum.WARN&&!v&&(this._logService.warn("writeSync is unreliable and will be removed soon."),v=!0),this._writeBuffer.writeSync(e,t)}input(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.coreService.triggerDataEvent(e,t)}resize(e,t){isNaN(e)||isNaN(t)||(e=Math.max(e,a.MINIMUM_COLS),t=Math.max(t,a.MINIMUM_ROWS),this._bufferService.resize(e,t))}scroll(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._bufferService.scroll(e,t)}scrollLines(e,t,r){this._bufferService.scrollLines(e,t,r)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){const t=e-this._bufferService.buffer.ydisp;0!==t&&this.scrollLines(t)}registerEscHandler(e,t){return this._inputHandler.registerEscHandler(e,t)}registerDcsHandler(e,t){return this._inputHandler.registerDcsHandler(e,t)}registerCsiHandler(e,t){return this._inputHandler.registerCsiHandler(e,t)}registerOscHandler(e,t){return this._inputHandler.registerOscHandler(e,t)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let e=!1;const t=this.optionsService.rawOptions.windowsPty;t&&void 0!==t.buildNumber&&void 0!==t.buildNumber?e=!!("conpty"===t.backend&&t.buildNumber<21376):this.optionsService.rawOptions.windowsMode&&(e=!0),e?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const e=[];e.push(this.onLineFeed(p.updateWindowsModeWrappedState.bind(null,this._bufferService))),e.push(this.registerCsiHandler({final:"H"},()=>((0,p.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,i.toDisposable)(()=>{for(const t of e)t.dispose()})}}}t.CoreTerminal=y},8460:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.runAndSubscribe=t.forwardEvent=t.EventEmitter=void 0,t.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=e=>(this._listeners.push(e),{dispose:()=>{if(!this._disposed)for(let t=0;t<this._listeners.length;t++)if(this._listeners[t]===e)return void this._listeners.splice(t,1)}})),this._event}fire(e,t){const r=[];for(let i=0;i<this._listeners.length;i++)r.push(this._listeners[i]);for(let i=0;i<r.length;i++)r[i].call(void 0,e,t)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},t.forwardEvent=function(e,t){return e(e=>t.fire(e))},t.runAndSubscribe=function(e,t){return t(void 0),e(e=>t(e))}},5435:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InputHandler=t.WindowsOptionsReportType=void 0;const n=r(2584),o=r(7116),a=r(2015),l=r(844),c=r(482),u=r(8437),h=r(8460),d=r(643),f=r(511),p=r(3734),g=r(2585),_=r(1480),m=r(6242),v=r(6351),y=r(5941),w={"(":0,")":1,"*":2,"+":3,"-":1,".":2},b=131072;function S(e,t){if(e>24)return t.setWinLines||!1;switch(e){case 1:return!!t.restoreWin;case 2:return!!t.minimizeWin;case 3:return!!t.setWinPosition;case 4:return!!t.setWinSizePixels;case 5:return!!t.raiseWin;case 6:return!!t.lowerWin;case 7:return!!t.refreshWin;case 8:return!!t.setWinSizeChars;case 9:return!!t.maximizeWin;case 10:return!!t.fullscreenWin;case 11:return!!t.getWinState;case 13:return!!t.getWinPosition;case 14:return!!t.getWinSizePixels;case 15:return!!t.getScreenSizePixels;case 16:return!!t.getCellSizePixels;case 18:return!!t.getWinSizeChars;case 19:return!!t.getScreenSizeChars;case 20:return!!t.getIconTitle;case 21:return!!t.getWinTitle;case 22:return!!t.pushTitle;case 23:return!!t.popTitle;case 24:return!!t.setWinLines}return!1}var x;!function(e){e[e.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",e[e.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"}(x||(t.WindowsOptionsReportType=x={}));let C=0;class k extends l.Disposable{getAttrData(){return this._curAttrData}constructor(e,t,r,i,s,l,d,p){let g=arguments.length>8&&void 0!==arguments[8]?arguments[8]:new a.EscapeSequenceParser;super(),this._bufferService=e,this._charsetService=t,this._coreService=r,this._logService=i,this._optionsService=s,this._oscLinkService=l,this._coreMouseService=d,this._unicodeService=p,this._parser=g,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new c.StringToUtf32,this._utf8Decoder=new c.Utf8ToUtf32,this._workCell=new f.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=u.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=u.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new h.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new h.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new h.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new h.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new h.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new h.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new h.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new h.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new h.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new h.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new h.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new h.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new E(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(e=>this._activeBuffer=e.activeBuffer)),this._parser.setCsiHandlerFallback((e,t)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(e),params:t.toArray()})}),this._parser.setEscHandlerFallback(e=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(e)})}),this._parser.setExecuteHandlerFallback(e=>{this._logService.debug("Unknown EXECUTE code: ",{code:e})}),this._parser.setOscHandlerFallback((e,t,r)=>{this._logService.debug("Unknown OSC code: ",{identifier:e,action:t,data:r})}),this._parser.setDcsHandlerFallback((e,t,r)=>{"HOOK"===t&&(r=r.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(e),action:t,payload:r})}),this._parser.setPrintHandler((e,t,r)=>this.print(e,t,r)),this._parser.registerCsiHandler({final:"@"},e=>this.insertChars(e)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},e=>this.scrollLeft(e)),this._parser.registerCsiHandler({final:"A"},e=>this.cursorUp(e)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},e=>this.scrollRight(e)),this._parser.registerCsiHandler({final:"B"},e=>this.cursorDown(e)),this._parser.registerCsiHandler({final:"C"},e=>this.cursorForward(e)),this._parser.registerCsiHandler({final:"D"},e=>this.cursorBackward(e)),this._parser.registerCsiHandler({final:"E"},e=>this.cursorNextLine(e)),this._parser.registerCsiHandler({final:"F"},e=>this.cursorPrecedingLine(e)),this._parser.registerCsiHandler({final:"G"},e=>this.cursorCharAbsolute(e)),this._parser.registerCsiHandler({final:"H"},e=>this.cursorPosition(e)),this._parser.registerCsiHandler({final:"I"},e=>this.cursorForwardTab(e)),this._parser.registerCsiHandler({final:"J"},e=>this.eraseInDisplay(e,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},e=>this.eraseInDisplay(e,!0)),this._parser.registerCsiHandler({final:"K"},e=>this.eraseInLine(e,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},e=>this.eraseInLine(e,!0)),this._parser.registerCsiHandler({final:"L"},e=>this.insertLines(e)),this._parser.registerCsiHandler({final:"M"},e=>this.deleteLines(e)),this._parser.registerCsiHandler({final:"P"},e=>this.deleteChars(e)),this._parser.registerCsiHandler({final:"S"},e=>this.scrollUp(e)),this._parser.registerCsiHandler({final:"T"},e=>this.scrollDown(e)),this._parser.registerCsiHandler({final:"X"},e=>this.eraseChars(e)),this._parser.registerCsiHandler({final:"Z"},e=>this.cursorBackwardTab(e)),this._parser.registerCsiHandler({final:"`"},e=>this.charPosAbsolute(e)),this._parser.registerCsiHandler({final:"a"},e=>this.hPositionRelative(e)),this._parser.registerCsiHandler({final:"b"},e=>this.repeatPrecedingCharacter(e)),this._parser.registerCsiHandler({final:"c"},e=>this.sendDeviceAttributesPrimary(e)),this._parser.registerCsiHandler({prefix:">",final:"c"},e=>this.sendDeviceAttributesSecondary(e)),this._parser.registerCsiHandler({final:"d"},e=>this.linePosAbsolute(e)),this._parser.registerCsiHandler({final:"e"},e=>this.vPositionRelative(e)),this._parser.registerCsiHandler({final:"f"},e=>this.hVPosition(e)),this._parser.registerCsiHandler({final:"g"},e=>this.tabClear(e)),this._parser.registerCsiHandler({final:"h"},e=>this.setMode(e)),this._parser.registerCsiHandler({prefix:"?",final:"h"},e=>this.setModePrivate(e)),this._parser.registerCsiHandler({final:"l"},e=>this.resetMode(e)),this._parser.registerCsiHandler({prefix:"?",final:"l"},e=>this.resetModePrivate(e)),this._parser.registerCsiHandler({final:"m"},e=>this.charAttributes(e)),this._parser.registerCsiHandler({final:"n"},e=>this.deviceStatus(e)),this._parser.registerCsiHandler({prefix:"?",final:"n"},e=>this.deviceStatusPrivate(e)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},e=>this.softReset(e)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},e=>this.setCursorStyle(e)),this._parser.registerCsiHandler({final:"r"},e=>this.setScrollRegion(e)),this._parser.registerCsiHandler({final:"s"},e=>this.saveCursor(e)),this._parser.registerCsiHandler({final:"t"},e=>this.windowOptions(e)),this._parser.registerCsiHandler({final:"u"},e=>this.restoreCursor(e)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},e=>this.insertColumns(e)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},e=>this.deleteColumns(e)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},e=>this.selectProtected(e)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},e=>this.requestMode(e,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},e=>this.requestMode(e,!1)),this._parser.setExecuteHandler(n.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(n.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(n.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(n.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(n.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(n.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(n.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(n.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(n.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(n.C1.IND,()=>this.index()),this._parser.setExecuteHandler(n.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(n.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new m.OscHandler(e=>(this.setTitle(e),this.setIconName(e),!0))),this._parser.registerOscHandler(1,new m.OscHandler(e=>this.setIconName(e))),this._parser.registerOscHandler(2,new m.OscHandler(e=>this.setTitle(e))),this._parser.registerOscHandler(4,new m.OscHandler(e=>this.setOrReportIndexedColor(e))),this._parser.registerOscHandler(8,new m.OscHandler(e=>this.setHyperlink(e))),this._parser.registerOscHandler(10,new m.OscHandler(e=>this.setOrReportFgColor(e))),this._parser.registerOscHandler(11,new m.OscHandler(e=>this.setOrReportBgColor(e))),this._parser.registerOscHandler(12,new m.OscHandler(e=>this.setOrReportCursorColor(e))),this._parser.registerOscHandler(104,new m.OscHandler(e=>this.restoreIndexedColor(e))),this._parser.registerOscHandler(110,new m.OscHandler(e=>this.restoreFgColor(e))),this._parser.registerOscHandler(111,new m.OscHandler(e=>this.restoreBgColor(e))),this._parser.registerOscHandler(112,new m.OscHandler(e=>this.restoreCursorColor(e))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const n in o.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:n},()=>this.selectCharset("("+n)),this._parser.registerEscHandler({intermediates:")",final:n},()=>this.selectCharset(")"+n)),this._parser.registerEscHandler({intermediates:"*",final:n},()=>this.selectCharset("*"+n)),this._parser.registerEscHandler({intermediates:"+",final:n},()=>this.selectCharset("+"+n)),this._parser.registerEscHandler({intermediates:"-",final:n},()=>this.selectCharset("-"+n)),this._parser.registerEscHandler({intermediates:".",final:n},()=>this.selectCharset("."+n)),this._parser.registerEscHandler({intermediates:"/",final:n},()=>this.selectCharset("/"+n));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(e=>(this._logService.error("Parsing error: ",e),e)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new v.DcsHandler((e,t)=>this.requestStatusString(e,t)))}_preserveStack(e,t,r,i){this._parseStack.paused=!0,this._parseStack.cursorStartX=e,this._parseStack.cursorStartY=t,this._parseStack.decodedLength=r,this._parseStack.position=i}_logSlowResolvingAsync(e){this._logService.logLevel<=g.LogLevelEnum.WARN&&Promise.race([e,new Promise((e,t)=>setTimeout(()=>t("#SLOW_TIMEOUT"),5e3))]).catch(e=>{if("#SLOW_TIMEOUT"!==e)throw e;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(e,t){let r,i=this._activeBuffer.x,s=this._activeBuffer.y,n=0;const o=this._parseStack.paused;if(o){if(r=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,t))return this._logSlowResolvingAsync(r),r;i=this._parseStack.cursorStartX,s=this._parseStack.cursorStartY,this._parseStack.paused=!1,e.length>b&&(n=this._parseStack.position+b)}if(this._logService.logLevel<=g.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+' "'.concat("string"==typeof e?e:Array.prototype.map.call(e,e=>String.fromCharCode(e)).join(""),'"'),"string"==typeof e?e.split("").map(e=>e.charCodeAt(0)):e),this._parseBuffer.length<e.length&&this._parseBuffer.length<b&&(this._parseBuffer=new Uint32Array(Math.min(e.length,b))),o||this._dirtyRowTracker.clearRange(),e.length>b)for(let c=n;c<e.length;c+=b){const t=c+b<e.length?c+b:e.length,n="string"==typeof e?this._stringDecoder.decode(e.substring(c,t),this._parseBuffer):this._utf8Decoder.decode(e.subarray(c,t),this._parseBuffer);if(r=this._parser.parse(this._parseBuffer,n))return this._preserveStack(i,s,n,c),this._logSlowResolvingAsync(r),r}else if(!o){const t="string"==typeof e?this._stringDecoder.decode(e,this._parseBuffer):this._utf8Decoder.decode(e,this._parseBuffer);if(r=this._parser.parse(this._parseBuffer,t))return this._preserveStack(i,s,t,0),this._logSlowResolvingAsync(r),r}this._activeBuffer.x===i&&this._activeBuffer.y===s||this._onCursorMove.fire();const a=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),l=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);l<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(l,this._bufferService.rows-1),Math.min(a,this._bufferService.rows-1))}print(e,t,r){let i,s;const n=this._charsetService.charset,o=this._optionsService.rawOptions.screenReaderMode,a=this._bufferService.cols,l=this._coreService.decPrivateModes.wraparound,h=this._coreService.modes.insertMode,f=this._curAttrData;let p=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&r-t>0&&2===p.getWidth(this._activeBuffer.x-1)&&p.setCellFromCodepoint(this._activeBuffer.x-1,0,1,f);let g=this._parser.precedingJoinState;for(let m=t;m<r;++m){if(i=e[m],i<127&&n){const e=n[String.fromCharCode(i)];e&&(i=e.charCodeAt(0))}const t=this._unicodeService.charProperties(i,g);s=_.UnicodeService.extractWidth(t);const r=_.UnicodeService.extractShouldJoin(t),v=r?_.UnicodeService.extractWidth(g):0;if(g=t,o&&this._onA11yChar.fire((0,c.stringFromCodePoint)(i)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+s-v>a)if(l){const e=p;let t=this._activeBuffer.x-v;for(this._activeBuffer.x=v,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),p=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),v>0&&p instanceof u.BufferLine&&p.copyCellsFrom(e,t,0,v,!1);t<a;)e.setCellFromCodepoint(t++,0,1,f)}else if(this._activeBuffer.x=a-1,2===s)continue;if(r&&this._activeBuffer.x){const e=p.getWidth(this._activeBuffer.x-1)?1:2;p.addCodepointToCell(this._activeBuffer.x-e,i,s);for(let t=s-v;--t>=0;)p.setCellFromCodepoint(this._activeBuffer.x++,0,0,f)}else if(h&&(p.insertCells(this._activeBuffer.x,s-v,this._activeBuffer.getNullCell(f)),2===p.getWidth(a-1)&&p.setCellFromCodepoint(a-1,d.NULL_CELL_CODE,d.NULL_CELL_WIDTH,f)),p.setCellFromCodepoint(this._activeBuffer.x++,i,s,f),s>0)for(;--s;)p.setCellFromCodepoint(this._activeBuffer.x++,0,0,f)}this._parser.precedingJoinState=g,this._activeBuffer.x<a&&r-t>0&&0===p.getWidth(this._activeBuffer.x)&&!p.hasContent(this._activeBuffer.x)&&p.setCellFromCodepoint(this._activeBuffer.x,0,1,f),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(e,t){return"t"!==e.final||e.prefix||e.intermediates?this._parser.registerCsiHandler(e,t):this._parser.registerCsiHandler(e,e=>!S(e.params[0],this._optionsService.rawOptions.windowOptions)||t(e))}registerDcsHandler(e,t){return this._parser.registerDcsHandler(e,new v.DcsHandler(t))}registerEscHandler(e,t){return this._parser.registerEscHandler(e,t)}registerOscHandler(e,t){return this._parser.registerOscHandler(e,new m.OscHandler(t))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var e;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(0===this._activeBuffer.x&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&null!==(e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))&&void 0!==e&&e.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);e.hasWidth(this._activeBuffer.x)&&!e.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const e=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-e),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._bufferService.cols-1;this._activeBuffer.x=Math.min(e,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(e,t){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=e,this._activeBuffer.y=this._activeBuffer.scrollTop+t):(this._activeBuffer.x=e,this._activeBuffer.y=t),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(e,t){this._restrictCursor(),this._setCursor(this._activeBuffer.x+e,this._activeBuffer.y+t)}cursorUp(e){const t=this._activeBuffer.y-this._activeBuffer.scrollTop;return t>=0?this._moveCursor(0,-Math.min(t,e.params[0]||1)):this._moveCursor(0,-(e.params[0]||1)),!0}cursorDown(e){const t=this._activeBuffer.scrollBottom-this._activeBuffer.y;return t>=0?this._moveCursor(0,Math.min(t,e.params[0]||1)):this._moveCursor(0,e.params[0]||1),!0}cursorForward(e){return this._moveCursor(e.params[0]||1,0),!0}cursorBackward(e){return this._moveCursor(-(e.params[0]||1),0),!0}cursorNextLine(e){return this.cursorDown(e),this._activeBuffer.x=0,!0}cursorPrecedingLine(e){return this.cursorUp(e),this._activeBuffer.x=0,!0}cursorCharAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(e){return this._setCursor(e.length>=2?(e.params[1]||1)-1:0,(e.params[0]||1)-1),!0}charPosAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(e){return this._moveCursor(e.params[0]||1,0),!0}linePosAbsolute(e){return this._setCursor(this._activeBuffer.x,(e.params[0]||1)-1),!0}vPositionRelative(e){return this._moveCursor(0,e.params[0]||1),!0}hVPosition(e){return this.cursorPosition(e),!0}tabClear(e){const t=e.params[0];return 0===t?delete this._activeBuffer.tabs[this._activeBuffer.x]:3===t&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(e){const t=e.params[0];return 1===t&&(this._curAttrData.bg|=536870912),2!==t&&0!==t||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const n=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);n.replaceCells(t,r,this._activeBuffer.getNullCell(this._eraseAttrData()),s),i&&(n.isWrapped=!1)}_resetBufferLine(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);r&&(r.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),t),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+e),r.isWrapped=!1)}eraseInDisplay(e){let t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:for(t=this._activeBuffer.y,this._dirtyRowTracker.markDirty(t),this._eraseInBufferLine(t++,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x,r);t<this._bufferService.rows;t++)this._resetBufferLine(t,r);this._dirtyRowTracker.markDirty(t);break;case 1:for(t=this._activeBuffer.y,this._dirtyRowTracker.markDirty(t),this._eraseInBufferLine(t,0,this._activeBuffer.x+1,!0,r),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(t+1).isWrapped=!1);t--;)this._resetBufferLine(t,r);this._dirtyRowTracker.markDirty(0);break;case 2:for(t=this._bufferService.rows,this._dirtyRowTracker.markDirty(t-1);t--;)this._resetBufferLine(t,r);this._dirtyRowTracker.markDirty(0);break;case 3:const e=this._activeBuffer.lines.length-this._bufferService.rows;e>0&&(this._activeBuffer.lines.trimStart(e),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-e,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-e,0),this._onScroll.fire(0))}return!0}eraseInLine(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x,t);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,t);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,t)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const r=this._activeBuffer.ybase+this._activeBuffer.y,i=this._bufferService.rows-1-this._activeBuffer.scrollBottom,s=this._bufferService.rows-1+this._activeBuffer.ybase-i+1;for(;t--;)this._activeBuffer.lines.splice(s-1,1),this._activeBuffer.lines.splice(r,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const r=this._activeBuffer.ybase+this._activeBuffer.y;let i;for(i=this._bufferService.rows-1-this._activeBuffer.scrollBottom,i=this._bufferService.rows-1+this._activeBuffer.ybase-i;t--;)this._activeBuffer.lines.splice(r,1),this._activeBuffer.lines.splice(i,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(e){this._restrictCursor();const t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.insertCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(e){this._restrictCursor();const t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.deleteCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(u.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){const e=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);e.deleteCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData())),e.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){const e=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);e.insertCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData())),e.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){const e=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);e.insertCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData())),e.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){const e=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);e.deleteCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData())),e.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(e){this._restrictCursor();const t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(e.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(e){const t=this._parser.precedingJoinState;if(!t)return!0;const r=e.params[0]||1,i=_.UnicodeService.extractWidth(t),s=this._activeBuffer.x-i,n=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(s),o=new Uint32Array(n.length*r);let a=0;for(let c=0;c<n.length;){const e=n.codePointAt(c)||0;o[a++]=e,c+=e>65535?2:1}let l=a;for(let c=1;c<r;++c)o.copyWithin(l,0,a),l+=a;return this.print(o,0,l),!0}sendDeviceAttributesPrimary(e){return e.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(n.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(n.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(e){return e.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(n.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(n.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(e.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(n.C0.ESC+"[>83;40003;0c")),!0}_is(e){return 0===(this._optionsService.rawOptions.termName+"").indexOf(e)}setMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,o.DEFAULT_CHARSET),this._charsetService.setgCharset(1,o.DEFAULT_CHARSET),this._charsetService.setgCharset(2,o.DEFAULT_CHARSET),this._charsetService.setgCharset(3,o.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),1049===e.params[t]&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(e,t){const r=this._coreService.decPrivateModes,{activeProtocol:i,activeEncoding:s}=this._coreMouseService,o=this._coreService,{buffers:a,cols:l}=this._bufferService,{active:c,alt:u}=a,h=this._optionsService.rawOptions,d=e=>e?1:2,f=e.params[0];return p=f,g=t?2===f?4:4===f?d(o.modes.insertMode):12===f?3:20===f?d(h.convertEol):0:1===f?d(r.applicationCursorKeys):3===f?h.windowOptions.setWinLines?80===l?2:132===l?1:0:0:6===f?d(r.origin):7===f?d(r.wraparound):8===f?3:9===f?d("X10"===i):12===f?d(h.cursorBlink):25===f?d(!o.isCursorHidden):45===f?d(r.reverseWraparound):66===f?d(r.applicationKeypad):67===f?4:1e3===f?d("VT200"===i):1002===f?d("DRAG"===i):1003===f?d("ANY"===i):1004===f?d(r.sendFocus):1005===f?4:1006===f?d("SGR"===s):1015===f?4:1016===f?d("SGR_PIXELS"===s):1048===f?1:47===f||1047===f||1049===f?d(c===u):2004===f?d(r.bracketedPasteMode):0,o.triggerDataEvent("".concat(n.C0.ESC,"[").concat(t?"":"?").concat(p,";").concat(g,"$y")),!0;var p,g}_updateAttrColor(e,t,r,i,s){return 2===t?(e|=50331648,e&=-16777216,e|=p.AttributeData.fromColorRGB([r,i,s])):5===t&&(e&=-50331904,e|=33554432|255&r),e}_extractColor(e,t,r){const i=[0,0,-1,0,0,0];let s=0,n=0;do{if(i[n+s]=e.params[t+n],e.hasSubParams(t+n)){const r=e.getSubParams(t+n);let o=0;do{5===i[1]&&(s=1),i[n+o+1+s]=r[o]}while(++o<r.length&&o+n+1+s<i.length);break}if(5===i[1]&&n+s>=2||2===i[1]&&n+s>=5)break;i[1]&&(s=1)}while(++n+t<e.length&&n+s<i.length);for(let o=2;o<i.length;++o)-1===i[o]&&(i[o]=0);switch(i[0]){case 38:r.fg=this._updateAttrColor(r.fg,i[1],i[3],i[4],i[5]);break;case 48:r.bg=this._updateAttrColor(r.bg,i[1],i[3],i[4],i[5]);break;case 58:r.extended=r.extended.clone(),r.extended.underlineColor=this._updateAttrColor(r.extended.underlineColor,i[1],i[3],i[4],i[5])}return n}_processUnderline(e,t){t.extended=t.extended.clone(),(!~e||e>5)&&(e=1),t.extended.underlineStyle=e,t.fg|=268435456,0===e&&(t.fg&=-268435457),t.updateExtended()}_processSGR0(e){e.fg=u.DEFAULT_ATTR_DATA.fg,e.bg=u.DEFAULT_ATTR_DATA.bg,e.extended=e.extended.clone(),e.extended.underlineStyle=0,e.extended.underlineColor&=-67108864,e.updateExtended()}charAttributes(e){if(1===e.length&&0===e.params[0])return this._processSGR0(this._curAttrData),!0;const t=e.length;let r;const i=this._curAttrData;for(let s=0;s<t;s++)r=e.params[s],r>=30&&r<=37?(i.fg&=-50331904,i.fg|=16777216|r-30):r>=40&&r<=47?(i.bg&=-50331904,i.bg|=16777216|r-40):r>=90&&r<=97?(i.fg&=-50331904,i.fg|=16777224|r-90):r>=100&&r<=107?(i.bg&=-50331904,i.bg|=16777224|r-100):0===r?this._processSGR0(i):1===r?i.fg|=134217728:3===r?i.bg|=67108864:4===r?(i.fg|=268435456,this._processUnderline(e.hasSubParams(s)?e.getSubParams(s)[0]:1,i)):5===r?i.fg|=536870912:7===r?i.fg|=67108864:8===r?i.fg|=1073741824:9===r?i.fg|=2147483648:2===r?i.bg|=134217728:21===r?this._processUnderline(2,i):22===r?(i.fg&=-134217729,i.bg&=-134217729):23===r?i.bg&=-67108865:24===r?(i.fg&=-268435457,this._processUnderline(0,i)):25===r?i.fg&=-536870913:27===r?i.fg&=-67108865:28===r?i.fg&=-1073741825:29===r?i.fg&=2147483647:39===r?(i.fg&=-67108864,i.fg|=16777215&u.DEFAULT_ATTR_DATA.fg):49===r?(i.bg&=-67108864,i.bg|=16777215&u.DEFAULT_ATTR_DATA.bg):38===r||48===r||58===r?s+=this._extractColor(e,s,i):53===r?i.bg|=1073741824:55===r?i.bg&=-1073741825:59===r?(i.extended=i.extended.clone(),i.extended.underlineColor=-1,i.updateExtended()):100===r?(i.fg&=-67108864,i.fg|=16777215&u.DEFAULT_ATTR_DATA.fg,i.bg&=-67108864,i.bg|=16777215&u.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",r);return!0}deviceStatus(e){switch(e.params[0]){case 5:this._coreService.triggerDataEvent("".concat(n.C0.ESC,"[0n"));break;case 6:const e=this._activeBuffer.y+1,t=this._activeBuffer.x+1;this._coreService.triggerDataEvent("".concat(n.C0.ESC,"[").concat(e,";").concat(t,"R"))}return!0}deviceStatusPrivate(e){if(6===e.params[0]){const e=this._activeBuffer.y+1,t=this._activeBuffer.x+1;this._coreService.triggerDataEvent("".concat(n.C0.ESC,"[?").concat(e,";").concat(t,"R"))}return!0}softReset(e){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=u.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(e){const t=e.params[0]||1;switch(t){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const r=t%2==1;return this._optionsService.options.cursorBlink=r,!0}setScrollRegion(e){const t=e.params[0]||1;let r;return(e.length<2||(r=e.params[1])>this._bufferService.rows||0===r)&&(r=this._bufferService.rows),r>t&&(this._activeBuffer.scrollTop=t-1,this._activeBuffer.scrollBottom=r-1,this._setCursor(0,0)),!0}windowOptions(e){if(!S(e.params[0],this._optionsService.rawOptions.windowOptions))return!0;const t=e.length>1?e.params[1]:0;switch(e.params[0]){case 14:2!==t&&this._onRequestWindowsOptionsReport.fire(x.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(x.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent("".concat(n.C0.ESC,"[8;").concat(this._bufferService.rows,";").concat(this._bufferService.cols,"t"));break;case 22:0!==t&&2!==t||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),0!==t&&1!==t||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:0!==t&&2!==t||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),0!==t&&1!==t||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(e){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(e){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(e){return this._windowTitle=e,this._onTitleChange.fire(e),!0}setIconName(e){return this._iconName=e,!0}setOrReportIndexedColor(e){const t=[],r=e.split(";");for(;r.length>1;){const e=r.shift(),i=r.shift();if(/^\d+$/.exec(e)){const r=parseInt(e);if(R(r))if("?"===i)t.push({type:0,index:r});else{const e=(0,y.parseColor)(i);e&&t.push({type:1,index:r,color:e})}}}return t.length&&this._onColor.fire(t),!0}setHyperlink(e){const t=e.split(";");return!(t.length<2)&&(t[1]?this._createHyperlink(t[0],t[1]):!t[0]&&this._finishHyperlink())}_createHyperlink(e,t){this._getCurrentLinkId()&&this._finishHyperlink();const r=e.split(":");let i;const s=r.findIndex(e=>e.startsWith("id="));return-1!==s&&(i=r[s].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:i,uri:t}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(e,t){const r=e.split(";");for(let i=0;i<r.length&&!(t>=this._specialColors.length);++i,++t)if("?"===r[i])this._onColor.fire([{type:0,index:this._specialColors[t]}]);else{const e=(0,y.parseColor)(r[i]);e&&this._onColor.fire([{type:1,index:this._specialColors[t],color:e}])}return!0}setOrReportFgColor(e){return this._setOrReportSpecialColor(e,0)}setOrReportBgColor(e){return this._setOrReportSpecialColor(e,1)}setOrReportCursorColor(e){return this._setOrReportSpecialColor(e,2)}restoreIndexedColor(e){if(!e)return this._onColor.fire([{type:2}]),!0;const t=[],r=e.split(";");for(let i=0;i<r.length;++i)if(/^\d+$/.exec(r[i])){const e=parseInt(r[i]);R(e)&&t.push({type:2,index:e})}return t.length&&this._onColor.fire(t),!0}restoreFgColor(e){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(e){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(e){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,o.DEFAULT_CHARSET),!0}selectCharset(e){return 2!==e.length?(this.selectDefaultCharset(),!0):("/"===e[0]||this._charsetService.setgCharset(w[e[0]],o.CHARSETS[e[1]]||o.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const e=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,e,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=u.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=u.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(e){return this._charsetService.setgLevel(e),!0}screenAlignmentPattern(){const e=new f.CellData;e.content=1<<22|"E".charCodeAt(0),e.fg=this._curAttrData.fg,e.bg=this._curAttrData.bg,this._setCursor(0,0);for(let t=0;t<this._bufferService.rows;++t){const r=this._activeBuffer.ybase+this._activeBuffer.y+t,i=this._activeBuffer.lines.get(r);i&&(i.fill(e),i.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(e,t){const r=this._bufferService.buffer,i=this._optionsService.rawOptions;return(e=>(this._coreService.triggerDataEvent("".concat(n.C0.ESC).concat(e).concat(n.C0.ESC,"\\")),!0))('"q'===e?"P1$r".concat(this._curAttrData.isProtected()?1:0,'"q'):'"p'===e?'P1$r61;1"p':"r"===e?"P1$r".concat(r.scrollTop+1,";").concat(r.scrollBottom+1,"r"):"m"===e?"P1$r0m":" q"===e?"P1$r".concat({block:2,underline:4,bar:6}[i.cursorStyle]-(i.cursorBlink?1:0)," q"):"P0$r")}markRangeDirty(e,t){this._dirtyRowTracker.markRangeDirty(e,t)}}t.InputHandler=k;let E=class{constructor(e){this._bufferService=e,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(e){e<this.start?this.start=e:e>this.end&&(this.end=e)}markRangeDirty(e,t){e>t&&(C=e,e=t,t=C),e<this.start&&(this.start=e),t>this.end&&(this.end=t)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function R(e){return 0<=e&&e<256}E=i([s(0,g.IBufferService)],E)},844:(e,t)=>{function r(e){for(const t of e)t.dispose();e.length=0}Object.defineProperty(t,"__esModule",{value:!0}),t.getDisposeArrayDisposable=t.disposeArray=t.toDisposable=t.MutableDisposable=t.Disposable=void 0,t.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const e of this._disposables)e.dispose();this._disposables.length=0}register(e){return this._disposables.push(e),e}unregister(e){const t=this._disposables.indexOf(e);-1!==t&&this._disposables.splice(t,1)}},t.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||(null!==(t=this._value)&&void 0!==t&&t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,null!==(e=this._value)&&void 0!==e&&e.dispose(),this._value=void 0}},t.toDisposable=function(e){return{dispose:e}},t.disposeArray=r,t.getDisposeArrayDisposable=function(e){return{dispose:()=>r(e)}}},1505:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FourKeyMap=t.TwoKeyMap=void 0;class r{constructor(){this._data={}}set(e,t,r){this._data[e]||(this._data[e]={}),this._data[e][t]=r}get(e,t){return this._data[e]?this._data[e][t]:void 0}clear(){this._data={}}}t.TwoKeyMap=r,t.FourKeyMap=class{constructor(){this._data=new r}set(e,t,i,s,n){this._data.get(e,t)||this._data.set(e,t,new r),this._data.get(e,t).set(i,s,n)}get(e,t,r,i){var s;return null===(s=this._data.get(e,t))||void 0===s?void 0:s.get(r,i)}clear(){this._data.clear()}}},6114:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isChromeOS=t.isLinux=t.isWindows=t.isIphone=t.isIpad=t.isMac=t.getSafariVersion=t.isSafari=t.isLegacyEdge=t.isFirefox=t.isNode=void 0,t.isNode="undefined"!=typeof process&&"title"in process;const r=t.isNode?"node":navigator.userAgent,i=t.isNode?"node":navigator.platform;t.isFirefox=r.includes("Firefox"),t.isLegacyEdge=r.includes("Edge"),t.isSafari=/^((?!chrome|android).)*safari/i.test(r),t.getSafariVersion=function(){if(!t.isSafari)return 0;const e=r.match(/Version\/(\d+)/);return null===e||e.length<2?0:parseInt(e[1])},t.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(i),t.isIpad="iPad"===i,t.isIphone="iPhone"===i,t.isWindows=["Windows","Win16","Win32","WinCE"].includes(i),t.isLinux=i.indexOf("Linux")>=0,t.isChromeOS=/\bCrOS\b/.test(r)},6106:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SortedList=void 0;let r=0;t.SortedList=class{constructor(e){this._getKey=e,this._array=[]}clear(){this._array.length=0}insert(e){0!==this._array.length?(r=this._search(this._getKey(e)),this._array.splice(r,0,e)):this._array.push(e)}delete(e){if(0===this._array.length)return!1;const t=this._getKey(e);if(void 0===t)return!1;if(r=this._search(t),-1===r)return!1;if(this._getKey(this._array[r])!==t)return!1;do{if(this._array[r]===e)return this._array.splice(r,1),!0}while(++r<this._array.length&&this._getKey(this._array[r])===t);return!1}*getKeyIterator(e){if(0!==this._array.length&&(r=this._search(e),!(r<0||r>=this._array.length)&&this._getKey(this._array[r])===e))do{yield this._array[r]}while(++r<this._array.length&&this._getKey(this._array[r])===e)}forEachByKey(e,t){if(0!==this._array.length&&(r=this._search(e),!(r<0||r>=this._array.length)&&this._getKey(this._array[r])===e))do{t(this._array[r])}while(++r<this._array.length&&this._getKey(this._array[r])===e)}values(){return[...this._array].values()}_search(e){let t=0,r=this._array.length-1;for(;r>=t;){let i=t+r>>1;const s=this._getKey(this._array[i]);if(s>e)r=i-1;else{if(!(s<e)){for(;i>0&&this._getKey(this._array[i-1])===e;)i--;return i}t=i+1}}return t}}},7226:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DebouncedIdleTask=t.IdleTaskQueue=t.PriorityTaskQueue=void 0;const i=r(6114);class s{constructor(){this._tasks=[],this._i=0}enqueue(e){this._tasks.push(e),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(e){this._idleCallback=void 0;let t=0,r=0,i=e.timeRemaining(),s=0;for(;this._i<this._tasks.length;){if(t=Date.now(),this._tasks[this._i]()||this._i++,t=Math.max(1,Date.now()-t),r=Math.max(t,r),s=e.timeRemaining(),1.5*r>s)return i-t<-20&&console.warn("task queue exceeded allotted deadline by ".concat(Math.abs(Math.round(i-t)),"ms")),void this._start();i=s}this.clear()}}class n extends s{_requestCallback(e){return setTimeout(()=>e(this._createDeadline(16)))}_cancelCallback(e){clearTimeout(e)}_createDeadline(e){const t=Date.now()+e;return{timeRemaining:()=>Math.max(0,t-Date.now())}}}t.PriorityTaskQueue=n,t.IdleTaskQueue=!i.isNode&&"requestIdleCallback"in window?class extends s{_requestCallback(e){return requestIdleCallback(e)}_cancelCallback(e){cancelIdleCallback(e)}}:n,t.DebouncedIdleTask=class{constructor(){this._queue=new t.IdleTaskQueue}set(e){this._queue.clear(),this._queue.enqueue(e)}flush(){this._queue.flush()}}},9282:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateWindowsModeWrappedState=void 0;const i=r(643);t.updateWindowsModeWrappedState=function(e){const t=e.buffer.lines.get(e.buffer.ybase+e.buffer.y-1),r=null===t||void 0===t?void 0:t.get(e.cols-1),s=e.buffer.lines.get(e.buffer.ybase+e.buffer.y);s&&r&&(s.isWrapped=r[i.CHAR_DATA_CODE_INDEX]!==i.NULL_CELL_CODE&&r[i.CHAR_DATA_CODE_INDEX]!==i.WHITESPACE_CELL_CODE)}},3734:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendedAttrs=t.AttributeData=void 0;class r{constructor(){this.fg=0,this.bg=0,this.extended=new i}static toColorRGB(e){return[e>>>16&255,e>>>8&255,255&e]}static fromColorRGB(e){return(255&e[0])<<16|(255&e[1])<<8|255&e[2]}clone(){const e=new r;return e.fg=this.fg,e.bg=this.bg,e.extended=this.extended.clone(),e}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&0!==this.extended.underlineStyle?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return 50331648==(50331648&this.fg)}isBgRGB(){return 50331648==(50331648&this.bg)}isFgPalette(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)}isBgPalette(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)}isFgDefault(){return 0==(50331648&this.fg)}isBgDefault(){return 0==(50331648&this.bg)}isAttributeDefault(){return 0===this.fg&&0===this.bg}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?50331648==(50331648&this.extended.underlineColor):this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?0==(50331648&this.extended.underlineColor):this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}t.AttributeData=r;class i{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(e){this._ext=e}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(e){this._ext&=-469762049,this._ext|=e<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(e){this._ext&=-67108864,this._ext|=67108863&e}get urlId(){return this._urlId}set urlId(e){this._urlId=e}get underlineVariantOffset(){const e=(3758096384&this._ext)>>29;return e<0?4294967288^e:e}set underlineVariantOffset(e){this._ext&=536870911,this._ext|=e<<29&3758096384}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._ext=0,this._urlId=0,this._ext=e,this._urlId=t}clone(){return new i(this._ext,this._urlId)}isEmpty(){return 0===this.underlineStyle&&0===this._urlId}}t.ExtendedAttrs=i},9092:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Buffer=t.MAX_BUFFER_SIZE=void 0;const i=r(6349),s=r(7226),n=r(3734),o=r(8437),a=r(4634),l=r(511),c=r(643),u=r(4863),h=r(7116);t.MAX_BUFFER_SIZE=4294967295,t.Buffer=class{constructor(e,t,r){this._hasScrollback=e,this._optionsService=t,this._bufferService=r,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=o.DEFAULT_ATTR_DATA.clone(),this.savedCharset=h.DEFAULT_CHARSET,this.markers=[],this._nullCell=l.CellData.fromCharData([0,c.NULL_CELL_CHAR,c.NULL_CELL_WIDTH,c.NULL_CELL_CODE]),this._whitespaceCell=l.CellData.fromCharData([0,c.WHITESPACE_CELL_CHAR,c.WHITESPACE_CELL_WIDTH,c.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new s.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new i.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new n.ExtendedAttrs),this._nullCell}getWhitespaceCell(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new n.ExtendedAttrs),this._whitespaceCell}getBlankLine(e,t){return new o.BufferLine(this._bufferService.cols,this.getNullCell(e),t)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows}_getCorrectBufferLength(e){if(!this._hasScrollback)return e;const r=e+this._optionsService.rawOptions.scrollback;return r>t.MAX_BUFFER_SIZE?t.MAX_BUFFER_SIZE:r}fillViewportRows(e){if(0===this.lines.length){void 0===e&&(e=o.DEFAULT_ATTR_DATA);let t=this._rows;for(;t--;)this.lines.push(this.getBlankLine(e))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new i.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(e,t){const r=this.getNullCell(o.DEFAULT_ATTR_DATA);let i=0;const s=this._getCorrectBufferLength(t);if(s>this.lines.maxLength&&(this.lines.maxLength=s),this.lines.length>0){if(this._cols<e)for(let t=0;t<this.lines.length;t++)i+=+this.lines.get(t).resize(e,r);let n=0;if(this._rows<t)for(let i=this._rows;i<t;i++)this.lines.length<t+this.ybase&&(this._optionsService.rawOptions.windowsMode||void 0!==this._optionsService.rawOptions.windowsPty.backend||void 0!==this._optionsService.rawOptions.windowsPty.buildNumber?this.lines.push(new o.BufferLine(e,r)):this.ybase>0&&this.lines.length<=this.ybase+this.y+n+1?(this.ybase--,n++,this.ydisp>0&&this.ydisp--):this.lines.push(new o.BufferLine(e,r)));else for(let e=this._rows;e>t;e--)this.lines.length>t+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(s<this.lines.maxLength){const e=this.lines.length-s;e>0&&(this.lines.trimStart(e),this.ybase=Math.max(this.ybase-e,0),this.ydisp=Math.max(this.ydisp-e,0),this.savedY=Math.max(this.savedY-e,0)),this.lines.maxLength=s}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,t-1),n&&(this.y+=n),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=t-1,this._isReflowEnabled&&(this._reflow(e,t),this._cols>e))for(let n=0;n<this.lines.length;n++)i+=+this.lines.get(n).resize(e,r);this._cols=e,this._rows=t,this._memoryCleanupQueue.clear(),i>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let e=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,e=!1);let t=0;for(;this._memoryCleanupPosition<this.lines.length;)if(t+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),t>100)return!0;return e}get _isReflowEnabled(){const e=this._optionsService.rawOptions.windowsPty;return e&&e.buildNumber?this._hasScrollback&&"conpty"===e.backend&&e.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(e,t){this._cols!==e&&(e>this._cols?this._reflowLarger(e,t):this._reflowSmaller(e,t))}_reflowLarger(e,t){const r=(0,a.reflowLargerGetLinesToRemove)(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(o.DEFAULT_ATTR_DATA));if(r.length>0){const i=(0,a.reflowLargerCreateNewLayout)(this.lines,r);(0,a.reflowLargerApplyNewLayout)(this.lines,i.layout),this._reflowLargerAdjustViewport(e,t,i.countRemoved)}}_reflowLargerAdjustViewport(e,t,r){const i=this.getNullCell(o.DEFAULT_ATTR_DATA);let s=r;for(;s-- >0;)0===this.ybase?(this.y>0&&this.y--,this.lines.length<t&&this.lines.push(new o.BufferLine(e,i))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-r,0)}_reflowSmaller(e,t){const r=this.getNullCell(o.DEFAULT_ATTR_DATA),i=[];let s=0;for(let n=this.lines.length-1;n>=0;n--){let l=this.lines.get(n);if(!l||!l.isWrapped&&l.getTrimmedLength()<=e)continue;const c=[l];for(;l.isWrapped&&n>0;)l=this.lines.get(--n),c.unshift(l);const u=this.ybase+this.y;if(u>=n&&u<n+c.length)continue;const h=c[c.length-1].getTrimmedLength(),d=(0,a.reflowSmallerGetNewLineLengths)(c,this._cols,e),f=d.length-c.length;let p;p=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+f):Math.max(0,this.lines.length-this.lines.maxLength+f);const g=[];for(let e=0;e<f;e++){const e=this.getBlankLine(o.DEFAULT_ATTR_DATA,!0);g.push(e)}g.length>0&&(i.push({start:n+c.length+s,newLines:g}),s+=g.length),c.push(...g);let _=d.length-1,m=d[_];0===m&&(_--,m=d[_]);let v=c.length-f-1,y=h;for(;v>=0;){const e=Math.min(y,m);if(void 0===c[_])break;if(c[_].copyCellsFrom(c[v],y-e,m-e,e,!0),m-=e,0===m&&(_--,m=d[_]),y-=e,0===y){v--;const e=Math.max(v,0);y=(0,a.getWrappedLineTrimmedLength)(c,e,this._cols)}}for(let t=0;t<c.length;t++)d[t]<e&&c[t].setCell(d[t],r);let w=f-p;for(;w-- >0;)0===this.ybase?this.y<t-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+s)-t&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+f,this.ybase+t-1)}if(i.length>0){const e=[],t=[];for(let i=0;i<this.lines.length;i++)t.push(this.lines.get(i));const r=this.lines.length;let n=r-1,o=0,a=i[o];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+s);let l=0;for(let h=Math.min(this.lines.maxLength-1,r+s-1);h>=0;h--)if(a&&a.start>n+l){for(let e=a.newLines.length-1;e>=0;e--)this.lines.set(h--,a.newLines[e]);h++,e.push({index:n+1,amount:a.newLines.length}),l+=a.newLines.length,a=i[++o]}else this.lines.set(h,t[n--]);let c=0;for(let i=e.length-1;i>=0;i--)e[i].index+=c,this.lines.onInsertEmitter.fire(e[i]),c+=e[i].amount;const u=Math.max(0,r+s-this.lines.maxLength);u>0&&this.lines.onTrimEmitter.fire(u)}}translateBufferLineToString(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const s=this.lines.get(e);return s?s.translateToString(t,r,i):""}getWrappedRangeForLine(e){let t=e,r=e;for(;t>0&&this.lines.get(t).isWrapped;)t--;for(;r+1<this.lines.length&&this.lines.get(r+1).isWrapped;)r++;return{first:t,last:r}}setupTabStops(e){for(null!=e?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0}prevStop(e){for(null==e&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e}nextStop(e){for(null==e&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e}clearMarkers(e){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].line===e&&(this.markers[t].dispose(),this.markers.splice(t--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].dispose(),this.markers.splice(e--,1);this._isClearing=!1}addMarker(e){const t=new u.Marker(e);return this.markers.push(t),t.register(this.lines.onTrim(e=>{t.line-=e,t.line<0&&t.dispose()})),t.register(this.lines.onInsert(e=>{t.line>=e.index&&(t.line+=e.amount)})),t.register(this.lines.onDelete(e=>{t.line>=e.index&&t.line<e.index+e.amount&&t.dispose(),t.line>e.index&&(t.line-=e.amount)})),t.register(t.onDispose(()=>this._removeMarker(t))),t}_removeMarker(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)}}},8437:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLine=t.DEFAULT_ATTR_DATA=void 0;const i=r(3734),s=r(511),n=r(643),o=r(482);t.DEFAULT_ATTR_DATA=Object.freeze(new i.AttributeData);let a=0;class l{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.isWrapped=r,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*e);const i=t||s.CellData.fromCharData([0,n.NULL_CELL_CHAR,n.NULL_CELL_WIDTH,n.NULL_CELL_CODE]);for(let s=0;s<e;++s)this.setCell(s,i);this.length=e}get(e){const t=this._data[3*e+0],r=2097151&t;return[this._data[3*e+1],2097152&t?this._combined[e]:r?(0,o.stringFromCodePoint)(r):"",t>>22,2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):r]}set(e,t){this._data[3*e+1]=t[n.CHAR_DATA_ATTR_INDEX],t[n.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[e]=t[1],this._data[3*e+0]=2097152|e|t[n.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*e+0]=t[n.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|t[n.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(e){return this._data[3*e+0]>>22}hasWidth(e){return 12582912&this._data[3*e+0]}getFg(e){return this._data[3*e+1]}getBg(e){return this._data[3*e+2]}hasContent(e){return 4194303&this._data[3*e+0]}getCodePoint(e){const t=this._data[3*e+0];return 2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):2097151&t}isCombined(e){return 2097152&this._data[3*e+0]}getString(e){const t=this._data[3*e+0];return 2097152&t?this._combined[e]:2097151&t?(0,o.stringFromCodePoint)(2097151&t):""}isProtected(e){return 536870912&this._data[3*e+2]}loadCell(e,t){return a=3*e,t.content=this._data[a+0],t.fg=this._data[a+1],t.bg=this._data[a+2],2097152&t.content&&(t.combinedData=this._combined[e]),268435456&t.bg&&(t.extended=this._extendedAttrs[e]),t}setCell(e,t){2097152&t.content&&(this._combined[e]=t.combinedData),268435456&t.bg&&(this._extendedAttrs[e]=t.extended),this._data[3*e+0]=t.content,this._data[3*e+1]=t.fg,this._data[3*e+2]=t.bg}setCellFromCodepoint(e,t,r,i){268435456&i.bg&&(this._extendedAttrs[e]=i.extended),this._data[3*e+0]=t|r<<22,this._data[3*e+1]=i.fg,this._data[3*e+2]=i.bg}addCodepointToCell(e,t,r){let i=this._data[3*e+0];2097152&i?this._combined[e]+=(0,o.stringFromCodePoint)(t):2097151&i?(this._combined[e]=(0,o.stringFromCodePoint)(2097151&i)+(0,o.stringFromCodePoint)(t),i&=-2097152,i|=2097152):i=t|1<<22,r&&(i&=-12582913,i|=r<<22),this._data[3*e+0]=i}insertCells(e,t,r){if((e%=this.length)&&2===this.getWidth(e-1)&&this.setCellFromCodepoint(e-1,0,1,r),t<this.length-e){const i=new s.CellData;for(let r=this.length-e-t-1;r>=0;--r)this.setCell(e+t+r,this.loadCell(e+r,i));for(let s=0;s<t;++s)this.setCell(e+s,r)}else for(let i=e;i<this.length;++i)this.setCell(i,r);2===this.getWidth(this.length-1)&&this.setCellFromCodepoint(this.length-1,0,1,r)}deleteCells(e,t,r){if(e%=this.length,t<this.length-e){const i=new s.CellData;for(let r=0;r<this.length-e-t;++r)this.setCell(e+r,this.loadCell(e+t+r,i));for(let e=this.length-t;e<this.length;++e)this.setCell(e,r)}else for(let i=e;i<this.length;++i)this.setCell(i,r);e&&2===this.getWidth(e-1)&&this.setCellFromCodepoint(e-1,0,1,r),0!==this.getWidth(e)||this.hasContent(e)||this.setCellFromCodepoint(e,0,1,r)}replaceCells(e,t,r){if(arguments.length>3&&void 0!==arguments[3]&&arguments[3])for(e&&2===this.getWidth(e-1)&&!this.isProtected(e-1)&&this.setCellFromCodepoint(e-1,0,1,r),t<this.length&&2===this.getWidth(t-1)&&!this.isProtected(t)&&this.setCellFromCodepoint(t,0,1,r);e<t&&e<this.length;)this.isProtected(e)||this.setCell(e,r),e++;else for(e&&2===this.getWidth(e-1)&&this.setCellFromCodepoint(e-1,0,1,r),t<this.length&&2===this.getWidth(t-1)&&this.setCellFromCodepoint(t,0,1,r);e<t&&e<this.length;)this.setCell(e++,r)}resize(e,t){if(e===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const r=3*e;if(e>this.length){if(this._data.buffer.byteLength>=4*r)this._data=new Uint32Array(this._data.buffer,0,r);else{const e=new Uint32Array(r);e.set(this._data),this._data=e}for(let r=this.length;r<e;++r)this.setCell(r,t)}else{this._data=this._data.subarray(0,r);const t=Object.keys(this._combined);for(let r=0;r<t.length;r++){const i=parseInt(t[r],10);i>=e&&delete this._combined[i]}const i=Object.keys(this._extendedAttrs);for(let r=0;r<i.length;r++){const t=parseInt(i[r],10);t>=e&&delete this._extendedAttrs[t]}}return this.length=e,4*r*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const e=new Uint32Array(this._data.length);return e.set(this._data),this._data=e,1}return 0}fill(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])for(let t=0;t<this.length;++t)this.isProtected(t)||this.setCell(t,e);else{this._combined={},this._extendedAttrs={};for(let t=0;t<this.length;++t)this.setCell(t,e)}}copyFrom(e){this.length!==e.length?this._data=new Uint32Array(e._data):this._data.set(e._data),this.length=e.length,this._combined={};for(const t in e._combined)this._combined[t]=e._combined[t];this._extendedAttrs={};for(const t in e._extendedAttrs)this._extendedAttrs[t]=e._extendedAttrs[t];this.isWrapped=e.isWrapped}clone(){const e=new l(0);e._data=new Uint32Array(this._data),e.length=this.length;for(const t in this._combined)e._combined[t]=this._combined[t];for(const t in this._extendedAttrs)e._extendedAttrs[t]=this._extendedAttrs[t];return e.isWrapped=this.isWrapped,e}getTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0])return e+(this._data[3*e+0]>>22);return 0}getNoBgTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0]||50331648&this._data[3*e+2])return e+(this._data[3*e+0]>>22);return 0}copyCellsFrom(e,t,r,i,s){const n=e._data;if(s)for(let a=i-1;a>=0;a--){for(let e=0;e<3;e++)this._data[3*(r+a)+e]=n[3*(t+a)+e];268435456&n[3*(t+a)+2]&&(this._extendedAttrs[r+a]=e._extendedAttrs[t+a])}else for(let a=0;a<i;a++){for(let e=0;e<3;e++)this._data[3*(r+a)+e]=n[3*(t+a)+e];268435456&n[3*(t+a)+2]&&(this._extendedAttrs[r+a]=e._extendedAttrs[t+a])}const o=Object.keys(e._combined);for(let a=0;a<o.length;a++){const i=parseInt(o[a],10);i>=t&&(this._combined[i-t+r]=e._combined[i])}}translateToString(e,t,r,i){t=null!==t&&void 0!==t?t:0,r=null!==r&&void 0!==r?r:this.length,e&&(r=Math.min(r,this.getTrimmedLength())),i&&(i.length=0);let s="";for(;t<r;){const e=this._data[3*t+0],r=2097151&e,a=2097152&e?this._combined[t]:r?(0,o.stringFromCodePoint)(r):n.WHITESPACE_CELL_CHAR;if(s+=a,i)for(let s=0;s<a.length;++s)i.push(t);t+=e>>22||1}return i&&i.push(t),s}}t.BufferLine=l},4841:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRangeLength=void 0,t.getRangeLength=function(e,t){if(e.start.y>e.end.y)throw new Error("Buffer range end (".concat(e.end.x,", ").concat(e.end.y,") cannot be before start (").concat(e.start.x,", ").concat(e.start.y,")"));return t*(e.end.y-e.start.y)+(e.end.x-e.start.x+1)}},4634:(e,t)=>{function r(e,t,r){if(t===e.length-1)return e[t].getTrimmedLength();const i=!e[t].hasContent(r-1)&&1===e[t].getWidth(r-1),s=2===e[t+1].getWidth(0);return i&&s?r-1:r}Object.defineProperty(t,"__esModule",{value:!0}),t.getWrappedLineTrimmedLength=t.reflowSmallerGetNewLineLengths=t.reflowLargerApplyNewLayout=t.reflowLargerCreateNewLayout=t.reflowLargerGetLinesToRemove=void 0,t.reflowLargerGetLinesToRemove=function(e,t,i,s,n){const o=[];for(let a=0;a<e.length-1;a++){let l=a,c=e.get(++l);if(!c.isWrapped)continue;const u=[e.get(a)];for(;l<e.length&&c.isWrapped;)u.push(c),c=e.get(++l);if(s>=a&&s<l){a+=u.length-1;continue}let h=0,d=r(u,h,t),f=1,p=0;for(;f<u.length;){const e=r(u,f,t),s=e-p,o=i-d,a=Math.min(s,o);u[h].copyCellsFrom(u[f],p,d,a,!1),d+=a,d===i&&(h++,d=0),p+=a,p===e&&(f++,p=0),0===d&&0!==h&&2===u[h-1].getWidth(i-1)&&(u[h].copyCellsFrom(u[h-1],i-1,d++,1,!1),u[h-1].setCell(i-1,n))}u[h].replaceCells(d,i,n);let g=0;for(let e=u.length-1;e>0&&(e>h||0===u[e].getTrimmedLength());e--)g++;g>0&&(o.push(a+u.length-g),o.push(g)),a+=u.length-1}return o},t.reflowLargerCreateNewLayout=function(e,t){const r=[];let i=0,s=t[i],n=0;for(let o=0;o<e.length;o++)if(s===o){const r=t[++i];e.onDeleteEmitter.fire({index:o-n,amount:r}),o+=r-1,n+=r,s=t[++i]}else r.push(o);return{layout:r,countRemoved:n}},t.reflowLargerApplyNewLayout=function(e,t){const r=[];for(let i=0;i<t.length;i++)r.push(e.get(t[i]));for(let i=0;i<r.length;i++)e.set(i,r[i]);e.length=t.length},t.reflowSmallerGetNewLineLengths=function(e,t,i){const s=[],n=e.map((i,s)=>r(e,s,t)).reduce((e,t)=>e+t);let o=0,a=0,l=0;for(;l<n;){if(n-l<i){s.push(n-l);break}o+=i;const c=r(e,a,t);o>c&&(o-=c,a++);const u=2===e[a].getWidth(o-1);u&&o--;const h=u?i-1:i;s.push(h),l+=h}return s},t.getWrappedLineTrimmedLength=r},5295:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferSet=void 0;const i=r(8460),s=r(844),n=r(9092);class o extends s.Disposable{constructor(e,t){super(),this._optionsService=e,this._bufferService=t,this._onBufferActivate=this.register(new i.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new n.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new n.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(e){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(e),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(e,t){this._normal.resize(e,t),this._alt.resize(e,t),this.setupTabStops(e)}setupTabStops(e){this._normal.setupTabStops(e),this._alt.setupTabStops(e)}}t.BufferSet=o},511:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CellData=void 0;const i=r(482),s=r(643),n=r(3734);class o extends n.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new n.ExtendedAttrs,this.combinedData=""}static fromCharData(e){const t=new o;return t.setFromCharData(e),t}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,i.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(e){this.fg=e[s.CHAR_DATA_ATTR_INDEX],this.bg=0;let t=!1;if(e[s.CHAR_DATA_CHAR_INDEX].length>2)t=!0;else if(2===e[s.CHAR_DATA_CHAR_INDEX].length){const r=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=r&&r<=56319){const i=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=i&&i<=57343?this.content=1024*(r-55296)+i-56320+65536|e[s.CHAR_DATA_WIDTH_INDEX]<<22:t=!0}else t=!0}else this.content=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|e[s.CHAR_DATA_WIDTH_INDEX]<<22;t&&(this.combinedData=e[s.CHAR_DATA_CHAR_INDEX],this.content=2097152|e[s.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}t.CellData=o},643:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WHITESPACE_CELL_CODE=t.WHITESPACE_CELL_WIDTH=t.WHITESPACE_CELL_CHAR=t.NULL_CELL_CODE=t.NULL_CELL_WIDTH=t.NULL_CELL_CHAR=t.CHAR_DATA_CODE_INDEX=t.CHAR_DATA_WIDTH_INDEX=t.CHAR_DATA_CHAR_INDEX=t.CHAR_DATA_ATTR_INDEX=t.DEFAULT_EXT=t.DEFAULT_ATTR=t.DEFAULT_COLOR=void 0,t.DEFAULT_COLOR=0,t.DEFAULT_ATTR=256|t.DEFAULT_COLOR<<9,t.DEFAULT_EXT=0,t.CHAR_DATA_ATTR_INDEX=0,t.CHAR_DATA_CHAR_INDEX=1,t.CHAR_DATA_WIDTH_INDEX=2,t.CHAR_DATA_CODE_INDEX=3,t.NULL_CELL_CHAR="",t.NULL_CELL_WIDTH=1,t.NULL_CELL_CODE=0,t.WHITESPACE_CELL_CHAR=" ",t.WHITESPACE_CELL_WIDTH=1,t.WHITESPACE_CELL_CODE=32},4863:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Marker=void 0;const i=r(8460),s=r(844);class n{get id(){return this._id}constructor(e){this.line=e,this.isDisposed=!1,this._disposables=[],this._id=n._nextId++,this._onDispose=this.register(new i.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,s.disposeArray)(this._disposables),this._disposables.length=0)}register(e){return this._disposables.push(e),e}}t.Marker=n,n._nextId=1},7116:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CHARSET=t.CHARSETS=void 0,t.CHARSETS={},t.DEFAULT_CHARSET=t.CHARSETS.B,t.CHARSETS[0]={"`":"\u25c6",a:"\u2592",b:"\u2409",c:"\u240c",d:"\u240d",e:"\u240a",f:"\xb0",g:"\xb1",h:"\u2424",i:"\u240b",j:"\u2518",k:"\u2510",l:"\u250c",m:"\u2514",n:"\u253c",o:"\u23ba",p:"\u23bb",q:"\u2500",r:"\u23bc",s:"\u23bd",t:"\u251c",u:"\u2524",v:"\u2534",w:"\u252c",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03c0","|":"\u2260","}":"\xa3","~":"\xb7"},t.CHARSETS.A={"#":"\xa3"},t.CHARSETS.B=void 0,t.CHARSETS[4]={"#":"\xa3","@":"\xbe","[":"ij","\\":"\xbd","]":"|","{":"\xa8","|":"f","}":"\xbc","~":"\xb4"},t.CHARSETS.C=t.CHARSETS[5]={"[":"\xc4","\\":"\xd6","]":"\xc5","^":"\xdc","`":"\xe9","{":"\xe4","|":"\xf6","}":"\xe5","~":"\xfc"},t.CHARSETS.R={"#":"\xa3","@":"\xe0","[":"\xb0","\\":"\xe7","]":"\xa7","{":"\xe9","|":"\xf9","}":"\xe8","~":"\xa8"},t.CHARSETS.Q={"@":"\xe0","[":"\xe2","\\":"\xe7","]":"\xea","^":"\xee","`":"\xf4","{":"\xe9","|":"\xf9","}":"\xe8","~":"\xfb"},t.CHARSETS.K={"@":"\xa7","[":"\xc4","\\":"\xd6","]":"\xdc","{":"\xe4","|":"\xf6","}":"\xfc","~":"\xdf"},t.CHARSETS.Y={"#":"\xa3","@":"\xa7","[":"\xb0","\\":"\xe7","]":"\xe9","`":"\xf9","{":"\xe0","|":"\xf2","}":"\xe8","~":"\xec"},t.CHARSETS.E=t.CHARSETS[6]={"@":"\xc4","[":"\xc6","\\":"\xd8","]":"\xc5","^":"\xdc","`":"\xe4","{":"\xe6","|":"\xf8","}":"\xe5","~":"\xfc"},t.CHARSETS.Z={"#":"\xa3","@":"\xa7","[":"\xa1","\\":"\xd1","]":"\xbf","{":"\xb0","|":"\xf1","}":"\xe7"},t.CHARSETS.H=t.CHARSETS[7]={"@":"\xc9","[":"\xc4","\\":"\xd6","]":"\xc5","^":"\xdc","`":"\xe9","{":"\xe4","|":"\xf6","}":"\xe5","~":"\xfc"},t.CHARSETS["="]={"#":"\xf9","@":"\xe0","[":"\xe9","\\":"\xe7","]":"\xea","^":"\xee",_:"\xe8","`":"\xf4","{":"\xe4","|":"\xf6","}":"\xfc","~":"\xfb"}},2584:(e,t)=>{var r,i,s;Object.defineProperty(t,"__esModule",{value:!0}),t.C1_ESCAPED=t.C1=t.C0=void 0,function(e){e.NUL="\0",e.SOH="\x01",e.STX="\x02",e.ETX="\x03",e.EOT="\x04",e.ENQ="\x05",e.ACK="\x06",e.BEL="\x07",e.BS="\b",e.HT="\t",e.LF="\n",e.VT="\v",e.FF="\f",e.CR="\r",e.SO="\x0e",e.SI="\x0f",e.DLE="\x10",e.DC1="\x11",e.DC2="\x12",e.DC3="\x13",e.DC4="\x14",e.NAK="\x15",e.SYN="\x16",e.ETB="\x17",e.CAN="\x18",e.EM="\x19",e.SUB="\x1a",e.ESC="\x1b",e.FS="\x1c",e.GS="\x1d",e.RS="\x1e",e.US="\x1f",e.SP=" ",e.DEL="\x7f"}(r||(t.C0=r={})),function(e){e.PAD="\x80",e.HOP="\x81",e.BPH="\x82",e.NBH="\x83",e.IND="\x84",e.NEL="\x85",e.SSA="\x86",e.ESA="\x87",e.HTS="\x88",e.HTJ="\x89",e.VTS="\x8a",e.PLD="\x8b",e.PLU="\x8c",e.RI="\x8d",e.SS2="\x8e",e.SS3="\x8f",e.DCS="\x90",e.PU1="\x91",e.PU2="\x92",e.STS="\x93",e.CCH="\x94",e.MW="\x95",e.SPA="\x96",e.EPA="\x97",e.SOS="\x98",e.SGCI="\x99",e.SCI="\x9a",e.CSI="\x9b",e.ST="\x9c",e.OSC="\x9d",e.PM="\x9e",e.APC="\x9f"}(i||(t.C1=i={})),function(e){e.ST="".concat(r.ESC,"\\")}(s||(t.C1_ESCAPED=s={}))},7399:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateKeyboardEvent=void 0;const i=r(2584),s={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};t.evaluateKeyboardEvent=function(e,t,r,n){const o={type:0,cancel:!1,key:void 0},a=(e.shiftKey?1:0)|(e.altKey?2:0)|(e.ctrlKey?4:0)|(e.metaKey?8:0);switch(e.keyCode){case 0:"UIKeyInputUpArrow"===e.key?o.key=t?i.C0.ESC+"OA":i.C0.ESC+"[A":"UIKeyInputLeftArrow"===e.key?o.key=t?i.C0.ESC+"OD":i.C0.ESC+"[D":"UIKeyInputRightArrow"===e.key?o.key=t?i.C0.ESC+"OC":i.C0.ESC+"[C":"UIKeyInputDownArrow"===e.key&&(o.key=t?i.C0.ESC+"OB":i.C0.ESC+"[B");break;case 8:o.key=e.ctrlKey?"\b":i.C0.DEL,e.altKey&&(o.key=i.C0.ESC+o.key);break;case 9:if(e.shiftKey){o.key=i.C0.ESC+"[Z";break}o.key=i.C0.HT,o.cancel=!0;break;case 13:o.key=e.altKey?i.C0.ESC+i.C0.CR:i.C0.CR,o.cancel=!0;break;case 27:o.key=i.C0.ESC,e.altKey&&(o.key=i.C0.ESC+i.C0.ESC),o.cancel=!0;break;case 37:if(e.metaKey)break;a?(o.key=i.C0.ESC+"[1;"+(a+1)+"D",o.key===i.C0.ESC+"[1;3D"&&(o.key=i.C0.ESC+(r?"b":"[1;5D"))):o.key=t?i.C0.ESC+"OD":i.C0.ESC+"[D";break;case 39:if(e.metaKey)break;a?(o.key=i.C0.ESC+"[1;"+(a+1)+"C",o.key===i.C0.ESC+"[1;3C"&&(o.key=i.C0.ESC+(r?"f":"[1;5C"))):o.key=t?i.C0.ESC+"OC":i.C0.ESC+"[C";break;case 38:if(e.metaKey)break;a?(o.key=i.C0.ESC+"[1;"+(a+1)+"A",r||o.key!==i.C0.ESC+"[1;3A"||(o.key=i.C0.ESC+"[1;5A")):o.key=t?i.C0.ESC+"OA":i.C0.ESC+"[A";break;case 40:if(e.metaKey)break;a?(o.key=i.C0.ESC+"[1;"+(a+1)+"B",r||o.key!==i.C0.ESC+"[1;3B"||(o.key=i.C0.ESC+"[1;5B")):o.key=t?i.C0.ESC+"OB":i.C0.ESC+"[B";break;case 45:e.shiftKey||e.ctrlKey||(o.key=i.C0.ESC+"[2~");break;case 46:o.key=a?i.C0.ESC+"[3;"+(a+1)+"~":i.C0.ESC+"[3~";break;case 36:o.key=a?i.C0.ESC+"[1;"+(a+1)+"H":t?i.C0.ESC+"OH":i.C0.ESC+"[H";break;case 35:o.key=a?i.C0.ESC+"[1;"+(a+1)+"F":t?i.C0.ESC+"OF":i.C0.ESC+"[F";break;case 33:e.shiftKey?o.type=2:e.ctrlKey?o.key=i.C0.ESC+"[5;"+(a+1)+"~":o.key=i.C0.ESC+"[5~";break;case 34:e.shiftKey?o.type=3:e.ctrlKey?o.key=i.C0.ESC+"[6;"+(a+1)+"~":o.key=i.C0.ESC+"[6~";break;case 112:o.key=a?i.C0.ESC+"[1;"+(a+1)+"P":i.C0.ESC+"OP";break;case 113:o.key=a?i.C0.ESC+"[1;"+(a+1)+"Q":i.C0.ESC+"OQ";break;case 114:o.key=a?i.C0.ESC+"[1;"+(a+1)+"R":i.C0.ESC+"OR";break;case 115:o.key=a?i.C0.ESC+"[1;"+(a+1)+"S":i.C0.ESC+"OS";break;case 116:o.key=a?i.C0.ESC+"[15;"+(a+1)+"~":i.C0.ESC+"[15~";break;case 117:o.key=a?i.C0.ESC+"[17;"+(a+1)+"~":i.C0.ESC+"[17~";break;case 118:o.key=a?i.C0.ESC+"[18;"+(a+1)+"~":i.C0.ESC+"[18~";break;case 119:o.key=a?i.C0.ESC+"[19;"+(a+1)+"~":i.C0.ESC+"[19~";break;case 120:o.key=a?i.C0.ESC+"[20;"+(a+1)+"~":i.C0.ESC+"[20~";break;case 121:o.key=a?i.C0.ESC+"[21;"+(a+1)+"~":i.C0.ESC+"[21~";break;case 122:o.key=a?i.C0.ESC+"[23;"+(a+1)+"~":i.C0.ESC+"[23~";break;case 123:o.key=a?i.C0.ESC+"[24;"+(a+1)+"~":i.C0.ESC+"[24~";break;default:if(!e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)if(r&&!n||!e.altKey||e.metaKey)!r||e.altKey||e.ctrlKey||e.shiftKey||!e.metaKey?e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.keyCode>=48&&1===e.key.length?o.key=e.key:e.key&&e.ctrlKey&&("_"===e.key&&(o.key=i.C0.US),"@"===e.key&&(o.key=i.C0.NUL)):65===e.keyCode&&(o.type=1);else{const t=s[e.keyCode],r=null===t||void 0===t?void 0:t[e.shiftKey?1:0];if(r)o.key=i.C0.ESC+r;else if(e.keyCode>=65&&e.keyCode<=90){const t=e.ctrlKey?e.keyCode-64:e.keyCode+32;let r=String.fromCharCode(t);e.shiftKey&&(r=r.toUpperCase()),o.key=i.C0.ESC+r}else if(32===e.keyCode)o.key=i.C0.ESC+(e.ctrlKey?i.C0.NUL:" ");else if("Dead"===e.key&&e.code.startsWith("Key")){let t=e.code.slice(3,4);e.shiftKey||(t=t.toLowerCase()),o.key=i.C0.ESC+t,o.cancel=!0}}else e.keyCode>=65&&e.keyCode<=90?o.key=String.fromCharCode(e.keyCode-64):32===e.keyCode?o.key=i.C0.NUL:e.keyCode>=51&&e.keyCode<=55?o.key=String.fromCharCode(e.keyCode-51+27):56===e.keyCode?o.key=i.C0.DEL:219===e.keyCode?o.key=i.C0.ESC:220===e.keyCode?o.key=i.C0.FS:221===e.keyCode&&(o.key=i.C0.GS)}return o}},482:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Utf8ToUtf32=t.StringToUtf32=t.utf32ToString=t.stringFromCodePoint=void 0,t.stringFromCodePoint=function(e){return e>65535?(e-=65536,String.fromCharCode(55296+(e>>10))+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)},t.utf32ToString=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,i="";for(let s=t;s<r;++s){let t=e[s];t>65535?(t-=65536,i+=String.fromCharCode(55296+(t>>10))+String.fromCharCode(t%1024+56320)):i+=String.fromCharCode(t)}return i},t.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(e,t){const r=e.length;if(!r)return 0;let i=0,s=0;if(this._interim){const r=e.charCodeAt(s++);56320<=r&&r<=57343?t[i++]=1024*(this._interim-55296)+r-56320+65536:(t[i++]=this._interim,t[i++]=r),this._interim=0}for(let n=s;n<r;++n){const s=e.charCodeAt(n);if(55296<=s&&s<=56319){if(++n>=r)return this._interim=s,i;const o=e.charCodeAt(n);56320<=o&&o<=57343?t[i++]=1024*(s-55296)+o-56320+65536:(t[i++]=s,t[i++]=o)}else 65279!==s&&(t[i++]=s)}return i}},t.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(e,t){const r=e.length;if(!r)return 0;let i,s,n,o,a=0,l=0,c=0;if(this.interim[0]){let i=!1,s=this.interim[0];s&=192==(224&s)?31:224==(240&s)?15:7;let n,o=0;for(;(n=63&this.interim[++o])&&o<4;)s<<=6,s|=n;const l=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,u=l-o;for(;c<u;){if(c>=r)return 0;if(n=e[c++],128!=(192&n)){c--,i=!0;break}this.interim[o++]=n,s<<=6,s|=63&n}i||(2===l?s<128?c--:t[a++]=s:3===l?s<2048||s>=55296&&s<=57343||65279===s||(t[a++]=s):s<65536||s>1114111||(t[a++]=s)),this.interim.fill(0)}const u=r-4;let h=c;for(;h<r;){for(;!(!(h<u)||128&(i=e[h])||128&(s=e[h+1])||128&(n=e[h+2])||128&(o=e[h+3]));)t[a++]=i,t[a++]=s,t[a++]=n,t[a++]=o,h+=4;if(i=e[h++],i<128)t[a++]=i;else if(192==(224&i)){if(h>=r)return this.interim[0]=i,a;if(s=e[h++],128!=(192&s)){h--;continue}if(l=(31&i)<<6|63&s,l<128){h--;continue}t[a++]=l}else if(224==(240&i)){if(h>=r)return this.interim[0]=i,a;if(s=e[h++],128!=(192&s)){h--;continue}if(h>=r)return this.interim[0]=i,this.interim[1]=s,a;if(n=e[h++],128!=(192&n)){h--;continue}if(l=(15&i)<<12|(63&s)<<6|63&n,l<2048||l>=55296&&l<=57343||65279===l)continue;t[a++]=l}else if(240==(248&i)){if(h>=r)return this.interim[0]=i,a;if(s=e[h++],128!=(192&s)){h--;continue}if(h>=r)return this.interim[0]=i,this.interim[1]=s,a;if(n=e[h++],128!=(192&n)){h--;continue}if(h>=r)return this.interim[0]=i,this.interim[1]=s,this.interim[2]=n,a;if(o=e[h++],128!=(192&o)){h--;continue}if(l=(7&i)<<18|(63&s)<<12|(63&n)<<6|63&o,l<65536||l>1114111)continue;t[a++]=l}}return a}}},225:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeV6=void 0;const i=r(1480),s=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],n=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let o;t.UnicodeV6=class{constructor(){if(this.version="6",!o){o=new Uint8Array(65536),o.fill(1),o[0]=0,o.fill(0,1,32),o.fill(0,127,160),o.fill(2,4352,4448),o[9001]=2,o[9002]=2,o.fill(2,11904,42192),o[12351]=1,o.fill(2,44032,55204),o.fill(2,63744,64256),o.fill(2,65040,65050),o.fill(2,65072,65136),o.fill(2,65280,65377),o.fill(2,65504,65511);for(let e=0;e<s.length;++e)o.fill(0,s[e][0],s[e][1]+1)}}wcwidth(e){return e<32?0:e<127?1:e<65536?o[e]:function(e,t){let r,i=0,s=t.length-1;if(e<t[0][0]||e>t[s][1])return!1;for(;s>=i;)if(r=i+s>>1,e>t[r][1])i=r+1;else{if(!(e<t[r][0]))return!0;s=r-1}return!1}(e,n)?0:e>=131072&&e<=196605||e>=196608&&e<=262141?2:1}charProperties(e,t){let r=this.wcwidth(e),s=0===r&&0!==t;if(s){const e=i.UnicodeService.extractWidth(t);0===e?s=!1:e>r&&(r=e)}return i.UnicodeService.createPropertyValue(0,r,s)}}},5981:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WriteBuffer=void 0;const i=r(8460),s=r(844);class n extends s.Disposable{constructor(e){super(),this._action=e,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new i.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(e,t){if(void 0!==t&&this._syncCalls>t)return void(this._syncCalls=0);if(this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let r;for(this._isSyncWriting=!0;r=this._writeBuffer.shift();){this._action(r);const e=this._callbacks.shift();e&&e()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(e,t){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t)}_innerWrite(){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const r=this._writeBuffer[this._bufferOffset],i=this._action(r,e);if(i){const e=e=>Date.now()-t>=12?setTimeout(()=>this._innerWrite(0,e)):this._innerWrite(t,e);return void i.catch(e=>(queueMicrotask(()=>{throw e}),Promise.resolve(!1))).then(e)}const s=this._callbacks[this._bufferOffset];if(s&&s(),this._bufferOffset++,this._pendingData-=r.length,Date.now()-t>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}t.WriteBuffer=n},5941:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toRgbString=t.parseColor=void 0;const r=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,i=/^[\da-f]+$/;function s(e,t){const r=e.toString(16),i=r.length<2?"0"+r:r;switch(t){case 4:return r[0];case 8:return i;case 12:return(i+i).slice(0,3);default:return i+i}}t.parseColor=function(e){if(!e)return;let t=e.toLowerCase();if(0===t.indexOf("rgb:")){t=t.slice(4);const e=r.exec(t);if(e){const t=e[1]?15:e[4]?255:e[7]?4095:65535;return[Math.round(parseInt(e[1]||e[4]||e[7]||e[10],16)/t*255),Math.round(parseInt(e[2]||e[5]||e[8]||e[11],16)/t*255),Math.round(parseInt(e[3]||e[6]||e[9]||e[12],16)/t*255)]}}else if(0===t.indexOf("#")&&(t=t.slice(1),i.exec(t)&&[3,6,9,12].includes(t.length))){const e=t.length/3,r=[0,0,0];for(let i=0;i<3;++i){const s=parseInt(t.slice(e*i,e*i+e),16);r[i]=1===e?s<<4:2===e?s:3===e?s>>4:s>>8}return r}},t.toRgbString=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;const[r,i,n]=e;return"rgb:".concat(s(r,t),"/").concat(s(i,t),"/").concat(s(n,t))}},5770:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PAYLOAD_LIMIT=void 0,t.PAYLOAD_LIMIT=1e7},6351:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DcsHandler=t.DcsParser=void 0;const i=r(482),s=r(8742),n=r(5770),o=[];t.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=o,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=o}registerHandler(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);const r=this._handlers[e];return r.push(t),{dispose:()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}reset(){if(this._active.length)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].unhook(!1);this._stack.paused=!1,this._active=o,this._ident=0}hook(e,t){if(this.reset(),this._ident=e,this._active=this._handlers[e]||o,this._active.length)for(let r=this._active.length-1;r>=0;r--)this._active[r].hook(t);else this._handlerFb(this._ident,"HOOK",t)}put(e,t,r){if(this._active.length)for(let i=this._active.length-1;i>=0;i--)this._active[i].put(e,t,r);else this._handlerFb(this._ident,"PUT",(0,i.utf32ToString)(e,t,r))}unhook(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._active.length){let r=!1,i=this._active.length-1,s=!1;if(this._stack.paused&&(i=this._stack.loopPosition-1,r=t,s=this._stack.fallThrough,this._stack.paused=!1),!s&&!1===r){for(;i>=0&&(r=this._active[i].unhook(e),!0!==r);i--)if(r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!1,r;i--}for(;i>=0;i--)if(r=this._active[i].unhook(!1),r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!0,r}else this._handlerFb(this._ident,"UNHOOK",e);this._active=o,this._ident=0}};const a=new s.Params;a.addParam(0),t.DcsHandler=class{constructor(e){this._handler=e,this._data="",this._params=a,this._hitLimit=!1}hook(e){this._params=e.length>1||e.params[0]?e.clone():a,this._data="",this._hitLimit=!1}put(e,t,r){this._hitLimit||(this._data+=(0,i.utf32ToString)(e,t,r),this._data.length>n.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data,this._params),t instanceof Promise))return t.then(e=>(this._params=a,this._data="",this._hitLimit=!1,e));return this._params=a,this._data="",this._hitLimit=!1,t}}},2015:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EscapeSequenceParser=t.VT500_TRANSITION_TABLE=t.TransitionTable=void 0;const i=r(844),s=r(8742),n=r(6242),o=r(6351);class a{constructor(e){this.table=new Uint8Array(e)}setDefault(e,t){this.table.fill(e<<4|t)}add(e,t,r,i){this.table[t<<8|e]=r<<4|i}addMany(e,t,r,i){for(let s=0;s<e.length;s++)this.table[t<<8|e[s]]=r<<4|i}}t.TransitionTable=a;const l=160;t.VT500_TRANSITION_TABLE=function(){const e=new a(4095),t=Array.apply(null,Array(256)).map((e,t)=>t),r=(e,r)=>t.slice(e,r),i=r(32,127),s=r(0,24);s.push(25),s.push.apply(s,r(28,32));const n=r(0,14);let o;for(o in e.setDefault(1,0),e.addMany(i,0,2,0),n)e.addMany([24,26,153,154],o,3,0),e.addMany(r(128,144),o,3,0),e.addMany(r(144,152),o,3,0),e.add(156,o,0,0),e.add(27,o,11,1),e.add(157,o,4,8),e.addMany([152,158,159],o,0,7),e.add(155,o,11,3),e.add(144,o,11,9);return e.addMany(s,0,3,0),e.addMany(s,1,3,1),e.add(127,1,0,1),e.addMany(s,8,0,8),e.addMany(s,3,3,3),e.add(127,3,0,3),e.addMany(s,4,3,4),e.add(127,4,0,4),e.addMany(s,6,3,6),e.addMany(s,5,3,5),e.add(127,5,0,5),e.addMany(s,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(i,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(r(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(i,7,0,7),e.addMany(s,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(r(64,127),3,7,0),e.addMany(r(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(r(48,60),4,8,4),e.addMany(r(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(r(32,64),6,0,6),e.add(127,6,0,6),e.addMany(r(64,127),6,0,0),e.addMany(r(32,48),3,9,5),e.addMany(r(32,48),5,9,5),e.addMany(r(48,64),5,0,6),e.addMany(r(64,127),5,7,0),e.addMany(r(32,48),4,9,5),e.addMany(r(32,48),1,9,2),e.addMany(r(32,48),2,9,2),e.addMany(r(48,127),2,10,0),e.addMany(r(48,80),1,10,0),e.addMany(r(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(r(96,127),1,10,0),e.add(80,1,11,9),e.addMany(s,9,0,9),e.add(127,9,0,9),e.addMany(r(28,32),9,0,9),e.addMany(r(32,48),9,9,12),e.addMany(r(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(s,11,0,11),e.addMany(r(32,128),11,0,11),e.addMany(r(28,32),11,0,11),e.addMany(s,10,0,10),e.add(127,10,0,10),e.addMany(r(28,32),10,0,10),e.addMany(r(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(r(32,48),10,9,12),e.addMany(s,12,0,12),e.add(127,12,0,12),e.addMany(r(28,32),12,0,12),e.addMany(r(32,48),12,9,12),e.addMany(r(48,64),12,0,11),e.addMany(r(64,127),12,12,13),e.addMany(r(64,127),10,12,13),e.addMany(r(64,127),9,12,13),e.addMany(s,13,13,13),e.addMany(i,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(l,0,2,0),e.add(l,8,5,8),e.add(l,6,0,6),e.add(l,11,0,11),e.add(l,13,13,13),e}();class c extends i.Disposable{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.VT500_TRANSITION_TABLE;super(),this._transitions=e,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new s.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(e,t,r)=>{},this._executeHandlerFb=e=>{},this._csiHandlerFb=(e,t)=>{},this._escHandlerFb=e=>{},this._errorHandlerFb=e=>e,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,i.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new n.OscParser),this._dcsParser=this.register(new o.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[64,126],r=0;if(e.prefix){if(e.prefix.length>1)throw new Error("only one byte as prefix supported");if(r=e.prefix.charCodeAt(0),r&&60>r||r>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(e.intermediates){if(e.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let t=0;t<e.intermediates.length;++t){const i=e.intermediates.charCodeAt(t);if(32>i||i>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");r<<=8,r|=i}}if(1!==e.final.length)throw new Error("final must be a single byte");const i=e.final.charCodeAt(0);if(t[0]>i||i>t[1])throw new Error("final must be in range ".concat(t[0]," .. ").concat(t[1]));return r<<=8,r|=i,r}identToString(e){const t=[];for(;e;)t.push(String.fromCharCode(255&e)),e>>=8;return t.reverse().join("")}setPrintHandler(e){this._printHandler=e}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(e,t){const r=this._identifier(e,[48,126]);void 0===this._escHandlers[r]&&(this._escHandlers[r]=[]);const i=this._escHandlers[r];return i.push(t),{dispose:()=>{const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}}clearEscHandler(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]}setEscHandlerFallback(e){this._escHandlerFb=e}setExecuteHandler(e,t){this._executeHandlers[e.charCodeAt(0)]=t}clearExecuteHandler(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]}setExecuteHandlerFallback(e){this._executeHandlerFb=e}registerCsiHandler(e,t){const r=this._identifier(e);void 0===this._csiHandlers[r]&&(this._csiHandlers[r]=[]);const i=this._csiHandlers[r];return i.push(t),{dispose:()=>{const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}}clearCsiHandler(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]}setCsiHandlerFallback(e){this._csiHandlerFb=e}registerDcsHandler(e,t){return this._dcsParser.registerHandler(this._identifier(e),t)}clearDcsHandler(e){this._dcsParser.clearHandler(this._identifier(e))}setDcsHandlerFallback(e){this._dcsParser.setHandlerFallback(e)}registerOscHandler(e,t){return this._oscParser.registerHandler(e,t)}clearOscHandler(e){this._oscParser.clearHandler(e)}setOscHandlerFallback(e){this._oscParser.setHandlerFallback(e)}setErrorHandler(e){this._errorHandler=e}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,0!==this._parseStack.state&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(e,t,r,i,s){this._parseStack.state=e,this._parseStack.handlers=t,this._parseStack.handlerPos=r,this._parseStack.transition=i,this._parseStack.chunkPos=s}parse(e,t,r){let i,s=0,n=0,o=0;if(this._parseStack.state)if(2===this._parseStack.state)this._parseStack.state=0,o=this._parseStack.chunkPos+1;else{if(void 0===r||1===this._parseStack.state)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const t=this._parseStack.handlers;let n=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(!1===r&&n>-1)for(;n>=0&&(i=t[n](this._params),!0!==i);n--)if(i instanceof Promise)return this._parseStack.handlerPos=n,i;this._parseStack.handlers=[];break;case 4:if(!1===r&&n>-1)for(;n>=0&&(i=t[n](),!0!==i);n--)if(i instanceof Promise)return this._parseStack.handlerPos=n,i;this._parseStack.handlers=[];break;case 6:if(s=e[this._parseStack.chunkPos],i=this._dcsParser.unhook(24!==s&&26!==s,r),i)return i;27===s&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(s=e[this._parseStack.chunkPos],i=this._oscParser.end(24!==s&&26!==s,r),i)return i;27===s&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,o=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let a=o;a<t;++a){switch(s=e[a],n=this._transitions.table[this.currentState<<8|(s<160?s:l)],n>>4){case 2:for(let i=a+1;;++i){if(i>=t||(s=e[i])<32||s>126&&s<l){this._printHandler(e,a,i),a=i-1;break}if(++i>=t||(s=e[i])<32||s>126&&s<l){this._printHandler(e,a,i),a=i-1;break}if(++i>=t||(s=e[i])<32||s>126&&s<l){this._printHandler(e,a,i),a=i-1;break}if(++i>=t||(s=e[i])<32||s>126&&s<l){this._printHandler(e,a,i),a=i-1;break}}break;case 3:this._executeHandlers[s]?this._executeHandlers[s]():this._executeHandlerFb(s),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:a,code:s,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const r=this._csiHandlers[this._collect<<8|s];let o=r?r.length-1:-1;for(;o>=0&&(i=r[o](this._params),!0!==i);o--)if(i instanceof Promise)return this._preserveStack(3,r,o,n,a),i;o<0&&this._csiHandlerFb(this._collect<<8|s,this._params),this.precedingJoinState=0;break;case 8:do{switch(s){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(s-48)}}while(++a<t&&(s=e[a])>47&&s<60);a--;break;case 9:this._collect<<=8,this._collect|=s;break;case 10:const c=this._escHandlers[this._collect<<8|s];let u=c?c.length-1:-1;for(;u>=0&&(i=c[u](),!0!==i);u--)if(i instanceof Promise)return this._preserveStack(4,c,u,n,a),i;u<0&&this._escHandlerFb(this._collect<<8|s),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|s,this._params);break;case 13:for(let i=a+1;;++i)if(i>=t||24===(s=e[i])||26===s||27===s||s>127&&s<l){this._dcsParser.put(e,a,i),a=i-1;break}break;case 14:if(i=this._dcsParser.unhook(24!==s&&26!==s),i)return this._preserveStack(6,[],0,n,a),i;27===s&&(n|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let i=a+1;;i++)if(i>=t||(s=e[i])<32||s>127&&s<l){this._oscParser.put(e,a,i),a=i-1;break}break;case 6:if(i=this._oscParser.end(24!==s&&26!==s),i)return this._preserveStack(5,[],0,n,a),i;27===s&&(n|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&n}}}t.EscapeSequenceParser=c},6242:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OscHandler=t.OscParser=void 0;const i=r(5770),s=r(482),n=[];t.OscParser=class{constructor(){this._state=0,this._active=n,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);const r=this._handlers[e];return r.push(t),{dispose:()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=n}reset(){if(2===this._state)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].end(!1);this._stack.paused=!1,this._active=n,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||n,this._active.length)for(let e=this._active.length-1;e>=0;e--)this._active[e].start();else this._handlerFb(this._id,"START")}_put(e,t,r){if(this._active.length)for(let i=this._active.length-1;i>=0;i--)this._active[i].put(e,t,r);else this._handlerFb(this._id,"PUT",(0,s.utf32ToString)(e,t,r))}start(){this.reset(),this._state=1}put(e,t,r){if(3!==this._state){if(1===this._state)for(;t<r;){const r=e[t++];if(59===r){this._state=2,this._start();break}if(r<48||57<r)return void(this._state=3);-1===this._id&&(this._id=0),this._id=10*this._id+r-48}2===this._state&&r-t>0&&this._put(e,t,r)}}end(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(0!==this._state){if(3!==this._state)if(1===this._state&&this._start(),this._active.length){let r=!1,i=this._active.length-1,s=!1;if(this._stack.paused&&(i=this._stack.loopPosition-1,r=t,s=this._stack.fallThrough,this._stack.paused=!1),!s&&!1===r){for(;i>=0&&(r=this._active[i].end(e),!0!==r);i--)if(r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!1,r;i--}for(;i>=0;i--)if(r=this._active[i].end(!1),r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!0,r}else this._handlerFb(this._id,"END",e);this._active=n,this._id=-1,this._state=0}}},t.OscHandler=class{constructor(e){this._handler=e,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(e,t,r){this._hitLimit||(this._data+=(0,s.utf32ToString)(e,t,r),this._data.length>i.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data),t instanceof Promise))return t.then(e=>(this._data="",this._hitLimit=!1,e));return this._data="",this._hitLimit=!1,t}}},8742:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Params=void 0;const r=2147483647;class i{static fromArray(e){const t=new i;if(!e.length)return t;for(let r=Array.isArray(e[0])?1:0;r<e.length;++r){const i=e[r];if(Array.isArray(i))for(let e=0;e<i.length;++e)t.addSubParam(i[e]);else t.addParam(i)}return t}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32;if(this.maxLength=e,this.maxSubParamsLength=t,t>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(e),this.length=0,this._subParams=new Int32Array(t),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(e),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const e=new i(this.maxLength,this.maxSubParamsLength);return e.params.set(this.params),e.length=this.length,e._subParams.set(this._subParams),e._subParamsLength=this._subParamsLength,e._subParamsIdx.set(this._subParamsIdx),e._rejectDigits=this._rejectDigits,e._rejectSubDigits=this._rejectSubDigits,e._digitIsSub=this._digitIsSub,e}toArray(){const e=[];for(let t=0;t<this.length;++t){e.push(this.params[t]);const r=this._subParamsIdx[t]>>8,i=255&this._subParamsIdx[t];i-r>0&&e.push(Array.prototype.slice.call(this._subParams,r,i))}return e}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(e){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=e>r?r:e}}addSubParam(e){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=e>r?r:e,this._subParamsIdx[this.length-1]++}}hasSubParams(e){return(255&this._subParamsIdx[e])-(this._subParamsIdx[e]>>8)>0}getSubParams(e){const t=this._subParamsIdx[e]>>8,r=255&this._subParamsIdx[e];return r-t>0?this._subParams.subarray(t,r):null}getSubParamsAll(){const e={};for(let t=0;t<this.length;++t){const r=this._subParamsIdx[t]>>8,i=255&this._subParamsIdx[t];i-r>0&&(e[t]=this._subParams.slice(r,i))}return e}addDigit(e){let t;if(this._rejectDigits||!(t=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const i=this._digitIsSub?this._subParams:this.params,s=i[t-1];i[t-1]=~s?Math.min(10*s+e,r):e}}t.Params=i},5741:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AddonManager=void 0,t.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let e=this._addons.length-1;e>=0;e--)this._addons[e].instance.dispose()}loadAddon(e,t){const r={instance:t,dispose:t.dispose,isDisposed:!1};this._addons.push(r),t.dispose=()=>this._wrappedAddonDispose(r),t.activate(e)}_wrappedAddonDispose(e){if(e.isDisposed)return;let t=-1;for(let r=0;r<this._addons.length;r++)if(this._addons[r]===e){t=r;break}if(-1===t)throw new Error("Could not dispose an addon that has not been loaded");e.isDisposed=!0,e.dispose.apply(e.instance),this._addons.splice(t,1)}}},8771:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferApiView=void 0;const i=r(3785),s=r(511);t.BufferApiView=class{constructor(e,t){this._buffer=e,this.type=t}init(e){return this._buffer=e,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(e){const t=this._buffer.lines.get(e);if(t)return new i.BufferLineApiView(t)}getNullCell(){return new s.CellData}}},3785:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLineApiView=void 0;const i=r(511);t.BufferLineApiView=class{constructor(e){this._line=e}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(e,t){if(!(e<0||e>=this._line.length))return t?(this._line.loadCell(e,t),t):this._line.loadCell(e,new i.CellData)}translateToString(e,t,r){return this._line.translateToString(e,t,r)}}},8285:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferNamespaceApi=void 0;const i=r(8771),s=r(8460),n=r(844);class o extends n.Disposable{constructor(e){super(),this._core=e,this._onBufferChange=this.register(new s.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new i.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new i.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}t.BufferNamespaceApi=o},7975:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ParserApi=void 0,t.ParserApi=class{constructor(e){this._core=e}registerCsiHandler(e,t){return this._core.registerCsiHandler(e,e=>t(e.toArray()))}addCsiHandler(e,t){return this.registerCsiHandler(e,t)}registerDcsHandler(e,t){return this._core.registerDcsHandler(e,(e,r)=>t(e,r.toArray()))}addDcsHandler(e,t){return this.registerDcsHandler(e,t)}registerEscHandler(e,t){return this._core.registerEscHandler(e,t)}addEscHandler(e,t){return this.registerEscHandler(e,t)}registerOscHandler(e,t){return this._core.registerOscHandler(e,t)}addOscHandler(e,t){return this.registerOscHandler(e,t)}}},7090:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeApi=void 0,t.UnicodeApi=class{constructor(e){this._core=e}register(e){this._core.unicodeService.register(e)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(e){this._core.unicodeService.activeVersion=e}}},744:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferService=t.MINIMUM_ROWS=t.MINIMUM_COLS=void 0;const n=r(8460),o=r(844),a=r(5295),l=r(2585);t.MINIMUM_COLS=2,t.MINIMUM_ROWS=1;let c=t.BufferService=class extends o.Disposable{get buffer(){return this.buffers.active}constructor(e){super(),this.isUserScrolling=!1,this._onResize=this.register(new n.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new n.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(e.rawOptions.cols||0,t.MINIMUM_COLS),this.rows=Math.max(e.rawOptions.rows||0,t.MINIMUM_ROWS),this.buffers=this.register(new a.BufferSet(e,this))}resize(e,t){this.cols=e,this.rows=t,this.buffers.resize(e,t),this._onResize.fire({cols:e,rows:t})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=this.buffer;let i;i=this._cachedBlankLine,i&&i.length===this.cols&&i.getFg(0)===e.fg&&i.getBg(0)===e.bg||(i=r.getBlankLine(e,t),this._cachedBlankLine=i),i.isWrapped=t;const s=r.ybase+r.scrollTop,n=r.ybase+r.scrollBottom;if(0===r.scrollTop){const e=r.lines.isFull;n===r.lines.length-1?e?r.lines.recycle().copyFrom(i):r.lines.push(i.clone()):r.lines.splice(n+1,0,i.clone()),e?this.isUserScrolling&&(r.ydisp=Math.max(r.ydisp-1,0)):(r.ybase++,this.isUserScrolling||r.ydisp++)}else{const e=n-s+1;r.lines.shiftElements(s+1,e-1,-1),r.lines.set(n,i.clone())}this.isUserScrolling||(r.ydisp=r.ybase),this._onScroll.fire(r.ydisp)}scrollLines(e,t,r){const i=this.buffer;if(e<0){if(0===i.ydisp)return;this.isUserScrolling=!0}else e+i.ydisp>=i.ybase&&(this.isUserScrolling=!1);const s=i.ydisp;i.ydisp=Math.max(Math.min(i.ydisp+e,i.ybase),0),s!==i.ydisp&&(t||this._onScroll.fire(i.ydisp))}};t.BufferService=c=i([s(0,l.IOptionsService)],c)},7994:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CharsetService=void 0,t.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(e){this.glevel=e,this.charset=this._charsets[e]}setgCharset(e,t){this._charsets[e]=t,this.glevel===e&&(this.charset=t)}}},1753:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreMouseService=void 0;const n=r(2585),o=r(8460),a=r(844),l={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:e=>4!==e.button&&1===e.action&&(e.ctrl=!1,e.alt=!1,e.shift=!1,!0)},VT200:{events:19,restrict:e=>32!==e.action},DRAG:{events:23,restrict:e=>32!==e.action||3!==e.button},ANY:{events:31,restrict:e=>!0}};function c(e,t){let r=(e.ctrl?16:0)|(e.shift?4:0)|(e.alt?8:0);return 4===e.button?(r|=64,r|=e.action):(r|=3&e.button,4&e.button&&(r|=64),8&e.button&&(r|=128),32===e.action?r|=32:0!==e.action||t||(r|=3)),r}const u=String.fromCharCode,h={DEFAULT:e=>{const t=[c(e,!1)+32,e.col+32,e.row+32];return t[0]>255||t[1]>255||t[2]>255?"":"\x1b[M".concat(u(t[0])).concat(u(t[1])).concat(u(t[2]))},SGR:e=>{const t=0===e.action&&4!==e.button?"m":"M";return"\x1b[<".concat(c(e,!0),";").concat(e.col,";").concat(e.row).concat(t)},SGR_PIXELS:e=>{const t=0===e.action&&4!==e.button?"m":"M";return"\x1b[<".concat(c(e,!0),";").concat(e.x,";").concat(e.y).concat(t)}};let d=t.CoreMouseService=class extends a.Disposable{constructor(e,t){super(),this._bufferService=e,this._coreService=t,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new o.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const r of Object.keys(l))this.addProtocol(r,l[r]);for(const r of Object.keys(h))this.addEncoding(r,h[r]);this.reset()}addProtocol(e,t){this._protocols[e]=t}addEncoding(e,t){this._encodings[e]=t}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return 0!==this._protocols[this._activeProtocol].events}set activeProtocol(e){if(!this._protocols[e])throw new Error('unknown protocol "'.concat(e,'"'));this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(e){if(!this._encodings[e])throw new Error('unknown encoding "'.concat(e,'"'));this._activeEncoding=e}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows)return!1;if(4===e.button&&32===e.action)return!1;if(3===e.button&&32!==e.action)return!1;if(4!==e.button&&(2===e.action||3===e.action))return!1;if(e.col++,e.row++,32===e.action&&this._lastEvent&&this._equalEvents(this._lastEvent,e,"SGR_PIXELS"===this._activeEncoding))return!1;if(!this._protocols[this._activeProtocol].restrict(e))return!1;const t=this._encodings[this._activeEncoding](e);return t&&("DEFAULT"===this._activeEncoding?this._coreService.triggerBinaryEvent(t):this._coreService.triggerDataEvent(t,!0)),this._lastEvent=e,!0}explainEvents(e){return{down:!!(1&e),up:!!(2&e),drag:!!(4&e),move:!!(8&e),wheel:!!(16&e)}}_equalEvents(e,t,r){if(r){if(e.x!==t.x)return!1;if(e.y!==t.y)return!1}else{if(e.col!==t.col)return!1;if(e.row!==t.row)return!1}return e.button===t.button&&e.action===t.action&&e.ctrl===t.ctrl&&e.alt===t.alt&&e.shift===t.shift}};t.CoreMouseService=d=i([s(0,n.IBufferService),s(1,n.ICoreService)],d)},6975:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreService=void 0;const n=r(1439),o=r(8460),a=r(844),l=r(2585),c=Object.freeze({insertMode:!1}),u=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let h=t.CoreService=class extends a.Disposable{constructor(e,t,r){super(),this._bufferService=e,this._logService=t,this._optionsService=r,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new o.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new o.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new o.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new o.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,n.clone)(c),this.decPrivateModes=(0,n.clone)(u)}reset(){this.modes=(0,n.clone)(c),this.decPrivateModes=(0,n.clone)(u)}triggerDataEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._optionsService.rawOptions.disableStdin)return;const r=this._bufferService.buffer;t&&this._optionsService.rawOptions.scrollOnUserInput&&r.ybase!==r.ydisp&&this._onRequestScrollToBottom.fire(),t&&this._onUserInput.fire(),this._logService.debug('sending data "'.concat(e,'"'),()=>e.split("").map(e=>e.charCodeAt(0))),this._onData.fire(e)}triggerBinaryEvent(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug('sending binary "'.concat(e,'"'),()=>e.split("").map(e=>e.charCodeAt(0))),this._onBinary.fire(e))}};t.CoreService=h=i([s(0,l.IBufferService),s(1,l.ILogService),s(2,l.IOptionsService)],h)},9074:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DecorationService=void 0;const i=r(8055),s=r(8460),n=r(844),o=r(6106);let a=0,l=0;class c extends n.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new o.SortedList(e=>null===e||void 0===e?void 0:e.marker.line),this._onDecorationRegistered=this.register(new s.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new s.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,n.toDisposable)(()=>this.reset()))}registerDecoration(e){if(e.marker.isDisposed)return;const t=new u(e);if(t){const e=t.marker.onDispose(()=>t.dispose());t.onDispose(()=>{t&&(this._decorations.delete(t)&&this._onDecorationRemoved.fire(t),e.dispose())}),this._decorations.insert(t),this._onDecorationRegistered.fire(t)}return t}reset(){for(const e of this._decorations.values())e.dispose();this._decorations.clear()}*getDecorationsAtCell(e,t,r){let i=0,s=0;for(const l of this._decorations.getKeyIterator(t)){var n,o,a;i=null!==(n=l.options.x)&&void 0!==n?n:0,s=i+(null!==(o=l.options.width)&&void 0!==o?o:1),e>=i&&e<s&&(!r||(null!==(a=l.options.layer)&&void 0!==a?a:"bottom")===r)&&(yield l)}}forEachDecorationAtCell(e,t,r,i){this._decorations.forEachByKey(t,t=>{var s,n,o;a=null!==(s=t.options.x)&&void 0!==s?s:0,l=a+(null!==(n=t.options.width)&&void 0!==n?n:1),e>=a&&e<l&&(!r||(null!==(o=t.options.layer)&&void 0!==o?o:"bottom")===r)&&i(t)})}}t.DecorationService=c;class u extends n.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return null===this._cachedBg&&(this.options.backgroundColor?this._cachedBg=i.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return null===this._cachedFg&&(this.options.foregroundColor?this._cachedFg=i.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(e){super(),this.options=e,this.onRenderEmitter=this.register(new s.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new s.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=e.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InstantiationService=t.ServiceCollection=void 0;const i=r(2585),s=r(8343);class n{constructor(){this._entries=new Map;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(const[i,s]of t)this.set(i,s)}set(e,t){const r=this._entries.get(e);return this._entries.set(e,t),r}forEach(e){for(const[t,r]of this._entries.entries())e(t,r)}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}t.ServiceCollection=n,t.InstantiationService=class{constructor(){this._services=new n,this._services.set(i.IInstantiationService,this)}setService(e,t){this._services.set(e,t)}getService(e){return this._services.get(e)}createInstance(e){const t=(0,s.getServiceDependencies)(e).sort((e,t)=>e.index-t.index),r=[];for(const s of t){const t=this._services.get(s.id);if(!t)throw new Error("[createInstance] ".concat(e.name," depends on UNKNOWN service ").concat(s.id,"."));r.push(t)}for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];const a=t.length>0?t[0].index:n.length;if(n.length!==a)throw new Error("[createInstance] First service dependency of ".concat(e.name," at position ").concat(a+1," conflicts with ").concat(n.length," static arguments"));return new e(...[...n,...r])}}},7866:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.traceCall=t.setTraceLogger=t.LogService=void 0;const n=r(844),o=r(2585),a={trace:o.LogLevelEnum.TRACE,debug:o.LogLevelEnum.DEBUG,info:o.LogLevelEnum.INFO,warn:o.LogLevelEnum.WARN,error:o.LogLevelEnum.ERROR,off:o.LogLevelEnum.OFF};let l,c=t.LogService=class extends n.Disposable{get logLevel(){return this._logLevel}constructor(e){super(),this._optionsService=e,this._logLevel=o.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),l=this}_updateLogLevel(){this._logLevel=a[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(e){for(let t=0;t<e.length;t++)"function"==typeof e[t]&&(e[t]=e[t]())}_log(e,t,r){this._evalLazyOptionalParams(r),e.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+t,...r)}trace(e){for(var t,r,i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];this._logLevel<=o.LogLevelEnum.TRACE&&this._log(null!==(t=null===(r=this._optionsService.options.logger)||void 0===r?void 0:r.trace.bind(this._optionsService.options.logger))&&void 0!==t?t:console.log,e,s)}debug(e){for(var t,r,i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];this._logLevel<=o.LogLevelEnum.DEBUG&&this._log(null!==(t=null===(r=this._optionsService.options.logger)||void 0===r?void 0:r.debug.bind(this._optionsService.options.logger))&&void 0!==t?t:console.log,e,s)}info(e){for(var t,r,i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];this._logLevel<=o.LogLevelEnum.INFO&&this._log(null!==(t=null===(r=this._optionsService.options.logger)||void 0===r?void 0:r.info.bind(this._optionsService.options.logger))&&void 0!==t?t:console.info,e,s)}warn(e){for(var t,r,i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];this._logLevel<=o.LogLevelEnum.WARN&&this._log(null!==(t=null===(r=this._optionsService.options.logger)||void 0===r?void 0:r.warn.bind(this._optionsService.options.logger))&&void 0!==t?t:console.warn,e,s)}error(e){for(var t,r,i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];this._logLevel<=o.LogLevelEnum.ERROR&&this._log(null!==(t=null===(r=this._optionsService.options.logger)||void 0===r?void 0:r.error.bind(this._optionsService.options.logger))&&void 0!==t?t:console.error,e,s)}};t.LogService=c=i([s(0,o.IOptionsService)],c),t.setTraceLogger=function(e){l=e},t.traceCall=function(e,t,r){if("function"!=typeof r.value)throw new Error("not supported");const i=r.value;r.value=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(l.logLevel!==o.LogLevelEnum.TRACE)return i.apply(this,t);l.trace("GlyphRenderer#".concat(i.name,"(").concat(t.map(e=>JSON.stringify(e)).join(", "),")"));const s=i.apply(this,t);return l.trace("GlyphRenderer#".concat(i.name," return"),s),s}}},7302:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OptionsService=t.DEFAULT_OPTIONS=void 0;const i=r(8460),n=r(844),o=r(6114);t.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:o.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const a=["normal","bold","100","200","300","400","500","600","700","800","900"];class l extends n.Disposable{constructor(e){super(),this._onOptionChange=this.register(new i.EventEmitter),this.onOptionChange=this._onOptionChange.event;const r=s({},t.DEFAULT_OPTIONS);for(const t in e)if(t in r)try{const i=e[t];r[t]=this._sanitizeAndValidateOption(t,i)}catch(e){console.error(e)}this.rawOptions=r,this.options=s({},r),this._setupOptions(),this.register((0,n.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(e,t){return this.onOptionChange(r=>{r===e&&t(this.rawOptions[e])})}onMultipleOptionChange(e,t){return this.onOptionChange(r=>{-1!==e.indexOf(r)&&t()})}_setupOptions(){const e=e=>{if(!(e in t.DEFAULT_OPTIONS))throw new Error('No option with key "'.concat(e,'"'));return this.rawOptions[e]},r=(e,r)=>{if(!(e in t.DEFAULT_OPTIONS))throw new Error('No option with key "'.concat(e,'"'));r=this._sanitizeAndValidateOption(e,r),this.rawOptions[e]!==r&&(this.rawOptions[e]=r,this._onOptionChange.fire(e))};for(const t in this.rawOptions){const i={get:e.bind(this,t),set:r.bind(this,t)};Object.defineProperty(this.options,t,i)}}_sanitizeAndValidateOption(e,r){switch(e){case"cursorStyle":if(r||(r=t.DEFAULT_OPTIONS[e]),!function(e){return"block"===e||"underline"===e||"bar"===e}(r))throw new Error('"'.concat(r,'" is not a valid value for ').concat(e));break;case"wordSeparator":r||(r=t.DEFAULT_OPTIONS[e]);break;case"fontWeight":case"fontWeightBold":if("number"==typeof r&&1<=r&&r<=1e3)break;r=a.includes(r)?r:t.DEFAULT_OPTIONS[e];break;case"cursorWidth":r=Math.floor(r);case"lineHeight":case"tabStopWidth":if(r<1)throw new Error("".concat(e," cannot be less than 1, value: ").concat(r));break;case"minimumContrastRatio":r=Math.max(1,Math.min(21,Math.round(10*r)/10));break;case"scrollback":if((r=Math.min(r,4294967295))<0)throw new Error("".concat(e," cannot be less than 0, value: ").concat(r));break;case"fastScrollSensitivity":case"scrollSensitivity":if(r<=0)throw new Error("".concat(e," cannot be less than or equal to 0, value: ").concat(r));break;case"rows":case"cols":if(!r&&0!==r)throw new Error("".concat(e," must be numeric, value: ").concat(r));break;case"windowsPty":r=null!==r&&void 0!==r?r:{}}return r}}t.OptionsService=l},2660:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.OscLinkService=void 0;const n=r(2585);let o=t.OscLinkService=class{constructor(e){this._bufferService=e,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(e){const t=this._bufferService.buffer;if(void 0===e.id){const r=t.addMarker(t.ybase+t.y),i={data:e,id:this._nextId++,lines:[r]};return r.onDispose(()=>this._removeMarkerFromLink(i,r)),this._dataByLinkId.set(i.id,i),i.id}const r=e,i=this._getEntryIdKey(r),s=this._entriesWithId.get(i);if(s)return this.addLineToLink(s.id,t.ybase+t.y),s.id;const n=t.addMarker(t.ybase+t.y),o={id:this._nextId++,key:this._getEntryIdKey(r),data:r,lines:[n]};return n.onDispose(()=>this._removeMarkerFromLink(o,n)),this._entriesWithId.set(o.key,o),this._dataByLinkId.set(o.id,o),o.id}addLineToLink(e,t){const r=this._dataByLinkId.get(e);if(r&&r.lines.every(e=>e.line!==t)){const e=this._bufferService.buffer.addMarker(t);r.lines.push(e),e.onDispose(()=>this._removeMarkerFromLink(r,e))}}getLinkData(e){var t;return null===(t=this._dataByLinkId.get(e))||void 0===t?void 0:t.data}_getEntryIdKey(e){return"".concat(e.id,";;").concat(e.uri)}_removeMarkerFromLink(e,t){const r=e.lines.indexOf(t);-1!==r&&(e.lines.splice(r,1),0===e.lines.length&&(void 0!==e.data.id&&this._entriesWithId.delete(e.key),this._dataByLinkId.delete(e.id)))}};t.OscLinkService=o=i([s(0,n.IBufferService)],o)},8343:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createDecorator=t.getServiceDependencies=t.serviceRegistry=void 0;const r="di$target",i="di$dependencies";t.serviceRegistry=new Map,t.getServiceDependencies=function(e){return e[i]||[]},t.createDecorator=function(e){if(t.serviceRegistry.has(e))return t.serviceRegistry.get(e);const s=function(e,t,n){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");!function(e,t,s){t[r]===t?t[i].push({id:e,index:s}):(t[i]=[{id:e,index:s}],t[r]=t)}(s,e,n)};return s.toString=()=>e,t.serviceRegistry.set(e,s),s}},2585:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IDecorationService=t.IUnicodeService=t.IOscLinkService=t.IOptionsService=t.ILogService=t.LogLevelEnum=t.IInstantiationService=t.ICharsetService=t.ICoreService=t.ICoreMouseService=t.IBufferService=void 0;const i=r(8343);var s;t.IBufferService=(0,i.createDecorator)("BufferService"),t.ICoreMouseService=(0,i.createDecorator)("CoreMouseService"),t.ICoreService=(0,i.createDecorator)("CoreService"),t.ICharsetService=(0,i.createDecorator)("CharsetService"),t.IInstantiationService=(0,i.createDecorator)("InstantiationService"),function(e){e[e.TRACE=0]="TRACE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.OFF=5]="OFF"}(s||(t.LogLevelEnum=s={})),t.ILogService=(0,i.createDecorator)("LogService"),t.IOptionsService=(0,i.createDecorator)("OptionsService"),t.IOscLinkService=(0,i.createDecorator)("OscLinkService"),t.IUnicodeService=(0,i.createDecorator)("UnicodeService"),t.IDecorationService=(0,i.createDecorator)("DecorationService")},1480:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeService=void 0;const i=r(8460),s=r(225);class n{static extractShouldJoin(e){return 0!=(1&e)}static extractWidth(e){return e>>1&3}static extractCharKind(e){return e>>3}static createPropertyValue(e,t){return(16777215&e)<<3|(3&t)<<1|(arguments.length>2&&void 0!==arguments[2]&&arguments[2]?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new i.EventEmitter,this.onChange=this._onChange.event;const e=new s.UnicodeV6;this.register(e),this._active=e.version,this._activeProvider=e}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(e){if(!this._providers[e])throw new Error('unknown Unicode version "'.concat(e,'"'));this._active=e,this._activeProvider=this._providers[e],this._onChange.fire(e)}register(e){this._providers[e.version]=e}wcwidth(e){return this._activeProvider.wcwidth(e)}getStringCellWidth(e){let t=0,r=0;const i=e.length;for(let s=0;s<i;++s){let o=e.charCodeAt(s);if(55296<=o&&o<=56319){if(++s>=i)return t+this.wcwidth(o);const r=e.charCodeAt(s);56320<=r&&r<=57343?o=1024*(o-55296)+r-56320+65536:t+=this.wcwidth(r)}const a=this.charProperties(o,r);let l=n.extractWidth(a);n.extractShouldJoin(a)&&(l-=n.extractWidth(r)),t+=l,r=a}return t}charProperties(e,t){return this._activeProvider.charProperties(e,t)}}t.UnicodeService=n}},t={};function r(i){var s=t[i];if(void 0!==s)return s.exports;var n=t[i]={exports:{}};return e[i].call(n.exports,n,n.exports,r),n.exports}var i={};return(()=>{var e=i;Object.defineProperty(e,"__esModule",{value:!0}),e.Terminal=void 0;const t=r(9042),n=r(3236),o=r(844),a=r(5741),l=r(8285),c=r(7975),u=r(7090),h=["cols","rows"];class d extends o.Disposable{constructor(e){super(),this._core=this.register(new n.Terminal(e)),this._addonManager=this.register(new a.AddonManager),this._publicOptions=s({},this._core.options);const t=e=>this._core.options[e],r=(e,t)=>{this._checkReadonlyOptions(e),this._core.options[e]=t};for(const i in this._core.options){const e={get:t.bind(this,i),set:r.bind(this,i)};Object.defineProperty(this._publicOptions,i,e)}}_checkReadonlyOptions(e){if(h.includes(e))throw new Error('Option "'.concat(e,'" can only be set in the constructor'))}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new c.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new u.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new l.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const e=this._core.coreService.decPrivateModes;let t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any"}return{applicationCursorKeysMode:e.applicationCursorKeys,applicationKeypadMode:e.applicationKeypad,bracketedPasteMode:e.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:e.origin,reverseWraparoundMode:e.reverseWraparound,sendFocusMode:e.sendFocus,wraparoundMode:e.wraparound}}get options(){return this._publicOptions}set options(e){for(const t in e)this._publicOptions[t]=e[t]}blur(){this._core.blur()}focus(){this._core.focus()}input(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._core.input(e,t)}resize(e,t){this._verifyIntegers(e,t),this._core.resize(e,t)}open(e){this._core.open(e)}attachCustomKeyEventHandler(e){this._core.attachCustomKeyEventHandler(e)}attachCustomWheelEventHandler(e){this._core.attachCustomWheelEventHandler(e)}registerLinkProvider(e){return this._core.registerLinkProvider(e)}registerCharacterJoiner(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)}deregisterCharacterJoiner(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)}registerMarker(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._verifyIntegers(e),this._core.registerMarker(e)}registerDecoration(e){var t,r,i;return this._checkProposedApi(),this._verifyPositiveIntegers(null!==(t=e.x)&&void 0!==t?t:0,null!==(r=e.width)&&void 0!==r?r:0,null!==(i=e.height)&&void 0!==i?i:0),this._core.registerDecoration(e)}hasSelection(){return this._core.hasSelection()}select(e,t,r){this._verifyIntegers(e,t,r),this._core.select(e,t,r)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(e,t){this._verifyIntegers(e,t),this._core.selectLines(e,t)}dispose(){super.dispose()}scrollLines(e){this._verifyIntegers(e),this._core.scrollLines(e)}scrollPages(e){this._verifyIntegers(e),this._core.scrollPages(e)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(e){this._verifyIntegers(e),this._core.scrollToLine(e)}clear(){this._core.clear()}write(e,t){this._core.write(e,t)}writeln(e,t){this._core.write(e),this._core.write("\r\n",t)}paste(e){this._core.paste(e)}refresh(e,t){this._verifyIntegers(e,t),this._core.refresh(e,t)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(e){this._addonManager.loadAddon(this,e)}static get strings(){return t}_verifyIntegers(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(const i of t)if(i===1/0||isNaN(i)||i%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(const i of t)if(i&&(i===1/0||isNaN(i)||i%1!=0||i<0))throw new Error("This API only accepts positive integers")}}e.Terminal=d})(),i})(),e.exports=i()},77:e=>{var t;self,t=()=>(()=>{"use strict";var e={};return(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0,t.FitAddon=class{activate(e){this._terminal=e}dispose(){}fit(){const e=this.proposeDimensions();if(!e||!this._terminal||isNaN(e.cols)||isNaN(e.rows))return;const t=this._terminal._core;this._terminal.rows===e.rows&&this._terminal.cols===e.cols||(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}proposeDimensions(){if(!this._terminal)return;if(!this._terminal.element||!this._terminal.element.parentElement)return;const e=this._terminal._core,t=e._renderService.dimensions;if(0===t.css.cell.width||0===t.css.cell.height)return;const r=0===this._terminal.options.scrollback?0:e.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),s=parseInt(i.getPropertyValue("height")),n=Math.max(0,parseInt(i.getPropertyValue("width"))),o=window.getComputedStyle(this._terminal.element),a=s-(parseInt(o.getPropertyValue("padding-top"))+parseInt(o.getPropertyValue("padding-bottom"))),l=n-(parseInt(o.getPropertyValue("padding-right"))+parseInt(o.getPropertyValue("padding-left")))-r;return{cols:Math.max(2,Math.floor(l/t.css.cell.width)),rows:Math.max(1,Math.floor(a/t.css.cell.height))}}}})(),e})(),e.exports=t()},153:(e,t,r)=>{"use strict";var i=r(43),s=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var i,n={},c=null,u=null;for(i in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,i)&&!l.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===n[i]&&(n[i]=t[i]);return{$$typeof:s,type:e,key:c,ref:u,props:n,_owner:a.current}}t.Fragment=n,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var r=Symbol.for("react.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,_={};function m(e,t,r){this.props=e,this.context=t,this.refs=_,this.updater=r||p}function v(){}function y(e,t,r){this.props=e,this.context=t,this.refs=_,this.updater=r||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=m.prototype;var w=y.prototype=new v;w.constructor=y,g(w,m.prototype),w.isPureReactComponent=!0;var b=Array.isArray,S=Object.prototype.hasOwnProperty,x={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,i){var s,n={},o=null,a=null;if(null!=t)for(s in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,s)&&!C.hasOwnProperty(s)&&(n[s]=t[s]);var l=arguments.length-2;if(1===l)n.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];n.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===n[s]&&(n[s]=l[s]);return{$$typeof:r,type:e,key:o,ref:a,props:n,_owner:x.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var R=/\/+/g;function L(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(e,t,s,n,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case i:l=!0}}if(l)return o=o(l=e),e=""===n?"."+L(l,0):n,b(o)?(s="",null!=e&&(s=e.replace(R,"$&/")+"/"),A(o,t,s,"",function(e){return e})):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,s+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(R,"$&/")+"/")+e)),t.push(o)),1;if(l=0,n=""===n?".":n+":",b(e))for(var c=0;c<e.length;c++){var u=n+L(a=e[c],c);l+=A(a,t,s,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,s,u=n+L(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,r){if(null==e)return e;var i=[],s=0;return A(e,i,"","",function(e){return t.call(r,e,s++)}),i}function j(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},D={transition:null},P={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:D,ReactCurrentOwner:x};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,r){T(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=s,t.Profiler=o,t.PureComponent=y,t.StrictMode=n,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.act=M,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=g({},e.props),n=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=x.current),void 0!==t.key&&(n=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!C.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:r,type:e.type,key:n,ref:o,props:s,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:j}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return N.current.useCallback(e,t)},t.useContext=function(e){return N.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return N.current.useDeferredValue(e)},t.useEffect=function(e,t){return N.current.useEffect(e,t)},t.useId=function(){return N.current.useId()},t.useImperativeHandle=function(e,t,r){return N.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.current.useMemo(e,t)},t.useReducer=function(e,t,r){return N.current.useReducer(e,t,r)},t.useRef=function(e){return N.current.useRef(e)},t.useState=function(e){return N.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return N.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return N.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var i=r-1>>>1,s=e[i];if(!(0<n(s,t)))break e;e[i]=t,e[r]=s,r=i}}function i(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var i=0,s=e.length,o=s>>>1;i<o;){var a=2*(i+1)-1,l=e[a],c=a+1,u=e[c];if(0>n(l,r))c<s&&0>n(u,l)?(e[i]=u,e[c]=r,i=c):(e[i]=l,e[a]=r,i=a);else{if(!(c<s&&0>n(u,r)))break e;e[i]=u,e[c]=r,i=c}}}return t}function n(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,_=!1,m="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=i(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,r(c,t)}t=i(u)}}function b(e){if(_=!1,w(e),!g)if(null!==i(c))g=!0,D(S);else{var t=i(u);null!==t&&P(b,t.startTime-e)}}function S(e,r){g=!1,_&&(_=!1,v(E),E=-1),p=!0;var n=f;try{for(w(r),d=i(c);null!==d&&(!(d.expirationTime>r)||e&&!A());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=r);r=t.unstable_now(),"function"===typeof a?d.callback=a:d===i(c)&&s(c),w(r)}else s(c);d=i(c)}if(null!==d)var l=!0;else{var h=i(u);null!==h&&P(b,h.startTime-r),l=!1}return l}finally{d=null,f=n,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,C=!1,k=null,E=-1,R=5,L=-1;function A(){return!(t.unstable_now()-L<R)}function T(){if(null!==k){var e=t.unstable_now();L=e;var r=!0;try{r=k(!0,e)}finally{r?x():(C=!1,k=null)}}else C=!1}if("function"===typeof y)x=function(){y(T)};else if("undefined"!==typeof MessageChannel){var j=new MessageChannel,N=j.port2;j.port1.onmessage=T,x=function(){N.postMessage(null)}}else x=function(){m(T,0)};function D(e){k=e,C||(C=!0,x())}function P(e,r){E=m(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,D(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var r=f;f=t;try{return e()}finally{f=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=f;f=e;try{return t()}finally{f=r}},t.unstable_scheduleCallback=function(e,s,n){var o=t.unstable_now();switch("object"===typeof n&&null!==n?n="number"===typeof(n=n.delay)&&0<n?o+n:o:n=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:s,priorityLevel:e,startTime:n,expirationTime:a=n+a,sortIndex:-1},n>o?(e.sortIndex=n,r(u,e),null===i(c)&&e===i(u)&&(_?(v(E),E=-1):_=!0,P(b,n-o))):(e.sortIndex=a,r(c,e),g||p||(g=!0,D(S))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var r=f;f=t;try{return e.apply(this,arguments)}finally{f=r}}}},284:(e,t,r)=>{"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}r.d(t,{A:()=>i})},391:(e,t,r)=>{"use strict";var i=r(950);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},579:(e,t,r)=>{"use strict";e.exports=r(153)},677:(e,t,r)=>{"use strict";r.d(t,{K:()=>Lt});var i={};function s(e,t){return function(){return e.apply(t,arguments)}}r.r(i),r.d(i,{hasBrowserEnv:()=>ue,hasStandardBrowserEnv:()=>de,hasStandardBrowserWebWorkerEnv:()=>fe,navigator:()=>he,origin:()=>pe});const{toString:n}=Object.prototype,{getPrototypeOf:o}=Object,{iterator:a,toStringTag:l}=Symbol,c=(u=Object.create(null),e=>{const t=n.call(e);return u[t]||(u[t]=t.slice(8,-1).toLowerCase())});var u;const h=e=>(e=e.toLowerCase(),t=>c(t)===e),d=e=>t=>typeof t===e,{isArray:f}=Array,p=d("undefined");function g(e){return null!==e&&!p(e)&&null!==e.constructor&&!p(e.constructor)&&v(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const _=h("ArrayBuffer");const m=d("string"),v=d("function"),y=d("number"),w=e=>null!==e&&"object"===typeof e,b=e=>{if("object"!==c(e))return!1;const t=o(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(l in e)&&!(a in e)},S=h("Date"),x=h("File"),C=h("Blob"),k=h("FileList"),E=h("URLSearchParams"),[R,L,A,T]=["ReadableStream","Request","Response","Headers"].map(h);function j(e,t){let r,i,{allOwnKeys:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),f(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{if(g(e))return;const i=s?Object.getOwnPropertyNames(e):Object.keys(e),n=i.length;let o;for(r=0;r<n;r++)o=i[r],t.call(null,e[o],o,e)}}function N(e,t){if(g(e))return null;t=t.toLowerCase();const r=Object.keys(e);let i,s=r.length;for(;s-- >0;)if(i=r[s],t===i.toLowerCase())return i;return null}const D="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,P=e=>!p(e)&&e!==D;const M=(O="undefined"!==typeof Uint8Array&&o(Uint8Array),e=>O&&e instanceof O);var O;const I=h("HTMLFormElement"),B=(e=>{let{hasOwnProperty:t}=e;return(e,r)=>t.call(e,r)})(Object.prototype),H=h("RegExp"),U=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),i={};j(r,(r,s)=>{let n;!1!==(n=t(r,s,e))&&(i[s]=n||r)}),Object.defineProperties(e,i)};const F=h("AsyncFunction"),W=((e,t)=>{return e?setImmediate:t?(r="axios@".concat(Math.random()),i=[],D.addEventListener("message",e=>{let{source:t,data:s}=e;t===D&&s===r&&i.length&&i.shift()()},!1),e=>{i.push(e),D.postMessage(r,"*")}):e=>setTimeout(e);var r,i})("function"===typeof setImmediate,v(D.postMessage)),z="undefined"!==typeof queueMicrotask?queueMicrotask.bind(D):"undefined"!==typeof process&&process.nextTick||W,q={isArray:f,isArrayBuffer:_,isBuffer:g,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||v(e.append)&&("formdata"===(t=c(e))||"object"===t&&v(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&_(e.buffer),t},isString:m,isNumber:y,isBoolean:e=>!0===e||!1===e,isObject:w,isPlainObject:b,isEmptyObject:e=>{if(!w(e)||g(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:R,isRequest:L,isResponse:A,isHeaders:T,isUndefined:p,isDate:S,isFile:x,isBlob:C,isRegExp:H,isFunction:v,isStream:e=>w(e)&&v(e.pipe),isURLSearchParams:E,isTypedArray:M,isFileList:k,forEach:j,merge:function e(){const{caseless:t,skipUndefined:r}=P(this)&&this||{},i={},s=(s,n)=>{const o=t&&N(i,n)||n;b(i[o])&&b(s)?i[o]=e(i[o],s):b(s)?i[o]=e({},s):f(s)?i[o]=s.slice():r&&p(s)||(i[o]=s)};for(let n=0,o=arguments.length;n<o;n++)arguments[n]&&j(arguments[n],s);return i},extend:function(e,t,r){let{allOwnKeys:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return j(t,(t,i)=>{r&&v(t)?e[i]=s(t,r):e[i]=t},{allOwnKeys:i}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,i)=>{let s,n,a;const l={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),n=s.length;n-- >0;)a=s[n],i&&!i(a,e,t)||l[a]||(t[a]=e[a],l[a]=!0);e=!1!==r&&o(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:c,kindOfTest:h,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const i=e.indexOf(t,r);return-1!==i&&i===r},toArray:e=>{if(!e)return null;if(f(e))return e;let t=e.length;if(!y(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[a]).call(e);let i;for(;(i=r.next())&&!i.done;){const r=i.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const i=[];for(;null!==(r=e.exec(t));)i.push(r);return i},isHTMLForm:I,hasOwnProperty:B,hasOwnProp:B,reduceDescriptors:U,freezeMethods:e=>{U(e,(t,r)=>{if(v(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const i=e[r];v(i)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{const r={},i=e=>{e.forEach(e=>{r[e]=!0})};return f(e)?i(e):i(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:N,global:D,isContextDefined:P,isSpecCompliantForm:function(e){return!!(e&&v(e.append)&&"FormData"===e[l]&&e[a])},toJSONObject:e=>{const t=new Array(10),r=(e,i)=>{if(w(e)){if(t.indexOf(e)>=0)return;if(g(e))return e;if(!("toJSON"in e)){t[i]=e;const s=f(e)?[]:{};return j(e,(e,t)=>{const n=r(e,i+1);!p(n)&&(s[t]=n)}),t[i]=void 0,s}}return e};return r(e,0)},isAsyncFn:F,isThenable:e=>e&&(w(e)||v(e))&&v(e.then)&&v(e.catch),setImmediate:W,asap:z,isIterable:e=>null!=e&&v(e[a])};function K(e,t,r,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}q.inherits(K,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:q.toJSONObject(this.config),code:this.code,status:this.status}}});const V=K.prototype,G={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{G[e]={value:e}}),Object.defineProperties(K,G),Object.defineProperty(V,"isAxiosError",{value:!0}),K.from=(e,t,r,i,s,n)=>{const o=Object.create(V);q.toFlatObject(e,o,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const a=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return K.call(o,a,l,r,i,s),e&&null==o.cause&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",n&&Object.assign(o,n),o};const J=K;function $(e){return q.isPlainObject(e)||q.isArray(e)}function X(e){return q.endsWith(e,"[]")?e.slice(0,-2):e}function Q(e,t,r){return e?e.concat(t).map(function(e,t){return e=X(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}const Y=q.toFlatObject(q,{},null,function(e){return/^is[A-Z]/.test(e)});const Z=function(e,t,r){if(!q.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const i=(r=q.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!q.isUndefined(t[e])})).metaTokens,s=r.visitor||c,n=r.dots,o=r.indexes,a=(r.Blob||"undefined"!==typeof Blob&&Blob)&&q.isSpecCompliantForm(t);if(!q.isFunction(s))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(q.isDate(e))return e.toISOString();if(q.isBoolean(e))return e.toString();if(!a&&q.isBlob(e))throw new J("Blob is not supported. Use a Buffer instead.");return q.isArrayBuffer(e)||q.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,s){let a=e;if(e&&!s&&"object"===typeof e)if(q.endsWith(r,"{}"))r=i?r:r.slice(0,-2),e=JSON.stringify(e);else if(q.isArray(e)&&function(e){return q.isArray(e)&&!e.some($)}(e)||(q.isFileList(e)||q.endsWith(r,"[]"))&&(a=q.toArray(e)))return r=X(r),a.forEach(function(e,i){!q.isUndefined(e)&&null!==e&&t.append(!0===o?Q([r],i,n):null===o?r:r+"[]",l(e))}),!1;return!!$(e)||(t.append(Q(s,r,n),l(e)),!1)}const u=[],h=Object.assign(Y,{defaultVisitor:c,convertValue:l,isVisitable:$});if(!q.isObject(e))throw new TypeError("data must be an object");return function e(r,i){if(!q.isUndefined(r)){if(-1!==u.indexOf(r))throw Error("Circular reference detected in "+i.join("."));u.push(r),q.forEach(r,function(r,n){!0===(!(q.isUndefined(r)||null===r)&&s.call(t,r,q.isString(n)?n.trim():n,i,h))&&e(r,i?i.concat(n):[n])}),u.pop()}}(e),t};function ee(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function te(e,t){this._pairs=[],e&&Z(e,this,t)}const re=te.prototype;re.append=function(e,t){this._pairs.push([e,t])},re.toString=function(e){const t=e?function(t){return e.call(this,t,ee)}:ee;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const ie=te;function se(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ne(e,t,r){if(!t)return e;const i=r&&r.encode||se;q.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let n;if(n=s?s(t,r):q.isURLSearchParams(t)?t.toString():new ie(t,r).toString(i),n){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}const oe=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){q.forEach(this.handlers,function(t){null!==t&&e(t)})}},ae={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var le=r(8);const ce={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:ie,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},ue="undefined"!==typeof window&&"undefined"!==typeof document,he="object"===typeof navigator&&navigator||void 0,de=ue&&(!he||["ReactNative","NativeScript","NS"].indexOf(he.product)<0),fe="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,pe=ue&&window.location.href||"http://localhost",ge=(0,le.A)((0,le.A)({},i),ce);const _e=function(e){function t(e,r,i,s){let n=e[s++];if("__proto__"===n)return!0;const o=Number.isFinite(+n),a=s>=e.length;if(n=!n&&q.isArray(i)?i.length:n,a)return q.hasOwnProp(i,n)?i[n]=[i[n],r]:i[n]=r,!o;i[n]&&q.isObject(i[n])||(i[n]=[]);return t(e,r,i[n],s)&&q.isArray(i[n])&&(i[n]=function(e){const t={},r=Object.keys(e);let i;const s=r.length;let n;for(i=0;i<s;i++)n=r[i],t[n]=e[n];return t}(i[n])),!o}if(q.isFormData(e)&&q.isFunction(e.entries)){const r={};return q.forEachEntry(e,(e,i)=>{t(function(e){return q.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),i,r,0)}),r}return null};const me={transitional:ae,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=q.isObject(e);s&&q.isHTMLForm(e)&&(e=new FormData(e));if(q.isFormData(e))return i?JSON.stringify(_e(e)):e;if(q.isArrayBuffer(e)||q.isBuffer(e)||q.isStream(e)||q.isFile(e)||q.isBlob(e)||q.isReadableStream(e))return e;if(q.isArrayBufferView(e))return e.buffer;if(q.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let n;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Z(e,new ge.classes.URLSearchParams,(0,le.A)({visitor:function(e,t,r,i){return ge.isNode&&q.isBuffer(e)?(this.append(t,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=q.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Z(n?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),function(e,t,r){if(q.isString(e))try{return(t||JSON.parse)(e),q.trim(e)}catch(i){if("SyntaxError"!==i.name)throw i}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||me.transitional,r=t&&t.forcedJSONParsing,i="json"===this.responseType;if(q.isResponse(e)||q.isReadableStream(e))return e;if(e&&q.isString(e)&&(r&&!this.responseType||i)){const r=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(s){if(r){if("SyntaxError"===s.name)throw J.from(s,J.ERR_BAD_RESPONSE,this,null,this.response);throw s}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ge.classes.FormData,Blob:ge.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};q.forEach(["delete","get","head","post","put","patch"],e=>{me.headers[e]={}});const ve=me,ye=q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),we=Symbol("internals");function be(e){return e&&String(e).trim().toLowerCase()}function Se(e){return!1===e||null==e?e:q.isArray(e)?e.map(Se):String(e)}function xe(e,t,r,i,s){return q.isFunction(i)?i.call(this,t,r):(s&&(t=r),q.isString(t)?q.isString(i)?-1!==t.indexOf(i):q.isRegExp(i)?i.test(t):void 0:void 0)}class Ce{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function s(e,t,r){const s=be(t);if(!s)throw new Error("header name must be a non-empty string");const n=q.findKey(i,s);(!n||void 0===i[n]||!0===r||void 0===r&&!1!==i[n])&&(i[n||t]=Se(e))}const n=(e,t)=>q.forEach(e,(e,r)=>s(e,r,t));if(q.isPlainObject(e)||e instanceof this.constructor)n(e,t);else if(q.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))n((e=>{const t={};let r,i,s;return e&&e.split("\n").forEach(function(e){s=e.indexOf(":"),r=e.substring(0,s).trim().toLowerCase(),i=e.substring(s+1).trim(),!r||t[r]&&ye[r]||("set-cookie"===r?t[r]?t[r].push(i):t[r]=[i]:t[r]=t[r]?t[r]+", "+i:i)}),t})(e),t);else if(q.isObject(e)&&q.isIterable(e)){let r,i,s={};for(const t of e){if(!q.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[i=t[0]]=(r=s[i])?q.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}n(s,t)}else null!=e&&s(t,e,r);return this}get(e,t){if(e=be(e)){const r=q.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=r.exec(e);)t[i[1]]=i[2];return t}(e);if(q.isFunction(t))return t.call(this,e,r);if(q.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=be(e)){const r=q.findKey(this,e);return!(!r||void 0===this[r]||t&&!xe(0,this[r],r,t))}return!1}delete(e,t){const r=this;let i=!1;function s(e){if(e=be(e)){const s=q.findKey(r,e);!s||t&&!xe(0,r[s],s,t)||(delete r[s],i=!0)}}return q.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];e&&!xe(0,this[s],s,e,!0)||(delete this[s],i=!0)}return i}normalize(e){const t=this,r={};return q.forEach(this,(i,s)=>{const n=q.findKey(r,s);if(n)return t[n]=Se(i),void delete t[s];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}(s):String(s).trim();o!==s&&delete t[s],t[o]=Se(i),r[o]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return q.forEach(this,(r,i)=>{null!=r&&!1!==r&&(t[i]=e&&q.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,r]=e;return t+": "+r}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[we]=this[we]={accessors:{}}).accessors,r=this.prototype;function i(e){const i=be(e);t[i]||(!function(e,t){const r=q.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+r,{value:function(e,r,s){return this[i].call(this,t,e,r,s)},configurable:!0})})}(r,e),t[i]=!0)}return q.isArray(e)?e.forEach(i):i(e),this}}Ce.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),q.reduceDescriptors(Ce.prototype,(e,t)=>{let{value:r}=e,i=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(e){this[i]=e}}}),q.freezeMethods(Ce);const ke=Ce;function Ee(e,t){const r=this||ve,i=t||r,s=ke.from(i.headers);let n=i.data;return q.forEach(e,function(e){n=e.call(r,n,s.normalize(),t?t.status:void 0)}),s.normalize(),n}function Re(e){return!(!e||!e.__CANCEL__)}function Le(e,t,r){J.call(this,null==e?"canceled":e,J.ERR_CANCELED,t,r),this.name="CanceledError"}q.inherits(Le,J,{__CANCEL__:!0});const Ae=Le;function Te(e,t,r){const i=r.config.validateStatus;r.status&&i&&!i(r.status)?t(new J("Request failed with status code "+r.status,[J.ERR_BAD_REQUEST,J.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}const je=function(e,t){e=e||10;const r=new Array(e),i=new Array(e);let s,n=0,o=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=i[o];s||(s=l),r[n]=a,i[n]=l;let u=o,h=0;for(;u!==n;)h+=r[u++],u%=e;if(n=(n+1)%e,n===o&&(o=(o+1)%e),l-s<t)return;const d=c&&l-c;return d?Math.round(1e3*h/d):void 0}};const Ne=function(e,t){let r,i,s=0,n=1e3/t;const o=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();s=n,r=null,i&&(clearTimeout(i),i=null),e(...t)};return[function(){const e=Date.now(),t=e-s;for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];t>=n?o(l,e):(r=l,i||(i=setTimeout(()=>{i=null,o(r)},n-t)))},()=>r&&o(r)]},De=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=0;const s=je(50,250);return Ne(r=>{const n=r.loaded,o=r.lengthComputable?r.total:void 0,a=n-i,l=s(a);i=n;e({loaded:n,total:o,progress:o?n/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&n<=o?(o-n)/l:void 0,event:r,lengthComputable:null!=o,[t?"download":"upload"]:!0})},r)},Pe=(e,t)=>{const r=null!=e;return[i=>t[0]({lengthComputable:r,total:e,loaded:i}),t[1]]},Me=e=>function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return q.asap(()=>e(...r))},Oe=ge.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,ge.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(ge.origin),ge.navigator&&/(msie|trident)/i.test(ge.navigator.userAgent)):()=>!0,Ie=ge.hasStandardBrowserEnv?{write(e,t,r,i,s,n,o){if("undefined"===typeof document)return;const a=["".concat(e,"=").concat(encodeURIComponent(t))];q.isNumber(r)&&a.push("expires=".concat(new Date(r).toUTCString())),q.isString(i)&&a.push("path=".concat(i)),q.isString(s)&&a.push("domain=".concat(s)),!0===n&&a.push("secure"),q.isString(o)&&a.push("SameSite=".concat(o)),document.cookie=a.join("; ")},read(e){if("undefined"===typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function Be(e,t,r){let i=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(i||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const He=e=>e instanceof ke?(0,le.A)({},e):e;function Ue(e,t){t=t||{};const r={};function i(e,t,r,i){return q.isPlainObject(e)&&q.isPlainObject(t)?q.merge.call({caseless:i},e,t):q.isPlainObject(t)?q.merge({},t):q.isArray(t)?t.slice():t}function s(e,t,r,s){return q.isUndefined(t)?q.isUndefined(e)?void 0:i(void 0,e,0,s):i(e,t,0,s)}function n(e,t){if(!q.isUndefined(t))return i(void 0,t)}function o(e,t){return q.isUndefined(t)?q.isUndefined(e)?void 0:i(void 0,e):i(void 0,t)}function a(r,s,n){return n in t?i(r,s):n in e?i(void 0,r):void 0}const l={url:n,method:n,data:n,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t,r)=>s(He(e),He(t),0,!0)};return q.forEach(Object.keys((0,le.A)((0,le.A)({},e),t)),function(i){const n=l[i]||s,o=n(e[i],t[i],i);q.isUndefined(o)&&n!==a||(r[i]=o)}),r}const Fe=e=>{const t=Ue({},e);let{data:r,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:n,headers:o,auth:a}=t;if(t.headers=o=ke.from(o),t.url=ne(Be(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),q.isFormData(r))if(ge.hasStandardBrowserEnv||ge.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(q.isFunction(r.getHeaders)){const e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[r,i]=e;t.includes(r.toLowerCase())&&o.set(r,i)})}if(ge.hasStandardBrowserEnv&&(i&&q.isFunction(i)&&(i=i(t)),i||!1!==i&&Oe(t.url))){const e=s&&n&&Ie.read(n);e&&o.set(s,e)}return t},We="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){const i=Fe(e);let s=i.data;const n=ke.from(i.headers).normalize();let o,a,l,c,u,{responseType:h,onUploadProgress:d,onDownloadProgress:f}=i;function p(){c&&c(),u&&u(),i.cancelToken&&i.cancelToken.unsubscribe(o),i.signal&&i.signal.removeEventListener("abort",o)}let g=new XMLHttpRequest;function _(){if(!g)return;const i=ke.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());Te(function(e){t(e),p()},function(e){r(e),p()},{data:h&&"text"!==h&&"json"!==h?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:i,config:e,request:g}),g=null}g.open(i.method.toUpperCase(),i.url,!0),g.timeout=i.timeout,"onloadend"in g?g.onloadend=_:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(_)},g.onabort=function(){g&&(r(new J("Request aborted",J.ECONNABORTED,e,g)),g=null)},g.onerror=function(t){const i=t&&t.message?t.message:"Network Error",s=new J(i,J.ERR_NETWORK,e,g);s.event=t||null,r(s),g=null},g.ontimeout=function(){let t=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const s=i.transitional||ae;i.timeoutErrorMessage&&(t=i.timeoutErrorMessage),r(new J(t,s.clarifyTimeoutError?J.ETIMEDOUT:J.ECONNABORTED,e,g)),g=null},void 0===s&&n.setContentType(null),"setRequestHeader"in g&&q.forEach(n.toJSON(),function(e,t){g.setRequestHeader(t,e)}),q.isUndefined(i.withCredentials)||(g.withCredentials=!!i.withCredentials),h&&"json"!==h&&(g.responseType=i.responseType),f&&([l,u]=De(f,!0),g.addEventListener("progress",l)),d&&g.upload&&([a,c]=De(d),g.upload.addEventListener("progress",a),g.upload.addEventListener("loadend",c)),(i.cancelToken||i.signal)&&(o=t=>{g&&(r(!t||t.type?new Ae(null,e,g):t),g.abort(),g=null)},i.cancelToken&&i.cancelToken.subscribe(o),i.signal&&(i.signal.aborted?o():i.signal.addEventListener("abort",o)));const m=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(i.url);m&&-1===ge.protocols.indexOf(m)?r(new J("Unsupported protocol "+m+":",J.ERR_BAD_REQUEST,e)):g.send(s||null)})},ze=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,i=new AbortController;const s=function(e){if(!r){r=!0,o();const t=e instanceof Error?e:this.reason;i.abort(t instanceof J?t:new Ae(t instanceof Error?t.message:t))}};let n=t&&setTimeout(()=>{n=null,s(new J("timeout ".concat(t," of ms exceeded"),J.ETIMEDOUT))},t);const o=()=>{e&&(n&&clearTimeout(n),n=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)}),e=null)};e.forEach(e=>e.addEventListener("abort",s));const{signal:a}=i;return a.unsubscribe=()=>q.asap(o),a}};function qe(e,t){this.v=e,this.k=t}function Ke(e){return function(){return new Ve(e.apply(this,arguments))}}function Ve(e){var t,r;function i(t,r){try{var n=e[t](r),o=n.value,a=o instanceof qe;Promise.resolve(a?o.v:o).then(function(r){if(a){var l="return"===t?"return":"next";if(!o.k||r.done)return i(l,r);r=e[l](r).value}s(n.done?"return":"normal",r)},function(e){i("throw",e)})}catch(e){s("throw",e)}}function s(e,s){switch(e){case"return":t.resolve({value:s,done:!0});break;case"throw":t.reject(s);break;default:t.resolve({value:s,done:!1})}(t=t.next)?i(t.key,t.arg):r=null}this._invoke=function(e,s){return new Promise(function(n,o){var a={key:e,arg:s,resolve:n,reject:o,next:null};r?r=r.next=a:(t=r=a,i(e,s))})},"function"!=typeof e.return&&(this.return=void 0)}function Ge(e){return new qe(e,0)}function Je(e){var t={},r=!1;function i(t,i){return r=!0,i=new Promise(function(r){r(e[t](i))}),{done:!1,value:new qe(i,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return r?(r=!1,e):i("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(r)throw r=!1,e;return i("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return r?(r=!1,e):i("return",e)}),t}function $e(e){var t,r,i,s=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,i=Symbol.iterator);s--;){if(r&&null!=(t=e[r]))return t.call(e);if(i&&null!=(t=e[i]))return new Xe(t.call(e));r="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function Xe(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return Xe=function(e){this.s=e,this.n=e.next},Xe.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new Xe(e)}Ve.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Ve.prototype.next=function(e){return this._invoke("next",e)},Ve.prototype.throw=function(e){return this._invoke("throw",e)},Ve.prototype.return=function(e){return this._invoke("return",e)};const Qe=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let i,s=0;for(;s<r;)i=s+t,yield e.slice(s,i),s=i},Ye=function(){var e=Ke(function*(e,t){var r,i=!1,s=!1;try{for(var n,o=$e(Ze(e));i=!(n=yield Ge(o.next())).done;i=!1){const e=n.value;yield*Je($e(Qe(e,t)))}}catch(a){s=!0,r=a}finally{try{i&&null!=o.return&&(yield Ge(o.return()))}finally{if(s)throw r}}});return function(t,r){return e.apply(this,arguments)}}(),Ze=function(){var e=Ke(function*(e){if(e[Symbol.asyncIterator])return void(yield*Je($e(e)));const t=e.getReader();try{for(;;){const{done:e,value:r}=yield Ge(t.read());if(e)break;yield r}}finally{yield Ge(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),et=(e,t,r,i)=>{const s=Ye(e,t);let n,o=0,a=e=>{n||(n=!0,i&&i(e))};return new ReadableStream({async pull(e){try{const{done:t,value:i}=await s.next();if(t)return a(),void e.close();let n=i.byteLength;if(r){let e=o+=n;r(e)}e.enqueue(new Uint8Array(i))}catch(t){throw a(t),t}},cancel:e=>(a(e),s.return())},{highWaterMark:2})},{isFunction:tt}=q,rt=(e=>{let{Request:t,Response:r}=e;return{Request:t,Response:r}})(q.global),{ReadableStream:it,TextEncoder:st}=q.global,nt=function(e){try{for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return!!e(...r)}catch(s){return!1}},ot=e=>{e=q.merge.call({skipUndefined:!0},rt,e);const{fetch:t,Request:r,Response:i}=e,s=t?tt(t):"function"===typeof fetch,n=tt(r),o=tt(i);if(!s)return!1;const a=s&&tt(it),l=s&&("function"===typeof st?(c=new st,e=>c.encode(e)):async e=>new Uint8Array(await new r(e).arrayBuffer()));var c;const u=n&&a&&nt(()=>{let e=!1;const t=new r(ge.origin,{body:new it,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),h=o&&a&&nt(()=>q.isReadableStream(new i("").body)),d={stream:h&&(e=>e.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!d[e]&&(d[e]=(t,r)=>{let i=t&&t[e];if(i)return i.call(t);throw new J("Response type '".concat(e,"' is not supported"),J.ERR_NOT_SUPPORT,r)})});const f=async(e,t)=>{const i=q.toFiniteNumber(e.getContentLength());return null==i?(async e=>{if(null==e)return 0;if(q.isBlob(e))return e.size;if(q.isSpecCompliantForm(e)){const t=new r(ge.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return q.isArrayBufferView(e)||q.isArrayBuffer(e)?e.byteLength:(q.isURLSearchParams(e)&&(e+=""),q.isString(e)?(await l(e)).byteLength:void 0)})(t):i};return async e=>{let{url:s,method:o,data:a,signal:l,cancelToken:c,timeout:p,onDownloadProgress:g,onUploadProgress:_,responseType:m,headers:v,withCredentials:y="same-origin",fetchOptions:w}=Fe(e),b=t||fetch;m=m?(m+"").toLowerCase():"text";let S=ze([l,c&&c.toAbortSignal()],p),x=null;const C=S&&S.unsubscribe&&(()=>{S.unsubscribe()});let k;try{if(_&&u&&"get"!==o&&"head"!==o&&0!==(k=await f(v,a))){let e,t=new r(s,{method:"POST",body:a,duplex:"half"});if(q.isFormData(a)&&(e=t.headers.get("content-type"))&&v.setContentType(e),t.body){const[e,r]=Pe(k,De(Me(_)));a=et(t.body,65536,e,r)}}q.isString(y)||(y=y?"include":"omit");const t=n&&"credentials"in r.prototype,l=(0,le.A)((0,le.A)({},w),{},{signal:S,method:o.toUpperCase(),headers:v.normalize().toJSON(),body:a,duplex:"half",credentials:t?y:void 0});x=n&&new r(s,l);let c=await(n?b(x,w):b(s,l));const p=h&&("stream"===m||"response"===m);if(h&&(g||p&&C)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=q.toFiniteNumber(c.headers.get("content-length")),[r,s]=g&&Pe(t,De(Me(g),!0))||[];c=new i(et(c.body,65536,r,()=>{s&&s(),C&&C()}),e)}m=m||"text";let E=await d[q.findKey(d,m)||"text"](c,e);return!p&&C&&C(),await new Promise((t,r)=>{Te(t,r,{data:E,headers:ke.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:x})})}catch(E){if(C&&C(),E&&"TypeError"===E.name&&/Load failed|fetch/i.test(E.message))throw Object.assign(new J("Network Error",J.ERR_NETWORK,e,x),{cause:E.cause||E});throw J.from(E,E&&E.code,e,x)}}},at=new Map,lt=e=>{let t=e&&e.env||{};const{fetch:r,Request:i,Response:s}=t,n=[i,s,r];let o,a,l=n.length,c=at;for(;l--;)o=n[l],a=c.get(o),void 0===a&&c.set(o,a=l?new Map:ot(t)),c=a;return a},ct=(lt(),{http:null,xhr:We,fetch:{get:lt}});q.forEach(ct,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(r){}Object.defineProperty(e,"adapterName",{value:t})}});const ut=e=>"- ".concat(e),ht=e=>q.isFunction(e)||null===e||!1===e;const dt={getAdapter:function(e,t){e=q.isArray(e)?e:[e];const{length:r}=e;let i,s;const n={};for(let o=0;o<r;o++){let r;if(i=e[o],s=i,!ht(i)&&(s=ct[(r=String(i)).toLowerCase()],void 0===s))throw new J("Unknown adapter '".concat(r,"'"));if(s&&(q.isFunction(s)||(s=s.get(t))))break;n[r||"#"+o]=s}if(!s){const e=Object.entries(n).map(e=>{let[t,r]=e;return"adapter ".concat(t," ")+(!1===r?"is not supported by the environment":"is not available in the build")});let t=r?e.length>1?"since :\n"+e.map(ut).join("\n"):" "+ut(e[0]):"as no adapter specified";throw new J("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return s},adapters:ct};function ft(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ae(null,e)}function pt(e){ft(e),e.headers=ke.from(e.headers),e.data=Ee.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return dt.getAdapter(e.adapter||ve.adapter,e)(e).then(function(t){return ft(e),t.data=Ee.call(e,e.transformResponse,t),t.headers=ke.from(t.headers),t},function(t){return Re(t)||(ft(e),t&&t.response&&(t.response.data=Ee.call(e,e.transformResponse,t.response),t.response.headers=ke.from(t.response.headers))),Promise.reject(t)})}const gt="1.13.2",_t={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{_t[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const mt={};_t.transitional=function(e,t,r){function i(e,t){return"[Axios v"+gt+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,s,n)=>{if(!1===e)throw new J(i(s," has been removed"+(t?" in "+t:"")),J.ERR_DEPRECATED);return t&&!mt[s]&&(mt[s]=!0,console.warn(i(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,s,n)}},_t.spelling=function(e){return(t,r)=>(console.warn("".concat(r," is likely a misspelling of ").concat(e)),!0)};const vt={assertOptions:function(e,t,r){if("object"!==typeof e)throw new J("options must be an object",J.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let s=i.length;for(;s-- >0;){const n=i[s],o=t[n];if(o){const t=e[n],r=void 0===t||o(t,n,e);if(!0!==r)throw new J("option "+n+" must be "+r,J.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new J("Unknown option "+n,J.ERR_BAD_OPTION)}},validators:_t},yt=vt.validators;class wt{constructor(e){this.defaults=e||{},this.interceptors={request:new oe,response:new oe}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{r.stack?t&&!String(r.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+t):r.stack=t}catch(i){}}throw r}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Ue(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;void 0!==r&&vt.assertOptions(r,{silentJSONParsing:yt.transitional(yt.boolean),forcedJSONParsing:yt.transitional(yt.boolean),clarifyTimeoutError:yt.transitional(yt.boolean)},!1),null!=i&&(q.isFunction(i)?t.paramsSerializer={serialize:i}:vt.assertOptions(i,{encode:yt.function,serialize:yt.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),vt.assertOptions(t,{baseUrl:yt.spelling("baseURL"),withXsrfToken:yt.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let n=s&&q.merge(s.common,s[t.method]);s&&q.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=ke.concat(n,s);const o=[];let a=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let u,h=0;if(!a){const e=[pt.bind(this),void 0];for(e.unshift(...o),e.push(...l),u=e.length,c=Promise.resolve(t);h<u;)c=c.then(e[h++],e[h++]);return c}u=o.length;let d=t;for(;h<u;){const e=o[h++],t=o[h++];try{d=e(d)}catch(f){t.call(this,f);break}}try{c=pt.call(this,d)}catch(f){return Promise.reject(f)}for(h=0,u=l.length;h<u;)c=c.then(l[h++],l[h++]);return c}getUri(e){return ne(Be((e=Ue(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}q.forEach(["delete","get","head","options"],function(e){wt.prototype[e]=function(t,r){return this.request(Ue(r||{},{method:e,url:t,data:(r||{}).data}))}}),q.forEach(["post","put","patch"],function(e){function t(t){return function(r,i,s){return this.request(Ue(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:i}))}}wt.prototype[e]=t(),wt.prototype[e+"Form"]=t(!0)});const bt=wt;class St{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;const i=new Promise(e=>{r.subscribe(e),t=e}).then(e);return i.cancel=function(){r.unsubscribe(t)},i},e(function(e,i,s){r.reason||(r.reason=new Ae(e,i,s),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new St(function(t){e=t}),cancel:e}}}const xt=St;const Ct={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Ct).forEach(e=>{let[t,r]=e;Ct[r]=t});const kt=Ct;const Et=function e(t){const r=new bt(t),i=s(bt.prototype.request,r);return q.extend(i,bt.prototype,r,{allOwnKeys:!0}),q.extend(i,r,null,{allOwnKeys:!0}),i.create=function(r){return e(Ue(t,r))},i}(ve);Et.Axios=bt,Et.CanceledError=Ae,Et.CancelToken=xt,Et.isCancel=Re,Et.VERSION=gt,Et.toFormData=Z,Et.AxiosError=J,Et.Cancel=Et.CanceledError,Et.all=function(e){return Promise.all(e)},Et.spread=function(e){return function(t){return e.apply(null,t)}},Et.isAxiosError=function(e){return q.isObject(e)&&!0===e.isAxiosError},Et.mergeConfig=Ue,Et.AxiosHeaders=ke,Et.formToJSON=e=>_e(q.isHTMLForm(e)?new FormData(e):e),Et.getAdapter=dt.getAdapter,Et.HttpStatusCode=kt,Et.default=Et;const Rt=Et;const Lt=new class{constructor(){this.client=void 0,this.client=Rt.create({baseURL:"/api",timeout:3e4}),this.client.interceptors.request.use(e=>{const t=(()=>{try{const e=Object.keys(sessionStorage).filter(e=>e.startsWith("oidc.user:"));if(e.length>0){const t=sessionStorage.getItem(e[0]);if(t)return JSON.parse(t).id_token||null}}catch(e){console.warn("Failed to get ID token from storage:",e)}return null})();return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),this.client.interceptors.response.use(e=>e,async e=>{var t;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(window.location.href="/login"),Promise.reject(this.handleApiError(e))})}handleApiError(e){var t;if(null!==(t=e.response)&&void 0!==t&&t.data&&"object"===typeof e.response.data){const t=e.response.data;return{message:t.message||"An error occurred",code:t.code,details:t.details}}return{message:e.message||"Network error"}}async getDashboardStats(){return(await this.client.get("/dashboard/stats")).data}async getGroups(){return(await this.client.get("/groups")).data}async getGroup(e){return(await this.client.get("/groups/".concat(e))).data}async createGroup(e){return(await this.client.post("/groups",e)).data}async updateGroup(e,t){return(await this.client.patch("/groups/".concat(e),t)).data}async deleteGroup(e){await this.client.delete("/groups/".concat(e))}async getGroupMembers(e){return(await this.client.get("/groups/".concat(e,"/members"))).data}async addGroupMember(e,t){await this.client.post("/groups/".concat(e,"/members"),{userId:t})}async removeGroupMember(e,t){await this.client.delete("/groups/".concat(e,"/members/").concat(t))}async getGroupResourceUsage(e){return(await this.client.get("/groups/".concat(e,"/usage"))).data}async getWorkspaces(e){const t=e?{groupId:e}:{};return(await this.client.get("/workspaces",{params:t})).data}async getWorkspace(e){return(await this.client.get("/workspaces/".concat(e))).data}async createWorkspace(e){return(await this.client.post("/workspaces",e)).data}async updateWorkspace(e,t){return(await this.client.patch("/workspaces/".concat(e),t)).data}async deleteWorkspace(e){await this.client.delete("/workspaces/".concat(e))}async performWorkspaceAction(e){return(await this.client.post("/workspaces/".concat(e.workspaceId,"/actions"),{type:e.type})).data}async getWorkspaceMetrics(e){return(await this.client.get("/workspaces/".concat(e,"/metrics"))).data}async getWorkspaceLogs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return(await this.client.get("/workspaces/".concat(e,"/logs"),{params:{lines:t}})).data}async getWorkspaceComponentHealth(e){return(await this.client.get("/workspaces/".concat(e,"/health"))).data}async getUsers(e){const t=e?{nextToken:e}:{};return(await this.client.get("/admin/users",{params:t})).data}async getUser(e){return(await this.client.get("/admin/users/".concat(e))).data}async updateUser(e,t){return(await this.client.patch("/admin/users/".concat(e),t)).data}async deleteUser(e){await this.client.delete("/admin/users/".concat(e))}async addUserToGroup(e,t){return(await this.client.post("/admin/users/".concat(e,"/groups"),{groupId:t})).data}async removeUserFromGroup(e,t){return(await this.client.delete("/admin/users/".concat(e,"/groups/").concat(t))).data}async getAuditLogs(e,t,r,i){const s={startDate:e,endDate:t,userId:r,nextToken:i};return(await this.client.get("/admin/audit-logs",{params:s})).data}async adminGetAllWorkspaces(){return(await this.client.get("/admin/workspaces")).data}async getHealth(){return(await this.client.get("/health")).data}}},693:(e,t,r)=>{var i=r(736);e.exports=function(e,t,r){return(t=i(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},730:(e,t,r)=>{"use strict";var i=r(43),s=r(853);function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,r,i,s,n,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=n,this.removeEmptyString=o}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){_[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];_[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){_[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){_[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){_[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){_[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){_[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){_[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){_[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var m=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function y(e,t,r,i){var s=_.hasOwnProperty(t)?_[t]:null;(null!==s?0!==s.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,i){if(null===t||"undefined"===typeof t||function(e,t,r,i){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,i))return!0;if(i)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,s,i)&&(r=null),i||null===s?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=null===r?3!==s.type&&"":r:(t=s.attributeName,i=s.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(s=s.type)||4===s&&!0===r?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(m,v);_[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(m,v);_[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(m,v);_[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){_[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),_.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){_[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),S=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),R=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var O,I=Object.assign;function B(e){if(void 0===O)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var H=!1;function U(e,t){if(!e||H)return"";H=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),n=i.stack.split("\n"),o=s.length-1,a=n.length-1;1<=o&&0<=a&&s[o]!==n[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==n[a]){if(1!==o||1!==a)do{if(o--,0>--a||s[o]!==n[a]){var l="\n"+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{H=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?B(e):""}function F(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case S:return"Portal";case k:return"Profiler";case C:return"StrictMode";case A:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case R:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case L:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case j:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return W(e(t))}catch(r){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function V(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var s=r.get,n=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){i=""+e,n.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=K(e)?e.checked?"true":"false":e.value),(e=i)!==r&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var r=t.checked;return I({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function X(e,t){var r=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;r=q(null!=t.value?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function Y(e,t){Q(e,t);var r=q(t.value),i=t.type;if(null!=r)"number"===i?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&J(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,i){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&i&&(e[r].defaultSelected=!0)}else{for(r=""+q(r),t=null,s=0;s<e.length;s++){if(e[s].value===r)return e[s].selected=!0,void(i&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(n(91));return I({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(n(92));if(te(r)){if(1<r.length)throw Error(n(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:q(r)}}function ne(e,t){var r=q(t.value),i=q(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=i&&(e.defaultValue=""+i)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function de(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function _e(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var i=0===r.indexOf("--"),s=ge(r,t[r],i);"float"===r&&(r="cssFloat"),i?e.setProperty(r,s):e[r]=s}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var me=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(n(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(n(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(n(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(n(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,xe=null,Ce=null;function ke(e){if(e=vs(e)){if("function"!==typeof Se)throw Error(n(280));var t=e.stateNode;t&&(t=ws(t),Se(e.stateNode,e.type,t))}}function Ee(e){xe?Ce?Ce.push(e):Ce=[e]:xe=e}function Re(){if(xe){var e=xe,t=Ce;if(Ce=xe=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Le(e,t){return e(t)}function Ae(){}var Te=!1;function je(e,t,r){if(Te)return e(t,r);Te=!0;try{return Le(e,t,r)}finally{Te=!1,(null!==xe||null!==Ce)&&(Ae(),Re())}}function Ne(e,t){var r=e.stateNode;if(null===r)return null;var i=ws(r);if(null===i)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(n(231,t,typeof r));return r}var De=!1;if(u)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ue){De=!1}function Me(e,t,r,i,s,n,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var Oe=!1,Ie=null,Be=!1,He=null,Ue={onError:function(e){Oe=!0,Ie=e}};function Fe(e,t,r,i,s,n,o,a,l){Oe=!1,Ie=null,Me.apply(Ue,arguments)}function We(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(We(e)!==e)throw Error(n(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(n(188));return t!==e?null:e}for(var r=e,i=t;;){var s=r.return;if(null===s)break;var o=s.alternate;if(null===o){if(null!==(i=s.return)){r=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return qe(s),e;if(o===i)return qe(s),t;o=o.sibling}throw Error(n(188))}if(r.return!==i.return)r=s,i=o;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,i=o;break}if(l===i){a=!0,i=s,r=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===r){a=!0,r=o,i=s;break}if(l===i){a=!0,i=o,r=s;break}l=l.sibling}if(!a)throw Error(n(189))}}if(r.alternate!==i)throw Error(n(190))}if(3!==r.tag)throw Error(n(188));return r.stateNode.current===r?e:t}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var Ge=s.unstable_scheduleCallback,Je=s.unstable_cancelCallback,$e=s.unstable_shouldYield,Xe=s.unstable_requestPaint,Qe=s.unstable_now,Ye=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,rt=s.unstable_LowPriority,it=s.unstable_IdlePriority,st=null,nt=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,n=e.pingedLanes,o=268435455&r;if(0!==o){var a=o&~s;0!==a?i=ht(a):0!==(n&=o)&&(i=ht(n))}else 0!==(o=r&~s)?i=ht(o):0!==n&&(i=ht(n));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||16===s&&0!==(4194240&n)))return t;if(0!==(4&i)&&(i|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)s=1<<(r=31-ot(t)),i|=e[r],t&=~s;return i}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function _t(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function mt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=r}function vt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-ot(r),s=1<<i;s&t|e[i]&t&&(e[i]|=t),r&=~s}}var yt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,St,xt,Ct,kt,Et=!1,Rt=[],Lt=null,At=null,Tt=null,jt=new Map,Nt=new Map,Dt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Lt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":jt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nt.delete(t.pointerId)}}function Ot(e,t,r,i,s,n){return null===e||e.nativeEvent!==n?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:n,targetContainers:[s]},null!==t&&(null!==(t=vs(t))&&St(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function It(e){var t=ms(e.target);if(null!==t){var r=We(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=ze(r)))return e.blockedOn=t,void kt(e.priority,function(){xt(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=vs(r))&&St(t),e.blockedOn=r,!1;var i=new(r=e.nativeEvent).constructor(r.type,r);we=i,r.target.dispatchEvent(i),we=null,t.shift()}return!0}function Ht(e,t,r){Bt(e)&&r.delete(t)}function Ut(){Et=!1,null!==Lt&&Bt(Lt)&&(Lt=null),null!==At&&Bt(At)&&(At=null),null!==Tt&&Bt(Tt)&&(Tt=null),jt.forEach(Ht),Nt.forEach(Ht)}function Ft(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ut)))}function Wt(e){function t(t){return Ft(t,e)}if(0<Rt.length){Ft(Rt[0],e);for(var r=1;r<Rt.length;r++){var i=Rt[r];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Lt&&Ft(Lt,e),null!==At&&Ft(At,e),null!==Tt&&Ft(Tt,e),jt.forEach(t),Nt.forEach(t),r=0;r<Dt.length;r++)(i=Dt[r]).blockedOn===e&&(i.blockedOn=null);for(;0<Dt.length&&null===(r=Dt[0]).blockedOn;)It(r),null===r.blockedOn&&Dt.shift()}var zt=w.ReactCurrentBatchConfig,qt=!0;function Kt(e,t,r,i){var s=yt,n=zt.transition;zt.transition=null;try{yt=1,Gt(e,t,r,i)}finally{yt=s,zt.transition=n}}function Vt(e,t,r,i){var s=yt,n=zt.transition;zt.transition=null;try{yt=4,Gt(e,t,r,i)}finally{yt=s,zt.transition=n}}function Gt(e,t,r,i){if(qt){var s=$t(e,t,r,i);if(null===s)zi(e,t,i,Jt,r),Mt(e,i);else if(function(e,t,r,i,s){switch(t){case"focusin":return Lt=Ot(Lt,e,t,r,i,s),!0;case"dragenter":return At=Ot(At,e,t,r,i,s),!0;case"mouseover":return Tt=Ot(Tt,e,t,r,i,s),!0;case"pointerover":var n=s.pointerId;return jt.set(n,Ot(jt.get(n)||null,e,t,r,i,s)),!0;case"gotpointercapture":return n=s.pointerId,Nt.set(n,Ot(Nt.get(n)||null,e,t,r,i,s)),!0}return!1}(s,e,t,r,i))i.stopPropagation();else if(Mt(e,i),4&t&&-1<Pt.indexOf(e)){for(;null!==s;){var n=vs(s);if(null!==n&&bt(n),null===(n=$t(e,t,r,i))&&zi(e,t,i,Jt,r),n===s)break;s=n}null!==s&&i.stopPropagation()}else zi(e,t,i,null,r)}}var Jt=null;function $t(e,t,r,i){if(Jt=null,null!==(e=ms(e=be(i))))if(null===(t=We(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ye()){case Ze:return 1;case et:return 4;case tt:case rt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Qt=null,Yt=null,Zt=null;function er(){if(Zt)return Zt;var e,t,r=Yt,i=r.length,s="value"in Qt?Qt.value:Qt.textContent,n=s.length;for(e=0;e<i&&r[e]===s[e];e++);var o=i-e;for(t=1;t<=o&&r[i-t]===s[n-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function ir(){return!1}function sr(e){function t(t,r,i,s,n){for(var o in this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=n,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?rr:ir,this.isPropagationStopped=ir,this}return I(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var nr,or,ar,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=sr(lr),ur=I({},lr,{view:0,detail:0}),hr=sr(ur),dr=I({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ar&&(ar&&"mousemove"===e.type?(nr=e.screenX-ar.screenX,or=e.screenY-ar.screenY):or=nr=0,ar=e),nr)},movementY:function(e){return"movementY"in e?e.movementY:or}}),fr=sr(dr),pr=sr(I({},dr,{dataTransfer:0})),gr=sr(I({},ur,{relatedTarget:0})),_r=sr(I({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),mr=I({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vr=sr(mr),yr=sr(I({},lr,{data:0})),wr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},br={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sr[e])&&!!t[e]}function Cr(){return xr}var kr=I({},ur,{key:function(e){if(e.key){var t=wr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?br[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Er=sr(kr),Rr=sr(I({},dr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Lr=sr(I({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cr})),Ar=sr(I({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tr=I({},dr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jr=sr(Tr),Nr=[9,13,27,32],Dr=u&&"CompositionEvent"in window,Pr=null;u&&"documentMode"in document&&(Pr=document.documentMode);var Mr=u&&"TextEvent"in window&&!Pr,Or=u&&(!Dr||Pr&&8<Pr&&11>=Pr),Ir=String.fromCharCode(32),Br=!1;function Hr(e,t){switch(e){case"keyup":return-1!==Nr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ur(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Fr=!1;var Wr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wr[e.type]:"textarea"===t}function qr(e,t,r,i){Ee(i),0<(t=Ki(t,"onChange")).length&&(r=new cr("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var Kr=null,Vr=null;function Gr(e){Ii(e,0)}function Jr(e){if(G(ys(e)))return e}function $r(e,t){if("change"===e)return t}var Xr=!1;if(u){var Qr;if(u){var Yr="oninput"in document;if(!Yr){var Zr=document.createElement("div");Zr.setAttribute("oninput","return;"),Yr="function"===typeof Zr.oninput}Qr=Yr}else Qr=!1;Xr=Qr&&(!document.documentMode||9<document.documentMode)}function ei(){Kr&&(Kr.detachEvent("onpropertychange",ti),Vr=Kr=null)}function ti(e){if("value"===e.propertyName&&Jr(Vr)){var t=[];qr(t,Vr,e,be(e)),je(Gr,t)}}function ri(e,t,r){"focusin"===e?(ei(),Vr=r,(Kr=t).attachEvent("onpropertychange",ti)):"focusout"===e&&ei()}function ii(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jr(Vr)}function si(e,t){if("click"===e)return Jr(t)}function ni(e,t){if("input"===e||"change"===e)return Jr(t)}var oi="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ai(e,t){if(oi(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var s=r[i];if(!h.call(t,s)||!oi(e[s],t[s]))return!1}return!0}function li(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ci(e,t){var r,i=li(e);for(e=0;i;){if(3===i.nodeType){if(r=e+i.textContent.length,e<=t&&r>=t)return{node:i,offset:t-e};e=r}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=li(i)}}function ui(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ui(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hi(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(i){r=!1}if(!r)break;t=J((e=t.contentWindow).document)}return t}function di(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fi(e){var t=hi(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ui(r.ownerDocument.documentElement,r)){if(null!==i&&di(r))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=r.textContent.length,n=Math.min(i.start,s);i=void 0===i.end?n:Math.min(i.end,s),!e.extend&&n>i&&(s=i,i=n,n=s),s=ci(r,n);var o=ci(r,i);s&&o&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),n>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pi=u&&"documentMode"in document&&11>=document.documentMode,gi=null,_i=null,mi=null,vi=!1;function yi(e,t,r){var i=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;vi||null==gi||gi!==J(i)||("selectionStart"in(i=gi)&&di(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},mi&&ai(mi,i)||(mi=i,0<(i=Ki(_i,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=gi)))}function wi(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var bi={animationend:wi("Animation","AnimationEnd"),animationiteration:wi("Animation","AnimationIteration"),animationstart:wi("Animation","AnimationStart"),transitionend:wi("Transition","TransitionEnd")},Si={},xi={};function Ci(e){if(Si[e])return Si[e];if(!bi[e])return e;var t,r=bi[e];for(t in r)if(r.hasOwnProperty(t)&&t in xi)return Si[e]=r[t];return e}u&&(xi=document.createElement("div").style,"AnimationEvent"in window||(delete bi.animationend.animation,delete bi.animationiteration.animation,delete bi.animationstart.animation),"TransitionEvent"in window||delete bi.transitionend.transition);var ki=Ci("animationend"),Ei=Ci("animationiteration"),Ri=Ci("animationstart"),Li=Ci("transitionend"),Ai=new Map,Ti="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ji(e,t){Ai.set(e,t),l(t,[e])}for(var Ni=0;Ni<Ti.length;Ni++){var Di=Ti[Ni];ji(Di.toLowerCase(),"on"+(Di[0].toUpperCase()+Di.slice(1)))}ji(ki,"onAnimationEnd"),ji(Ei,"onAnimationIteration"),ji(Ri,"onAnimationStart"),ji("dblclick","onDoubleClick"),ji("focusin","onFocus"),ji("focusout","onBlur"),ji(Li,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pi));function Oi(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,i,s,o,a,l,c){if(Fe.apply(this,arguments),Oe){if(!Oe)throw Error(n(198));var u=Ie;Oe=!1,Ie=null,Be||(Be=!0,He=u)}}(i,t,void 0,e),e.currentTarget=null}function Ii(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var i=e[r],s=i.event;i=i.listeners;e:{var n=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==n&&s.isPropagationStopped())break e;Oi(s,a,c),n=l}else for(o=0;o<i.length;o++){if(l=(a=i[o]).instance,c=a.currentTarget,a=a.listener,l!==n&&s.isPropagationStopped())break e;Oi(s,a,c),n=l}}}if(Be)throw e=He,Be=!1,He=null,e}function Bi(e,t){var r=t[ps];void 0===r&&(r=t[ps]=new Set);var i=e+"__bubble";r.has(i)||(Wi(t,e,2,!1),r.add(i))}function Hi(e,t,r){var i=0;t&&(i|=4),Wi(r,e,i,t)}var Ui="_reactListening"+Math.random().toString(36).slice(2);function Fi(e){if(!e[Ui]){e[Ui]=!0,o.forEach(function(t){"selectionchange"!==t&&(Mi.has(t)||Hi(t,!1,e),Hi(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ui]||(t[Ui]=!0,Hi("selectionchange",!1,t))}}function Wi(e,t,r,i){switch(Xt(t)){case 1:var s=Kt;break;case 4:s=Vt;break;default:s=Gt}r=s.bind(null,t,r,e),s=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),i?void 0!==s?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):void 0!==s?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function zi(e,t,r,i,s){var n=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var a=i.stateNode.containerInfo;if(a===s||8===a.nodeType&&a.parentNode===s)break;if(4===o)for(o=i.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;o=o.return}for(;null!==a;){if(null===(o=ms(a)))return;if(5===(l=o.tag)||6===l){i=n=o;continue e}a=a.parentNode}}i=i.return}je(function(){var i=n,s=be(r),o=[];e:{var a=Ai.get(e);if(void 0!==a){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=Er;break;case"focusin":c="focus",l=gr;break;case"focusout":c="blur",l=gr;break;case"beforeblur":case"afterblur":l=gr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Lr;break;case ki:case Ei:case Ri:l=_r;break;case Li:l=Ar;break;case"scroll":l=hr;break;case"wheel":l=jr;break;case"copy":case"cut":case"paste":l=vr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Rr}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=i;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Ne(p,d))&&u.push(qi(p,g,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,r,s),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||r===we||!(c=r.relatedTarget||r.fromElement)||!ms(c)&&!c[fs])&&(l||a)&&(a=s.window===s?s:(a=s.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(c=(c=r.relatedTarget||r.toElement)?ms(c):null)&&(c!==(h=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=fr,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Rr,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:ys(l),f=null==c?a:ys(c),(a=new u(g,p+"leave",l,r,s)).target=h,a.relatedTarget=f,g=null,ms(s)===i&&((u=new u(d,p+"enter",c,r,s)).target=f,u.relatedTarget=h,g=u),h=g,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Vi(f))p++;for(f=0,g=d;g;g=Vi(g))f++;for(;0<p-f;)u=Vi(u),p--;for(;0<f-p;)d=Vi(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Vi(u),d=Vi(d)}u=null}else u=null;null!==l&&Gi(o,a,l,u,!1),null!==c&&null!==h&&Gi(o,h,c,u,!0)}if("select"===(l=(a=i?ys(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var _=$r;else if(zr(a))if(Xr)_=ni;else{_=ii;var m=ri}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(_=si);switch(_&&(_=_(e,i))?qr(o,_,r,s):(m&&m(e,a,i),"focusout"===e&&(m=a._wrapperState)&&m.controlled&&"number"===a.type&&ee(a,"number",a.value)),m=i?ys(i):window,e){case"focusin":(zr(m)||"true"===m.contentEditable)&&(gi=m,_i=i,mi=null);break;case"focusout":mi=_i=gi=null;break;case"mousedown":vi=!0;break;case"contextmenu":case"mouseup":case"dragend":vi=!1,yi(o,r,s);break;case"selectionchange":if(pi)break;case"keydown":case"keyup":yi(o,r,s)}var v;if(Dr)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Fr?Hr(e,r)&&(y="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(y="onCompositionStart");y&&(Or&&"ko"!==r.locale&&(Fr||"onCompositionStart"!==y?"onCompositionEnd"===y&&Fr&&(v=er()):(Yt="value"in(Qt=s)?Qt.value:Qt.textContent,Fr=!0)),0<(m=Ki(i,y)).length&&(y=new yr(y,e,null,r,s),o.push({event:y,listeners:m}),v?y.data=v:null!==(v=Ur(r))&&(y.data=v))),(v=Mr?function(e,t){switch(e){case"compositionend":return Ur(t);case"keypress":return 32!==t.which?null:(Br=!0,Ir);case"textInput":return(e=t.data)===Ir&&Br?null:e;default:return null}}(e,r):function(e,t){if(Fr)return"compositionend"===e||!Dr&&Hr(e,t)?(e=er(),Zt=Yt=Qt=null,Fr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Or&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(i=Ki(i,"onBeforeInput")).length&&(s=new yr("onBeforeInput","beforeinput",null,r,s),o.push({event:s,listeners:i}),s.data=v))}Ii(o,t)})}function qi(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ki(e,t){for(var r=t+"Capture",i=[];null!==e;){var s=e,n=s.stateNode;5===s.tag&&null!==n&&(s=n,null!=(n=Ne(e,r))&&i.unshift(qi(e,n,s)),null!=(n=Ne(e,t))&&i.push(qi(e,n,s))),e=e.return}return i}function Vi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gi(e,t,r,i,s){for(var n=t._reactName,o=[];null!==r&&r!==i;){var a=r,l=a.alternate,c=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==c&&(a=c,s?null!=(l=Ne(r,n))&&o.unshift(qi(r,l,a)):s||null!=(l=Ne(r,n))&&o.push(qi(r,l,a))),r=r.return}0!==o.length&&e.push({event:t,listeners:o})}var Ji=/\r\n?/g,$i=/\u0000|\uFFFD/g;function Xi(e){return("string"===typeof e?e:""+e).replace(Ji,"\n").replace($i,"")}function Qi(e,t,r){if(t=Xi(t),Xi(e)!==t&&r)throw Error(n(425))}function Yi(){}var Zi=null,es=null;function ts(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,is="function"===typeof clearTimeout?clearTimeout:void 0,ss="function"===typeof Promise?Promise:void 0,ns="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ss?function(e){return ss.resolve(null).then(e).catch(os)}:rs;function os(e){setTimeout(function(){throw e})}function as(e,t){var r=t,i=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&8===s.nodeType)if("/$"===(r=s.data)){if(0===i)return e.removeChild(s),void Wt(t);i--}else"$"!==r&&"$?"!==r&&"$!"!==r||i++;r=s}while(r);Wt(t)}function ls(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function cs(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var us=Math.random().toString(36).slice(2),hs="__reactFiber$"+us,ds="__reactProps$"+us,fs="__reactContainer$"+us,ps="__reactEvents$"+us,gs="__reactListeners$"+us,_s="__reactHandles$"+us;function ms(e){var t=e[hs];if(t)return t;for(var r=e.parentNode;r;){if(t=r[fs]||r[hs]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=cs(e);null!==e;){if(r=e[hs])return r;e=cs(e)}return t}r=(e=r).parentNode}return null}function vs(e){return!(e=e[hs]||e[fs])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ys(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(n(33))}function ws(e){return e[ds]||null}var bs=[],Ss=-1;function xs(e){return{current:e}}function Cs(e){0>Ss||(e.current=bs[Ss],bs[Ss]=null,Ss--)}function ks(e,t){Ss++,bs[Ss]=e.current,e.current=t}var Es={},Rs=xs(Es),Ls=xs(!1),As=Es;function Ts(e,t){var r=e.type.contextTypes;if(!r)return Es;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var s,n={};for(s in r)n[s]=t[s];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function js(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ns(){Cs(Ls),Cs(Rs)}function Ds(e,t,r){if(Rs.current!==Es)throw Error(n(168));ks(Rs,t),ks(Ls,r)}function Ps(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return r;for(var s in i=i.getChildContext())if(!(s in t))throw Error(n(108,z(e)||"Unknown",s));return I({},r,i)}function Ms(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Es,As=Rs.current,ks(Rs,e),ks(Ls,Ls.current),!0}function Os(e,t,r){var i=e.stateNode;if(!i)throw Error(n(169));r?(e=Ps(e,t,As),i.__reactInternalMemoizedMergedChildContext=e,Cs(Ls),Cs(Rs),ks(Rs,e)):Cs(Ls),ks(Ls,r)}var Is=null,Bs=!1,Hs=!1;function Us(e){null===Is?Is=[e]:Is.push(e)}function Fs(){if(!Hs&&null!==Is){Hs=!0;var e=0,t=yt;try{var r=Is;for(yt=1;e<r.length;e++){var i=r[e];do{i=i(!0)}while(null!==i)}Is=null,Bs=!1}catch(s){throw null!==Is&&(Is=Is.slice(e+1)),Ge(Ze,Fs),s}finally{yt=t,Hs=!1}}return null}var Ws=[],zs=0,qs=null,Ks=0,Vs=[],Gs=0,Js=null,$s=1,Xs="";function Qs(e,t){Ws[zs++]=Ks,Ws[zs++]=qs,qs=e,Ks=t}function Ys(e,t,r){Vs[Gs++]=$s,Vs[Gs++]=Xs,Vs[Gs++]=Js,Js=e;var i=$s;e=Xs;var s=32-ot(i)-1;i&=~(1<<s),r+=1;var n=32-ot(t)+s;if(30<n){var o=s-s%5;n=(i&(1<<o)-1).toString(32),i>>=o,s-=o,$s=1<<32-ot(t)+s|r<<s|i,Xs=n+e}else $s=1<<n|r<<s|i,Xs=e}function Zs(e){null!==e.return&&(Qs(e,1),Ys(e,1,0))}function en(e){for(;e===qs;)qs=Ws[--zs],Ws[zs]=null,Ks=Ws[--zs],Ws[zs]=null;for(;e===Js;)Js=Vs[--Gs],Vs[Gs]=null,Xs=Vs[--Gs],Vs[Gs]=null,$s=Vs[--Gs],Vs[Gs]=null}var tn=null,rn=null,sn=!1,nn=null;function on(e,t){var r=jc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function an(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,tn=e,rn=ls(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,tn=e,rn=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Js?{id:$s,overflow:Xs}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=jc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,tn=e,rn=null,!0);default:return!1}}function ln(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cn(e){if(sn){var t=rn;if(t){var r=t;if(!an(e,t)){if(ln(e))throw Error(n(418));t=ls(r.nextSibling);var i=tn;t&&an(e,t)?on(i,r):(e.flags=-4097&e.flags|2,sn=!1,tn=e)}}else{if(ln(e))throw Error(n(418));e.flags=-4097&e.flags|2,sn=!1,tn=e}}}function un(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;tn=e}function hn(e){if(e!==tn)return!1;if(!sn)return un(e),sn=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ts(e.type,e.memoizedProps)),t&&(t=rn)){if(ln(e))throw dn(),Error(n(418));for(;t;)on(e,t),t=ls(t.nextSibling)}if(un(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(n(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){rn=ls(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}rn=null}}else rn=tn?ls(e.stateNode.nextSibling):null;return!0}function dn(){for(var e=rn;e;)e=ls(e.nextSibling)}function fn(){rn=tn=null,sn=!1}function pn(e){null===nn?nn=[e]:nn.push(e)}var gn=w.ReactCurrentBatchConfig;function _n(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(n(309));var i=r.stateNode}if(!i)throw Error(n(147,e));var s=i,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=s.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(n(284));if(!r._owner)throw Error(n(290,e))}return e}function mn(e,t){throw e=Object.prototype.toString.call(t),Error(n(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vn(e){return(0,e._init)(e._payload)}function yn(e){function t(t,r){if(e){var i=t.deletions;null===i?(t.deletions=[r],t.flags|=16):i.push(r)}}function r(r,i){if(!e)return null;for(;null!==i;)t(r,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,r,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<r?(t.flags|=2,r):i:(t.flags|=2,r):(t.flags|=1048576,r)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,i){return null===t||6!==t.tag?((t=Ic(r,e.mode,i)).return=e,t):((t=s(t,r)).return=e,t)}function c(e,t,r,i){var n=r.type;return n===x?h(e,t,r.props.children,i,r.key):null!==t&&(t.elementType===n||"object"===typeof n&&null!==n&&n.$$typeof===N&&vn(n)===t.type)?((i=s(t,r.props)).ref=_n(e,t,r),i.return=e,i):((i=Pc(r.type,r.key,r.props,null,e.mode,i)).ref=_n(e,t,r),i.return=e,i)}function u(e,t,r,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Bc(r,e.mode,i)).return=e,t):((t=s(t,r.children||[])).return=e,t)}function h(e,t,r,i,n){return null===t||7!==t.tag?((t=Mc(r,e.mode,i,n)).return=e,t):((t=s(t,r)).return=e,t)}function d(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ic(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(r=Pc(t.type,t.key,t.props,null,e.mode,r)).ref=_n(e,null,t),r.return=e,r;case S:return(t=Bc(t,e.mode,r)).return=e,t;case N:return d(e,(0,t._init)(t._payload),r)}if(te(t)||M(t))return(t=Mc(t,e.mode,r,null)).return=e,t;mn(e,t)}return null}function f(e,t,r,i){var s=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==s?null:l(e,t,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return r.key===s?c(e,t,r,i):null;case S:return r.key===s?u(e,t,r,i):null;case N:return f(e,t,(s=r._init)(r._payload),i)}if(te(r)||M(r))return null!==s?null:h(e,t,r,i,null);mn(e,r)}return null}function p(e,t,r,i,s){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(r)||null,""+i,s);if("object"===typeof i&&null!==i){switch(i.$$typeof){case b:return c(t,e=e.get(null===i.key?r:i.key)||null,i,s);case S:return u(t,e=e.get(null===i.key?r:i.key)||null,i,s);case N:return p(e,t,r,(0,i._init)(i._payload),s)}if(te(i)||M(i))return h(t,e=e.get(r)||null,i,s,null);mn(t,i)}return null}function g(s,n,a,l){for(var c=null,u=null,h=n,g=n=0,_=null;null!==h&&g<a.length;g++){h.index>g?(_=h,h=null):_=h.sibling;var m=f(s,h,a[g],l);if(null===m){null===h&&(h=_);break}e&&h&&null===m.alternate&&t(s,h),n=o(m,n,g),null===u?c=m:u.sibling=m,u=m,h=_}if(g===a.length)return r(s,h),sn&&Qs(s,g),c;if(null===h){for(;g<a.length;g++)null!==(h=d(s,a[g],l))&&(n=o(h,n,g),null===u?c=h:u.sibling=h,u=h);return sn&&Qs(s,g),c}for(h=i(s,h);g<a.length;g++)null!==(_=p(h,s,g,a[g],l))&&(e&&null!==_.alternate&&h.delete(null===_.key?g:_.key),n=o(_,n,g),null===u?c=_:u.sibling=_,u=_);return e&&h.forEach(function(e){return t(s,e)}),sn&&Qs(s,g),c}function _(s,a,l,c){var u=M(l);if("function"!==typeof u)throw Error(n(150));if(null==(l=u.call(l)))throw Error(n(151));for(var h=u=null,g=a,_=a=0,m=null,v=l.next();null!==g&&!v.done;_++,v=l.next()){g.index>_?(m=g,g=null):m=g.sibling;var y=f(s,g,v.value,c);if(null===y){null===g&&(g=m);break}e&&g&&null===y.alternate&&t(s,g),a=o(y,a,_),null===h?u=y:h.sibling=y,h=y,g=m}if(v.done)return r(s,g),sn&&Qs(s,_),u;if(null===g){for(;!v.done;_++,v=l.next())null!==(v=d(s,v.value,c))&&(a=o(v,a,_),null===h?u=v:h.sibling=v,h=v);return sn&&Qs(s,_),u}for(g=i(s,g);!v.done;_++,v=l.next())null!==(v=p(g,s,_,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?_:v.key),a=o(v,a,_),null===h?u=v:h.sibling=v,h=v);return e&&g.forEach(function(e){return t(s,e)}),sn&&Qs(s,_),u}return function e(i,n,o,l){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,u=n;null!==u;){if(u.key===c){if((c=o.type)===x){if(7===u.tag){r(i,u.sibling),(n=s(u,o.props.children)).return=i,i=n;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===N&&vn(c)===u.type){r(i,u.sibling),(n=s(u,o.props)).ref=_n(i,u,o),n.return=i,i=n;break e}r(i,u);break}t(i,u),u=u.sibling}o.type===x?((n=Mc(o.props.children,i.mode,l,o.key)).return=i,i=n):((l=Pc(o.type,o.key,o.props,null,i.mode,l)).ref=_n(i,n,o),l.return=i,i=l)}return a(i);case S:e:{for(u=o.key;null!==n;){if(n.key===u){if(4===n.tag&&n.stateNode.containerInfo===o.containerInfo&&n.stateNode.implementation===o.implementation){r(i,n.sibling),(n=s(n,o.children||[])).return=i,i=n;break e}r(i,n);break}t(i,n),n=n.sibling}(n=Bc(o,i.mode,l)).return=i,i=n}return a(i);case N:return e(i,n,(u=o._init)(o._payload),l)}if(te(o))return g(i,n,o,l);if(M(o))return _(i,n,o,l);mn(i,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==n&&6===n.tag?(r(i,n.sibling),(n=s(n,o)).return=i,i=n):(r(i,n),(n=Ic(o,i.mode,l)).return=i,i=n),a(i)):r(i,n)}}var wn=yn(!0),bn=yn(!1),Sn=xs(null),xn=null,Cn=null,kn=null;function En(){kn=Cn=xn=null}function Rn(e){var t=Sn.current;Cs(Sn),e._currentValue=t}function Ln(e,t,r){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function An(e,t){xn=e,kn=Cn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ya=!0),e.firstContext=null)}function Tn(e){var t=e._currentValue;if(kn!==e)if(e={context:e,memoizedValue:t,next:null},null===Cn){if(null===xn)throw Error(n(308));Cn=e,xn.dependencies={lanes:0,firstContext:e}}else Cn=Cn.next=e;return t}var jn=null;function Nn(e){null===jn?jn=[e]:jn.push(e)}function Dn(e,t,r,i){var s=t.interleaved;return null===s?(r.next=r,Nn(t)):(r.next=s.next,s.next=r),t.interleaved=r,Pn(e,i)}function Pn(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Mn=!1;function On(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function In(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Hn(e,t,r){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Ll)){var s=i.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),i.pending=t,Pn(e,r)}return null===(s=i.interleaved)?(t.next=t,Nn(i)):(t.next=s.next,s.next=t),i.interleaved=t,Pn(e,r)}function Un(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var i=t.lanes;r|=i&=e.pendingLanes,t.lanes=r,vt(e,r)}}function Fn(e,t){var r=e.updateQueue,i=e.alternate;if(null!==i&&r===(i=i.updateQueue)){var s=null,n=null;if(null!==(r=r.firstBaseUpdate)){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===n?s=n=o:n=n.next=o,r=r.next}while(null!==r);null===n?s=n=t:n=n.next=t}else s=n=t;return r={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:n,shared:i.shared,effects:i.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Wn(e,t,r,i){var s=e.updateQueue;Mn=!1;var n=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(null!==a){s.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?n=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==n){var h=s.baseState;for(o=0,u=c=l=null,a=n;;){var d=a.lane,f=a.eventTime;if((i&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,f=r,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break e;h=I({},h,d);break e;case 2:Mn=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=s.effects)?s.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=s.shared.pending))break;a=(d=a).next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}if(null===u&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{o|=s.lane,s=s.next}while(s!==t)}else null===n&&(s.shared.lanes=0);Ol|=o,e.lanes=o,e.memoizedState=h}}function zn(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],s=i.callback;if(null!==s){if(i.callback=null,i=r,"function"!==typeof s)throw Error(n(191,s));s.call(i)}}}var qn={},Kn=xs(qn),Vn=xs(qn),Gn=xs(qn);function Jn(e){if(e===qn)throw Error(n(174));return e}function $n(e,t){switch(ks(Gn,t),ks(Vn,e),ks(Kn,qn),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Cs(Kn),ks(Kn,t)}function Xn(){Cs(Kn),Cs(Vn),Cs(Gn)}function Qn(e){Jn(Gn.current);var t=Jn(Kn.current),r=le(t,e.type);t!==r&&(ks(Vn,e),ks(Kn,r))}function Yn(e){Vn.current===e&&(Cs(Kn),Cs(Vn))}var Zn=xs(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function ro(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var io=w.ReactCurrentDispatcher,so=w.ReactCurrentBatchConfig,no=0,oo=null,ao=null,lo=null,co=!1,uo=!1,ho=0,fo=0;function po(){throw Error(n(321))}function go(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!oi(e[r],t[r]))return!1;return!0}function _o(e,t,r,i,s,o){if(no=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.current=null===e||null===e.memoizedState?Zo:ea,e=r(i,s),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(n(301));o+=1,lo=ao=null,t.updateQueue=null,io.current=ta,e=r(i,s)}while(uo)}if(io.current=Yo,t=null!==ao&&null!==ao.next,no=0,lo=ao=oo=null,co=!1,t)throw Error(n(300));return e}function mo(){var e=0!==ho;return ho=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function yo(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(n(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function wo(e,t){return"function"===typeof t?t(e):t}function bo(e){var t=yo(),r=t.queue;if(null===r)throw Error(n(311));r.lastRenderedReducer=e;var i=ao,s=i.baseQueue,o=r.pending;if(null!==o){if(null!==s){var a=s.next;s.next=o.next,o.next=a}i.baseQueue=s=o,r.pending=null}if(null!==s){o=s.next,i=i.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((no&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=i):c=c.next=d,oo.lanes|=h,Ol|=h}u=u.next}while(null!==u&&u!==o);null===c?a=i:c.next=l,oi(i,t.memoizedState)||(ya=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=c,r.lastRenderedState=i}if(null!==(e=r.interleaved)){s=e;do{o=s.lane,oo.lanes|=o,Ol|=o,s=s.next}while(s!==e)}else null===s&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function So(e){var t=yo(),r=t.queue;if(null===r)throw Error(n(311));r.lastRenderedReducer=e;var i=r.dispatch,s=r.pending,o=t.memoizedState;if(null!==s){r.pending=null;var a=s=s.next;do{o=e(o,a.action),a=a.next}while(a!==s);oi(o,t.memoizedState)||(ya=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),r.lastRenderedState=o}return[o,i]}function xo(){}function Co(e,t){var r=oo,i=yo(),s=t(),o=!oi(i.memoizedState,s);if(o&&(i.memoizedState=s,ya=!0),i=i.queue,Oo(Ro.bind(null,r,i,e),[e]),i.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(r.flags|=2048,jo(9,Eo.bind(null,r,i,s,t),void 0,null),null===Al)throw Error(n(349));0!==(30&no)||ko(r,t,s)}return s}function ko(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Eo(e,t,r,i){t.value=r,t.getSnapshot=i,Lo(t)&&Ao(e)}function Ro(e,t,r){return r(function(){Lo(t)&&Ao(e)})}function Lo(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!oi(e,r)}catch(i){return!0}}function Ao(e){var t=Pn(e,1);null!==t&&rc(t,e,1,-1)}function To(e){var t=vo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Jo.bind(null,oo,e),[t.memoizedState,e]}function jo(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e),e}function No(){return yo().memoizedState}function Do(e,t,r,i){var s=vo();oo.flags|=e,s.memoizedState=jo(1|t,r,void 0,void 0===i?null:i)}function Po(e,t,r,i){var s=yo();i=void 0===i?null:i;var n=void 0;if(null!==ao){var o=ao.memoizedState;if(n=o.destroy,null!==i&&go(i,o.deps))return void(s.memoizedState=jo(t,r,n,i))}oo.flags|=e,s.memoizedState=jo(1|t,r,n,i)}function Mo(e,t){return Do(8390656,8,e,t)}function Oo(e,t){return Po(2048,8,e,t)}function Io(e,t){return Po(4,2,e,t)}function Bo(e,t){return Po(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Uo(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Po(4,4,Ho.bind(null,t,e),r)}function Fo(){}function Wo(e,t){var r=yo();t=void 0===t?null:t;var i=r.memoizedState;return null!==i&&null!==t&&go(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function zo(e,t){var r=yo();t=void 0===t?null:t;var i=r.memoizedState;return null!==i&&null!==t&&go(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function qo(e,t,r){return 0===(21&no)?(e.baseState&&(e.baseState=!1,ya=!0),e.memoizedState=r):(oi(r,t)||(r=gt(),oo.lanes|=r,Ol|=r,e.baseState=!0),t)}function Ko(e,t){var r=yt;yt=0!==r&&4>r?r:4,e(!0);var i=so.transition;so.transition={};try{e(!1),t()}finally{yt=r,so.transition=i}}function Vo(){return yo().memoizedState}function Go(e,t,r){var i=tc(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},$o(e))Xo(t,r);else if(null!==(r=Dn(e,t,r,i))){rc(r,e,i,ec()),Qo(r,t,i)}}function Jo(e,t,r){var i=tc(e),s={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if($o(e))Xo(t,s);else{var n=e.alternate;if(0===e.lanes&&(null===n||0===n.lanes)&&null!==(n=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=n(o,r);if(s.hasEagerState=!0,s.eagerState=a,oi(a,o)){var l=t.interleaved;return null===l?(s.next=s,Nn(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(r=Dn(e,t,s,i))&&(rc(r,e,i,s=ec()),Qo(r,t,i))}}function $o(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Xo(e,t){uo=co=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Qo(e,t,r){if(0!==(4194240&r)){var i=t.lanes;r|=i&=e.pendingLanes,t.lanes=r,vt(e,r)}}var Yo={readContext:Tn,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Zo={readContext:Tn,useCallback:function(e,t){return vo().memoizedState=[e,void 0===t?null:t],e},useContext:Tn,useEffect:Mo,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Do(4194308,4,Ho.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Do(4194308,4,e,t)},useInsertionEffect:function(e,t){return Do(4,2,e,t)},useMemo:function(e,t){var r=vo();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=vo();return t=void 0!==r?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Go.bind(null,oo,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:To,useDebugValue:Fo,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=To(!1),t=e[0];return e=Ko.bind(null,e[1]),vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=oo,s=vo();if(sn){if(void 0===r)throw Error(n(407));r=r()}else{if(r=t(),null===Al)throw Error(n(349));0!==(30&no)||ko(i,t,r)}s.memoizedState=r;var o={value:r,getSnapshot:t};return s.queue=o,Mo(Ro.bind(null,i,o,e),[e]),i.flags|=2048,jo(9,Eo.bind(null,i,o,r,t),void 0,null),r},useId:function(){var e=vo(),t=Al.identifierPrefix;if(sn){var r=Xs;t=":"+t+"R"+(r=($s&~(1<<32-ot($s)-1)).toString(32)+r),0<(r=ho++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Tn,useCallback:Wo,useContext:Tn,useEffect:Oo,useImperativeHandle:Uo,useInsertionEffect:Io,useLayoutEffect:Bo,useMemo:zo,useReducer:bo,useRef:No,useState:function(){return bo(wo)},useDebugValue:Fo,useDeferredValue:function(e){return qo(yo(),ao.memoizedState,e)},useTransition:function(){return[bo(wo)[0],yo().memoizedState]},useMutableSource:xo,useSyncExternalStore:Co,useId:Vo,unstable_isNewReconciler:!1},ta={readContext:Tn,useCallback:Wo,useContext:Tn,useEffect:Oo,useImperativeHandle:Uo,useInsertionEffect:Io,useLayoutEffect:Bo,useMemo:zo,useReducer:So,useRef:No,useState:function(){return So(wo)},useDebugValue:Fo,useDeferredValue:function(e){var t=yo();return null===ao?t.memoizedState=e:qo(t,ao.memoizedState,e)},useTransition:function(){return[So(wo)[0],yo().memoizedState]},useMutableSource:xo,useSyncExternalStore:Co,useId:Vo,unstable_isNewReconciler:!1};function ra(e,t){if(e&&e.defaultProps){for(var r in t=I({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function ia(e,t,r,i){r=null===(r=r(i,t=e.memoizedState))||void 0===r?t:I({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var sa={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=ec(),s=tc(e),n=Bn(i,s);n.payload=t,void 0!==r&&null!==r&&(n.callback=r),null!==(t=Hn(e,n,s))&&(rc(t,e,s,i),Un(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=ec(),s=tc(e),n=Bn(i,s);n.tag=1,n.payload=t,void 0!==r&&null!==r&&(n.callback=r),null!==(t=Hn(e,n,s))&&(rc(t,e,s,i),Un(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),i=tc(e),s=Bn(r,i);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Hn(e,s,i))&&(rc(t,e,i,r),Un(t,e,i))}};function na(e,t,r,i,s,n,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,n,o):!t.prototype||!t.prototype.isPureReactComponent||(!ai(r,i)||!ai(s,n))}function oa(e,t,r){var i=!1,s=Es,n=t.contextType;return"object"===typeof n&&null!==n?n=Tn(n):(s=js(t)?As:Rs.current,n=(i=null!==(i=t.contextTypes)&&void 0!==i)?Ts(e,s):Es),t=new t(r,n),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=sa,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=n),t}function aa(e,t,r,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&sa.enqueueReplaceState(t,t.state,null)}function la(e,t,r,i){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},On(e);var n=t.contextType;"object"===typeof n&&null!==n?s.context=Tn(n):(n=js(t)?As:Rs.current,s.context=Ts(e,n)),s.state=e.memoizedState,"function"===typeof(n=t.getDerivedStateFromProps)&&(ia(e,t,n,r),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&sa.enqueueReplaceState(s,s.state,null),Wn(e,r,s,i),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var r="",i=t;do{r+=F(i),i=i.return}while(i);var s=r}catch(n){s="\nError generating stack: "+n.message+"\n"+n.stack}return{value:e,source:t,stack:s,digest:null}}function ua(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,r){(r=Bn(-1,r)).tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){ql||(ql=!0,Kl=i),ha(0,t)},r}function pa(e,t,r){(r=Bn(-1,r)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var s=t.value;r.payload=function(){return i(s)},r.callback=function(){ha(0,t)}}var n=e.stateNode;return null!==n&&"function"===typeof n.componentDidCatch&&(r.callback=function(){ha(0,t),"function"!==typeof i&&(null===Vl?Vl=new Set([this]):Vl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function ga(e,t,r){var i=e.pingCache;if(null===i){i=e.pingCache=new da;var s=new Set;i.set(t,s)}else void 0===(s=i.get(t))&&(s=new Set,i.set(t,s));s.has(r)||(s.add(r),e=kc.bind(null,e,t,r),t.then(e,e))}function _a(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ma(e,t,r,i,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Bn(-1,1)).tag=2,Hn(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var va=w.ReactCurrentOwner,ya=!1;function wa(e,t,r,i){t.child=null===e?bn(t,null,r,i):wn(t,e.child,r,i)}function ba(e,t,r,i,s){r=r.render;var n=t.ref;return An(t,s),i=_o(e,t,r,i,n,s),r=mo(),null===e||ya?(sn&&r&&Zs(t),t.flags|=1,wa(e,t,i,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,qa(e,t,s))}function Sa(e,t,r,i,s){if(null===e){var n=r.type;return"function"!==typeof n||Nc(n)||void 0!==n.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Pc(r.type,null,i,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=n,xa(e,t,n,i,s))}if(n=e.child,0===(e.lanes&s)){var o=n.memoizedProps;if((r=null!==(r=r.compare)?r:ai)(o,i)&&e.ref===t.ref)return qa(e,t,s)}return t.flags|=1,(e=Dc(n,i)).ref=t.ref,e.return=t,t.child=e}function xa(e,t,r,i,s){if(null!==e){var n=e.memoizedProps;if(ai(n,i)&&e.ref===t.ref){if(ya=!1,t.pendingProps=i=n,0===(e.lanes&s))return t.lanes=e.lanes,qa(e,t,s);0!==(131072&e.flags)&&(ya=!0)}}return Ea(e,t,r,i,s)}function Ca(e,t,r){var i=t.pendingProps,s=i.children,n=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ks(Dl,Nl),Nl|=r;else{if(0===(1073741824&r))return e=null!==n?n.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ks(Dl,Nl),Nl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==n?n.baseLanes:r,ks(Dl,Nl),Nl|=i}else null!==n?(i=n.baseLanes|r,t.memoizedState=null):i=r,ks(Dl,Nl),Nl|=i;return wa(e,t,s,r),t.child}function ka(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ea(e,t,r,i,s){var n=js(r)?As:Rs.current;return n=Ts(t,n),An(t,s),r=_o(e,t,r,i,n,s),i=mo(),null===e||ya?(sn&&i&&Zs(t),t.flags|=1,wa(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,qa(e,t,s))}function Ra(e,t,r,i,s){if(js(r)){var n=!0;Ms(t)}else n=!1;if(An(t,s),null===t.stateNode)za(e,t),oa(t,r,i),la(t,r,i,s),i=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=r.contextType;"object"===typeof c&&null!==c?c=Tn(c):c=Ts(t,c=js(r)?As:Rs.current);var u=r.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==i||l!==c)&&aa(t,o,i,c),Mn=!1;var d=t.memoizedState;o.state=d,Wn(t,i,o,s),l=t.memoizedState,a!==i||d!==l||Ls.current||Mn?("function"===typeof u&&(ia(t,r,u,i),l=t.memoizedState),(a=Mn||na(t,r,a,i,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,In(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:ra(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=r.contextType)&&null!==l?l=Tn(l):l=Ts(t,l=js(r)?As:Rs.current);var f=r.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&aa(t,o,i,l),Mn=!1,d=t.memoizedState,o.state=d,Wn(t,i,o,s);var p=t.memoizedState;a!==h||d!==p||Ls.current||Mn?("function"===typeof f&&(ia(t,r,f,i),p=t.memoizedState),(c=Mn||na(t,r,c,i,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),o.props=i,o.state=p,o.context=l,i=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return La(e,t,r,i,n,s)}function La(e,t,r,i,s,n){ka(e,t);var o=0!==(128&t.flags);if(!i&&!o)return s&&Os(t,r,!1),qa(e,t,n);i=t.stateNode,va.current=t;var a=o&&"function"!==typeof r.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&o?(t.child=wn(t,e.child,null,n),t.child=wn(t,null,a,n)):wa(e,t,a,n),t.memoizedState=i.state,s&&Os(t,r,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Ds(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ds(0,t.context,!1),$n(e,t.containerInfo)}function Ta(e,t,r,i,s){return fn(),pn(s),t.flags|=256,wa(e,t,r,i),t.child}var ja,Na,Da,Pa,Ma={dehydrated:null,treeContext:null,retryLane:0};function Oa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ia(e,t,r){var i,s=t.pendingProps,o=Zn.current,a=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&o)),i?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ks(Zn,1&o),null===e)return cn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,a?(s=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Oc(l,s,0,null),e=Mc(e,s,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Oa(r),t.memoizedState=Ma,e):Ba(t,l));if(null!==(o=e.memoizedState)&&null!==(i=o.dehydrated))return function(e,t,r,i,s,o,a){if(r)return 256&t.flags?(t.flags&=-257,Ha(e,t,a,i=ua(Error(n(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=i.fallback,s=t.mode,i=Oc({mode:"visible",children:i.children},s,0,null),(o=Mc(o,s,a,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,0!==(1&t.mode)&&wn(t,e.child,null,a),t.child.memoizedState=Oa(a),t.memoizedState=Ma,o);if(0===(1&t.mode))return Ha(e,t,a,null);if("$!"===s.data){if(i=s.nextSibling&&s.nextSibling.dataset)var l=i.dgst;return i=l,Ha(e,t,a,i=ua(o=Error(n(419)),i,void 0))}if(l=0!==(a&e.childLanes),ya||l){if(null!==(i=Al)){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(i.suspendedLanes|a))?0:s)&&s!==o.retryLane&&(o.retryLane=s,Pn(e,s),rc(i,e,s,-1))}return gc(),Ha(e,t,a,i=ua(Error(n(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Rc.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,rn=ls(s.nextSibling),tn=t,sn=!0,nn=null,null!==e&&(Vs[Gs++]=$s,Vs[Gs++]=Xs,Vs[Gs++]=Js,$s=e.id,Xs=e.overflow,Js=t),t=Ba(t,i.children),t.flags|=4096,t)}(e,t,l,s,i,o,r);if(a){a=s.fallback,l=t.mode,i=(o=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==o?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==i?a=Dc(i,a):(a=Mc(a,l,r,null)).flags|=2,a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,l=null===(l=e.child.memoizedState)?Oa(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~r,t.memoizedState=Ma,s}return e=(a=e.child).sibling,s=Dc(a,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=r),s.return=t,s.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Ba(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ha(e,t,r,i){return null!==i&&pn(i),wn(t,e.child,null,r),(e=Ba(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ua(e,t,r){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Ln(e.return,t,r)}function Fa(e,t,r,i,s){var n=e.memoizedState;null===n?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:s}:(n.isBackwards=t,n.rendering=null,n.renderingStartTime=0,n.last=i,n.tail=r,n.tailMode=s)}function Wa(e,t,r){var i=t.pendingProps,s=i.revealOrder,n=i.tail;if(wa(e,t,i.children,r),0!==(2&(i=Zn.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ua(e,r,t);else if(19===e.tag)Ua(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(ks(Zn,i),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;null!==r;)null!==(e=r.alternate)&&null===eo(e)&&(s=r),r=r.sibling;null===(r=s)?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Fa(t,!1,s,r,n);break;case"backwards":for(r=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===eo(e)){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Fa(t,!0,r,null,n);break;case"together":Fa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function za(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qa(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(n(153));if(null!==t.child){for(r=Dc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Dc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Ka(e,t){if(!sn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;null!==r;)null!==r.alternate&&(i=r),r=r.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Va(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,i=0;if(t)for(var s=e.child;null!==s;)r|=s.lanes|s.childLanes,i|=14680064&s.subtreeFlags,i|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function Ga(e,t,r){var i=t.pendingProps;switch(en(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Va(t),null;case 1:case 17:return js(t.type)&&Ns(),Va(t),null;case 3:return i=t.stateNode,Xn(),Cs(Ls),Cs(Rs),ro(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(hn(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==nn&&(oc(nn),nn=null))),Na(e,t),Va(t),null;case 5:Yn(t);var s=Jn(Gn.current);if(r=t.type,null!==e&&null!=t.stateNode)Da(e,t,r,i,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(n(166));return Va(t),null}if(e=Jn(Kn.current),hn(t)){i=t.stateNode,r=t.type;var o=t.memoizedProps;switch(i[hs]=t,i[ds]=o,e=0!==(1&t.mode),r){case"dialog":Bi("cancel",i),Bi("close",i);break;case"iframe":case"object":case"embed":Bi("load",i);break;case"video":case"audio":for(s=0;s<Pi.length;s++)Bi(Pi[s],i);break;case"source":Bi("error",i);break;case"img":case"image":case"link":Bi("error",i),Bi("load",i);break;case"details":Bi("toggle",i);break;case"input":X(i,o),Bi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Bi("invalid",i);break;case"textarea":se(i,o),Bi("invalid",i)}for(var l in ve(r,o),s=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==o.suppressHydrationWarning&&Qi(i.textContent,c,e),s=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Qi(i.textContent,c,e),s=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Bi("scroll",i)}switch(r){case"input":V(i),Z(i,o,!0);break;case"textarea":V(i),oe(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=Yi)}i=s,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(r,{is:i.is}):(e=l.createElement(r),"select"===r&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,r),e[hs]=t,e[ds]=i,ja(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(r,i),r){case"dialog":Bi("cancel",e),Bi("close",e),s=i;break;case"iframe":case"object":case"embed":Bi("load",e),s=i;break;case"video":case"audio":for(s=0;s<Pi.length;s++)Bi(Pi[s],e);s=i;break;case"source":Bi("error",e),s=i;break;case"img":case"image":case"link":Bi("error",e),Bi("load",e),s=i;break;case"details":Bi("toggle",e),s=i;break;case"input":X(e,i),s=$(e,i),Bi("invalid",e);break;case"option":default:s=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},s=I({},i,{value:void 0}),Bi("invalid",e);break;case"textarea":se(e,i),s=ie(e,i),Bi("invalid",e)}for(o in ve(r,s),c=s)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?_e(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==r||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Bi("scroll",e):null!=u&&y(e,o,u,l))}switch(r){case"input":V(e),Z(e,i,!1);break;case"textarea":V(e),oe(e);break;case"option":null!=i.value&&e.setAttribute("value",""+q(i.value));break;case"select":e.multiple=!!i.multiple,null!=(o=i.value)?re(e,!!i.multiple,o,!1):null!=i.defaultValue&&re(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Yi)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Va(t),null;case 6:if(e&&null!=t.stateNode)Pa(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(n(166));if(r=Jn(Gn.current),Jn(Kn.current),hn(t)){if(i=t.stateNode,r=t.memoizedProps,i[hs]=t,(o=i.nodeValue!==r)&&null!==(e=tn))switch(e.tag){case 3:Qi(i.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qi(i.nodeValue,r,0!==(1&e.mode))}o&&(t.flags|=4)}else(i=(9===r.nodeType?r:r.ownerDocument).createTextNode(i))[hs]=t,t.stateNode=i}return Va(t),null;case 13:if(Cs(Zn),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(sn&&null!==rn&&0!==(1&t.mode)&&0===(128&t.flags))dn(),fn(),t.flags|=98560,o=!1;else if(o=hn(t),null!==i&&null!==i.dehydrated){if(null===e){if(!o)throw Error(n(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(n(317));o[hs]=t}else fn(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Va(t),o=!1}else null!==nn&&(oc(nn),nn=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zn.current)?0===Pl&&(Pl=3):gc())),null!==t.updateQueue&&(t.flags|=4),Va(t),null);case 4:return Xn(),Na(e,t),null===e&&Fi(t.stateNode.containerInfo),Va(t),null;case 10:return Rn(t.type._context),Va(t),null;case 19:if(Cs(Zn),null===(o=t.memoizedState))return Va(t),null;if(i=0!==(128&t.flags),null===(l=o.rendering))if(i)Ka(o,!1);else{if(0!==Pl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Ka(o,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;null!==r;)e=i,(o=r).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ks(Zn,1&Zn.current|2),t.child}e=e.sibling}null!==o.tail&&Qe()>Wl&&(t.flags|=128,i=!0,Ka(o,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=eo(l))){if(t.flags|=128,i=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Ka(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!sn)return Va(t),null}else 2*Qe()-o.renderingStartTime>Wl&&1073741824!==r&&(t.flags|=128,i=!0,Ka(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=o.last)?r.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qe(),t.sibling=null,r=Zn.current,ks(Zn,i?1&r|2:1&r),t):(Va(t),null);case 22:case 23:return hc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Nl)&&(Va(t),6&t.subtreeFlags&&(t.flags|=8192)):Va(t),null;case 24:case 25:return null}throw Error(n(156,t.tag))}function Ja(e,t){switch(en(t),t.tag){case 1:return js(t.type)&&Ns(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xn(),Cs(Ls),Cs(Rs),ro(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Yn(t),null;case 13:if(Cs(Zn),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(n(340));fn()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Cs(Zn),null;case 4:return Xn(),null;case 10:return Rn(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}ja=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Na=function(){},Da=function(e,t,r,i){var s=e.memoizedProps;if(s!==i){e=t.stateNode,Jn(Kn.current);var n,o=null;switch(r){case"input":s=$(e,s),i=$(e,i),o=[];break;case"select":s=I({},s,{value:void 0}),i=I({},i,{value:void 0}),o=[];break;case"textarea":s=ie(e,s),i=ie(e,i),o=[];break;default:"function"!==typeof s.onClick&&"function"===typeof i.onClick&&(e.onclick=Yi)}for(u in ve(r,i),r=null,s)if(!i.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(n in l)l.hasOwnProperty(n)&&(r||(r={}),r[n]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=s?s[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(n in l)!l.hasOwnProperty(n)||c&&c.hasOwnProperty(n)||(r||(r={}),r[n]="");for(n in c)c.hasOwnProperty(n)&&l[n]!==c[n]&&(r||(r={}),r[n]=c[n])}else r||(o||(o=[]),o.push(u,r)),r=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Bi("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Pa=function(e,t,r,i){r!==i&&(t.flags|=4)};var $a=!1,Xa=!1,Qa="function"===typeof WeakSet?WeakSet:Set,Ya=null;function Za(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(i){Cc(e,t,i)}else r.current=null}function el(e,t,r){try{r()}catch(i){Cc(e,t,i)}}var tl=!1;function rl(e,t,r){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var s=i=i.next;do{if((s.tag&e)===e){var n=s.destroy;s.destroy=void 0,void 0!==n&&el(t,r,n)}s=s.next}while(s!==i)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function sl(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function nl(e){var t=e.alternate;null!==t&&(e.alternate=null,nl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hs],delete t[ds],delete t[ps],delete t[gs],delete t[_s])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,r){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Yi));else if(4!==i&&null!==(e=e.child))for(ll(e,t,r),e=e.sibling;null!==e;)ll(e,t,r),e=e.sibling}function cl(e,t,r){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==i&&null!==(e=e.child))for(cl(e,t,r),e=e.sibling;null!==e;)cl(e,t,r),e=e.sibling}var ul=null,hl=!1;function dl(e,t,r){for(r=r.child;null!==r;)fl(e,t,r),r=r.sibling}function fl(e,t,r){if(nt&&"function"===typeof nt.onCommitFiberUnmount)try{nt.onCommitFiberUnmount(st,r)}catch(a){}switch(r.tag){case 5:Xa||Za(r,t);case 6:var i=ul,s=hl;ul=null,dl(e,t,r),hl=s,null!==(ul=i)&&(hl?(e=ul,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):ul.removeChild(r.stateNode));break;case 18:null!==ul&&(hl?(e=ul,r=r.stateNode,8===e.nodeType?as(e.parentNode,r):1===e.nodeType&&as(e,r),Wt(e)):as(ul,r.stateNode));break;case 4:i=ul,s=hl,ul=r.stateNode.containerInfo,hl=!0,dl(e,t,r),ul=i,hl=s;break;case 0:case 11:case 14:case 15:if(!Xa&&(null!==(i=r.updateQueue)&&null!==(i=i.lastEffect))){s=i=i.next;do{var n=s,o=n.destroy;n=n.tag,void 0!==o&&(0!==(2&n)||0!==(4&n))&&el(r,t,o),s=s.next}while(s!==i)}dl(e,t,r);break;case 1:if(!Xa&&(Za(r,t),"function"===typeof(i=r.stateNode).componentWillUnmount))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(a){Cc(r,t,a)}dl(e,t,r);break;case 21:dl(e,t,r);break;case 22:1&r.mode?(Xa=(i=Xa)||null!==r.memoizedState,dl(e,t,r),Xa=i):dl(e,t,r);break;default:dl(e,t,r)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Qa),t.forEach(function(t){var i=Lc.bind(null,e,t);r.has(t)||(r.add(t),t.then(i,i))})}}function gl(e,t){var r=t.deletions;if(null!==r)for(var i=0;i<r.length;i++){var s=r[i];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(n(160));fl(o,a,s),ul=null,hl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(u){Cc(s,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)_l(t,e),t=t.sibling}function _l(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),ml(e),4&i){try{rl(3,e,e.return),il(3,e)}catch(_){Cc(e,e.return,_)}try{rl(5,e,e.return)}catch(_){Cc(e,e.return,_)}}break;case 1:gl(t,e),ml(e),512&i&&null!==r&&Za(r,r.return);break;case 5:if(gl(t,e),ml(e),512&i&&null!==r&&Za(r,r.return),32&e.flags){var s=e.stateNode;try{de(s,"")}catch(_){Cc(e,e.return,_)}}if(4&i&&null!=(s=e.stateNode)){var o=e.memoizedProps,a=null!==r?r.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&Q(s,o),ye(l,a);var u=ye(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?_e(s,d):"dangerouslySetInnerHTML"===h?he(s,d):"children"===h?de(s,d):y(s,h,d,u)}switch(l){case"input":Y(s,o);break;case"textarea":ne(s,o);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?re(s,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?re(s,!!o.multiple,o.defaultValue,!0):re(s,!!o.multiple,o.multiple?[]:"",!1))}s[ds]=o}catch(_){Cc(e,e.return,_)}}break;case 6:if(gl(t,e),ml(e),4&i){if(null===e.stateNode)throw Error(n(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(_){Cc(e,e.return,_)}}break;case 3:if(gl(t,e),ml(e),4&i&&null!==r&&r.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(_){Cc(e,e.return,_)}break;case 4:default:gl(t,e),ml(e);break;case 13:gl(t,e),ml(e),8192&(s=e.child).flags&&(o=null!==s.memoizedState,s.stateNode.isHidden=o,!o||null!==s.alternate&&null!==s.alternate.memoizedState||(Fl=Qe())),4&i&&pl(e);break;case 22:if(h=null!==r&&null!==r.memoizedState,1&e.mode?(Xa=(u=Xa)||h,gl(t,e),Xa=u):gl(t,e),ml(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Ya=e,h=e.child;null!==h;){for(d=Ya=h;null!==Ya;){switch(p=(f=Ya).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:Za(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){i=f,r=f.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(_){Cc(i,r,_)}}break;case 5:Za(f,f.return);break;case 22:if(null!==f.memoizedState){bl(d);continue}}null!==p?(p.return=f,Ya=p):bl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{s=d.stateNode,u?"function"===typeof(o=s.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(_){Cc(e,e.return,_)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(_){Cc(e,e.return,_)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),ml(e),4&i&&pl(e);case 21:}}function ml(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(ol(r)){var i=r;break e}r=r.return}throw Error(n(160))}switch(i.tag){case 5:var s=i.stateNode;32&i.flags&&(de(s,""),i.flags&=-33),cl(e,al(e),s);break;case 3:case 4:var o=i.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(n(161))}}catch(a){Cc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,r){Ya=e,yl(e,t,r)}function yl(e,t,r){for(var i=0!==(1&e.mode);null!==Ya;){var s=Ya,n=s.child;if(22===s.tag&&i){var o=null!==s.memoizedState||$a;if(!o){var a=s.alternate,l=null!==a&&null!==a.memoizedState||Xa;a=$a;var c=Xa;if($a=o,(Xa=l)&&!c)for(Ya=s;null!==Ya;)l=(o=Ya).child,22===o.tag&&null!==o.memoizedState?Sl(s):null!==l?(l.return=o,Ya=l):Sl(s);for(;null!==n;)Ya=n,yl(n,t,r),n=n.sibling;Ya=s,$a=a,Xa=c}wl(e)}else 0!==(8772&s.subtreeFlags)&&null!==n?(n.return=s,Ya=n):wl(e)}}function wl(e){for(;null!==Ya;){var t=Ya;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xa||il(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Xa)if(null===r)i.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:ra(t.type,r.memoizedProps);i.componentDidUpdate(s,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&zn(t,o,i);break;case 3:var a=t.updateQueue;if(null!==a){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}zn(t,a,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Wt(d)}}}break;default:throw Error(n(163))}Xa||512&t.flags&&sl(t)}catch(f){Cc(t,t.return,f)}}if(t===e){Ya=null;break}if(null!==(r=t.sibling)){r.return=t.return,Ya=r;break}Ya=t.return}}function bl(e){for(;null!==Ya;){var t=Ya;if(t===e){Ya=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Ya=r;break}Ya=t.return}}function Sl(e){for(;null!==Ya;){var t=Ya;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{il(4,t)}catch(l){Cc(t,r,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var s=t.return;try{i.componentDidMount()}catch(l){Cc(t,s,l)}}var n=t.return;try{sl(t)}catch(l){Cc(t,n,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){Cc(t,o,l)}}}catch(l){Cc(t,t.return,l)}if(t===e){Ya=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ya=a;break}Ya=t.return}}var xl,Cl=Math.ceil,kl=w.ReactCurrentDispatcher,El=w.ReactCurrentOwner,Rl=w.ReactCurrentBatchConfig,Ll=0,Al=null,Tl=null,jl=0,Nl=0,Dl=xs(0),Pl=0,Ml=null,Ol=0,Il=0,Bl=0,Hl=null,Ul=null,Fl=0,Wl=1/0,zl=null,ql=!1,Kl=null,Vl=null,Gl=!1,Jl=null,$l=0,Xl=0,Ql=null,Yl=-1,Zl=0;function ec(){return 0!==(6&Ll)?Qe():-1!==Yl?Yl:Yl=Qe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Ll)&&0!==jl?jl&-jl:null!==gn.transition?(0===Zl&&(Zl=gt()),Zl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function rc(e,t,r,i){if(50<Xl)throw Xl=0,Ql=null,Error(n(185));mt(e,r,i),0!==(2&Ll)&&e===Al||(e===Al&&(0===(2&Ll)&&(Il|=r),4===Pl&&ac(e,jl)),ic(e,i),1===r&&0===Ll&&0===(1&t.mode)&&(Wl=Qe()+500,Bs&&Fs()))}function ic(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,n=e.pendingLanes;0<n;){var o=31-ot(n),a=1<<o,l=s[o];-1===l?0!==(a&r)&&0===(a&i)||(s[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),n&=~a}}(e,t);var i=dt(e,e===Al?jl:0);if(0===i)null!==r&&Je(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=r&&Je(r),1===t)0===e.tag?function(e){Bs=!0,Us(e)}(lc.bind(null,e)):Us(lc.bind(null,e)),ns(function(){0===(6&Ll)&&Fs()}),r=null;else{switch(wt(i)){case 1:r=Ze;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=it}r=Ac(r,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function sc(e,t){if(Yl=-1,Zl=0,0!==(6&Ll))throw Error(n(327));var r=e.callbackNode;if(Sc()&&e.callbackNode!==r)return null;var i=dt(e,e===Al?jl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=_c(e,i);else{t=i;var s=Ll;Ll|=2;var o=pc();for(Al===e&&jl===t||(zl=null,Wl=Qe()+500,dc(e,t));;)try{vc();break}catch(l){fc(e,l)}En(),kl.current=o,Ll=s,null!==Tl?t=0:(Al=null,jl=0,t=Pl)}if(0!==t){if(2===t&&(0!==(s=pt(e))&&(i=s,t=nc(e,s))),1===t)throw r=Ml,dc(e,0),ac(e,i),ic(e,Qe()),r;if(6===t)ac(e,i);else{if(s=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var i=0;i<r.length;i++){var s=r[i],n=s.getSnapshot;s=s.value;try{if(!oi(n(),s))return!1}catch(a){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=_c(e,i))&&(0!==(o=pt(e))&&(i=o,t=nc(e,o))),1===t))throw r=Ml,dc(e,0),ac(e,i),ic(e,Qe()),r;switch(e.finishedWork=s,e.finishedLanes=i,t){case 0:case 1:throw Error(n(345));case 2:case 5:bc(e,Ul,zl);break;case 3:if(ac(e,i),(130023424&i)===i&&10<(t=Fl+500-Qe())){if(0!==dt(e,0))break;if(((s=e.suspendedLanes)&i)!==i){ec(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(bc.bind(null,e,Ul,zl),t);break}bc(e,Ul,zl);break;case 4:if(ac(e,i),(4194240&i)===i)break;for(t=e.eventTimes,s=-1;0<i;){var a=31-ot(i);o=1<<a,(a=t[a])>s&&(s=a),i&=~o}if(i=s,10<(i=(120>(i=Qe()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Cl(i/1960))-i)){e.timeoutHandle=rs(bc.bind(null,e,Ul,zl),i);break}bc(e,Ul,zl);break;default:throw Error(n(329))}}}return ic(e,Qe()),e.callbackNode===r?sc.bind(null,e):null}function nc(e,t){var r=Hl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=_c(e,t))&&(t=Ul,Ul=r,null!==t&&oc(t)),e}function oc(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function ac(e,t){for(t&=~Bl,t&=~Il,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ot(t),i=1<<r;e[r]=-1,t&=~i}}function lc(e){if(0!==(6&Ll))throw Error(n(327));Sc();var t=dt(e,0);if(0===(1&t))return ic(e,Qe()),null;var r=_c(e,t);if(0!==e.tag&&2===r){var i=pt(e);0!==i&&(t=i,r=nc(e,i))}if(1===r)throw r=Ml,dc(e,0),ac(e,t),ic(e,Qe()),r;if(6===r)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,Ul,zl),ic(e,Qe()),null}function cc(e,t){var r=Ll;Ll|=1;try{return e(t)}finally{0===(Ll=r)&&(Wl=Qe()+500,Bs&&Fs())}}function uc(e){null!==Jl&&0===Jl.tag&&0===(6&Ll)&&Sc();var t=Ll;Ll|=1;var r=Rl.transition,i=yt;try{if(Rl.transition=null,yt=1,e)return e()}finally{yt=i,Rl.transition=r,0===(6&(Ll=t))&&Fs()}}function hc(){Nl=Dl.current,Cs(Dl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,is(r)),null!==Tl)for(r=Tl.return;null!==r;){var i=r;switch(en(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Ns();break;case 3:Xn(),Cs(Ls),Cs(Rs),ro();break;case 5:Yn(i);break;case 4:Xn();break;case 13:case 19:Cs(Zn);break;case 10:Rn(i.type._context);break;case 22:case 23:hc()}r=r.return}if(Al=e,Tl=e=Dc(e.current,null),jl=Nl=t,Pl=0,Ml=null,Bl=Il=Ol=0,Ul=Hl=null,null!==jn){for(t=0;t<jn.length;t++)if(null!==(i=(r=jn[t]).interleaved)){r.interleaved=null;var s=i.next,n=r.pending;if(null!==n){var o=n.next;n.next=s,i.next=o}r.pending=i}jn=null}return e}function fc(e,t){for(;;){var r=Tl;try{if(En(),io.current=Yo,co){for(var i=oo.memoizedState;null!==i;){var s=i.queue;null!==s&&(s.pending=null),i=i.next}co=!1}if(no=0,lo=ao=oo=null,uo=!1,ho=0,El.current=null,null===r||null===r.return){Pl=1,Ml=t,Tl=null;break}e:{var o=e,a=r.return,l=r,c=t;if(t=jl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=_a(a);if(null!==p){p.flags&=-257,ma(p,a,l,0,t),1&p.mode&&ga(o,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var _=new Set;_.add(c),t.updateQueue=_}else g.add(c);break e}if(0===(1&t)){ga(o,u,t),gc();break e}c=Error(n(426))}else if(sn&&1&l.mode){var m=_a(a);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),ma(m,a,l,0,t),pn(ca(c,l));break e}}o=c=ca(c,l),4!==Pl&&(Pl=2),null===Hl?Hl=[o]:Hl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Fn(o,fa(0,c,t));break e;case 1:l=c;var v=o.type,y=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Vl||!Vl.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t,Fn(o,pa(o,l,t));break e}}o=o.return}while(null!==o)}wc(r)}catch(w){t=w,Tl===r&&null!==r&&(Tl=r=r.return);continue}break}}function pc(){var e=kl.current;return kl.current=Yo,null===e?Yo:e}function gc(){0!==Pl&&3!==Pl&&2!==Pl||(Pl=4),null===Al||0===(268435455&Ol)&&0===(268435455&Il)||ac(Al,jl)}function _c(e,t){var r=Ll;Ll|=2;var i=pc();for(Al===e&&jl===t||(zl=null,dc(e,t));;)try{mc();break}catch(s){fc(e,s)}if(En(),Ll=r,kl.current=i,null!==Tl)throw Error(n(261));return Al=null,jl=0,Pl}function mc(){for(;null!==Tl;)yc(Tl)}function vc(){for(;null!==Tl&&!$e();)yc(Tl)}function yc(e){var t=xl(e.alternate,e,Nl);e.memoizedProps=e.pendingProps,null===t?wc(e):Tl=t,El.current=null}function wc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Ga(r,t,Nl)))return void(Tl=r)}else{if(null!==(r=Ja(r,t)))return r.flags&=32767,void(Tl=r);if(null===e)return Pl=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Pl&&(Pl=5)}function bc(e,t,r){var i=yt,s=Rl.transition;try{Rl.transition=null,yt=1,function(e,t,r,i){do{Sc()}while(null!==Jl);if(0!==(6&Ll))throw Error(n(327));r=e.finishedWork;var s=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-ot(r),n=1<<s;t[s]=0,i[s]=-1,e[s]=-1,r&=~n}}(e,o),e===Al&&(Tl=Al=null,jl=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Gl||(Gl=!0,Ac(tt,function(){return Sc(),null})),o=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||o){o=Rl.transition,Rl.transition=null;var a=yt;yt=1;var l=Ll;Ll|=4,El.current=null,function(e,t){if(Zi=qt,di(e=hi())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(i&&0!==i.rangeCount){r=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{r.nodeType,o.nodeType}catch(b){r=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==r||0!==s&&3!==d.nodeType||(l=a+s),d!==o||0!==i&&3!==d.nodeType||(c=a+i),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===r&&++u===s&&(l=a),f===o&&++h===i&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(es={focusedElem:e,selectionRange:r},qt=!1,Ya=t;null!==Ya;)if(e=(t=Ya).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ya=e;else for(;null!==Ya;){t=Ya;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var _=g.memoizedProps,m=g.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?_:ra(t.type,_),m);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(n(163))}}catch(b){Cc(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Ya=e;break}Ya=t.return}g=tl,tl=!1}(e,r),_l(r,e),fi(es),qt=!!Zi,es=Zi=null,e.current=r,vl(r,e,s),Xe(),Ll=l,yt=a,Rl.transition=o}else e.current=r;if(Gl&&(Gl=!1,Jl=e,$l=s),o=e.pendingLanes,0===o&&(Vl=null),function(e){if(nt&&"function"===typeof nt.onCommitFiberRoot)try{nt.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),ic(e,Qe()),null!==t)for(i=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],i(s.value,{componentStack:s.stack,digest:s.digest});if(ql)throw ql=!1,e=Kl,Kl=null,e;0!==(1&$l)&&0!==e.tag&&Sc(),o=e.pendingLanes,0!==(1&o)?e===Ql?Xl++:(Xl=0,Ql=e):Xl=0,Fs()}(e,t,r,i)}finally{Rl.transition=s,yt=i}return null}function Sc(){if(null!==Jl){var e=wt($l),t=Rl.transition,r=yt;try{if(Rl.transition=null,yt=16>e?16:e,null===Jl)var i=!1;else{if(e=Jl,Jl=null,$l=0,0!==(6&Ll))throw Error(n(331));var s=Ll;for(Ll|=4,Ya=e.current;null!==Ya;){var o=Ya,a=o.child;if(0!==(16&Ya.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Ya=u;null!==Ya;){var h=Ya;switch(h.tag){case 0:case 11:case 15:rl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Ya=d;else for(;null!==Ya;){var f=(h=Ya).sibling,p=h.return;if(nl(h),h===u){Ya=null;break}if(null!==f){f.return=p,Ya=f;break}Ya=p}}}var g=o.alternate;if(null!==g){var _=g.child;if(null!==_){g.child=null;do{var m=_.sibling;_.sibling=null,_=m}while(null!==_)}}Ya=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Ya=a;else e:for(;null!==Ya;){if(0!==(2048&(o=Ya).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Ya=v;break e}Ya=o.return}}var y=e.current;for(Ya=y;null!==Ya;){var w=(a=Ya).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Ya=w;else e:for(a=y;null!==Ya;){if(0!==(2048&(l=Ya).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(S){Cc(l,l.return,S)}if(l===a){Ya=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,Ya=b;break e}Ya=l.return}}if(Ll=s,Fs(),nt&&"function"===typeof nt.onPostCommitFiberRoot)try{nt.onPostCommitFiberRoot(st,e)}catch(S){}i=!0}return i}finally{yt=r,Rl.transition=t}}return!1}function xc(e,t,r){e=Hn(e,t=fa(0,t=ca(r,t),1),1),t=ec(),null!==e&&(mt(e,1,t),ic(e,t))}function Cc(e,t,r){if(3===e.tag)xc(e,e,r);else for(;null!==t;){if(3===t.tag){xc(t,e,r);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Vl||!Vl.has(i))){t=Hn(t,e=pa(t,e=ca(r,e),1),1),e=ec(),null!==t&&(mt(t,1,e),ic(t,e));break}}t=t.return}}function kc(e,t,r){var i=e.pingCache;null!==i&&i.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,Al===e&&(jl&r)===r&&(4===Pl||3===Pl&&(130023424&jl)===jl&&500>Qe()-Fl?dc(e,0):Bl|=r),ic(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var r=ec();null!==(e=Pn(e,t))&&(mt(e,t,r),ic(e,r))}function Rc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Ec(e,r)}function Lc(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;null!==s&&(r=s.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(n(314))}null!==i&&i.delete(t),Ec(e,r)}function Ac(e,t){return Ge(e,t)}function Tc(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jc(e,t,r,i){return new Tc(e,t,r,i)}function Nc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var r=e.alternate;return null===r?((r=jc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Pc(e,t,r,i,s,o){var a=2;if(i=e,"function"===typeof e)Nc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case x:return Mc(r.children,s,o,t);case C:a=8,s|=8;break;case k:return(e=jc(12,r,t,2|s)).elementType=k,e.lanes=o,e;case A:return(e=jc(13,r,t,s)).elementType=A,e.lanes=o,e;case T:return(e=jc(19,r,t,s)).elementType=T,e.lanes=o,e;case D:return Oc(r,s,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:a=10;break e;case R:a=9;break e;case L:a=11;break e;case j:a=14;break e;case N:a=16,i=null;break e}throw Error(n(130,null==e?e:typeof e,""))}return(t=jc(a,r,t,s)).elementType=e,t.type=i,t.lanes=o,t}function Mc(e,t,r,i){return(e=jc(7,e,i,t)).lanes=r,e}function Oc(e,t,r,i){return(e=jc(22,e,i,t)).elementType=D,e.lanes=r,e.stateNode={isHidden:!1},e}function Ic(e,t,r){return(e=jc(6,e,null,t)).lanes=r,e}function Bc(e,t,r){return(t=jc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hc(e,t,r,i,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_t(0),this.expirationTimes=_t(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_t(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Uc(e,t,r,i,s,n,o,a,l){return e=new Hc(e,t,r,a,l),1===t?(t=1,!0===n&&(t|=8)):t=0,n=jc(3,null,null,t),e.current=n,n.stateNode=e,n.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},On(n),e}function Fc(e){if(!e)return Es;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(n(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(js(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(n(171))}if(1===e.tag){var r=e.type;if(js(r))return Ps(e,r,t)}return t}function Wc(e,t,r,i,s,n,o,a,l){return(e=Uc(r,i,!0,e,0,n,0,a,l)).context=Fc(null),r=e.current,(n=Bn(i=ec(),s=tc(r))).callback=void 0!==t&&null!==t?t:null,Hn(r,n,s),e.current.lanes=s,mt(e,s,i),ic(e,i),e}function zc(e,t,r,i){var s=t.current,n=ec(),o=tc(s);return r=Fc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Bn(n,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Hn(s,t,o))&&(rc(e,s,o,n),Un(e,s,o)),o}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Vc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}xl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ls.current)ya=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return ya=!1,function(e,t,r){switch(t.tag){case 3:Aa(t),fn();break;case 5:Qn(t);break;case 1:js(t.type)&&Ms(t);break;case 4:$n(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,s=t.memoizedProps.value;ks(Sn,i._currentValue),i._currentValue=s;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(ks(Zn,1&Zn.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Ia(e,t,r):(ks(Zn,1&Zn.current),null!==(e=qa(e,t,r))?e.sibling:null);ks(Zn,1&Zn.current);break;case 19:if(i=0!==(r&t.childLanes),0!==(128&e.flags)){if(i)return Wa(e,t,r);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),ks(Zn,Zn.current),i)break;return null;case 22:case 23:return t.lanes=0,Ca(e,t,r)}return qa(e,t,r)}(e,t,r);ya=0!==(131072&e.flags)}else ya=!1,sn&&0!==(1048576&t.flags)&&Ys(t,Ks,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;za(e,t),e=t.pendingProps;var s=Ts(t,Rs.current);An(t,r),s=_o(null,t,i,e,s,r);var o=mo();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,js(i)?(o=!0,Ms(t)):o=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,On(t),s.updater=sa,t.stateNode=s,s._reactInternals=t,la(t,i,e,r),t=La(null,t,i,!0,o,r)):(t.tag=0,sn&&o&&Zs(t),wa(null,t,s,r),t=t.child),t;case 16:i=t.elementType;e:{switch(za(e,t),e=t.pendingProps,i=(s=i._init)(i._payload),t.type=i,s=t.tag=function(e){if("function"===typeof e)return Nc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===L)return 11;if(e===j)return 14}return 2}(i),e=ra(i,e),s){case 0:t=Ea(null,t,i,e,r);break e;case 1:t=Ra(null,t,i,e,r);break e;case 11:t=ba(null,t,i,e,r);break e;case 14:t=Sa(null,t,i,ra(i.type,e),r);break e}throw Error(n(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,Ea(e,t,i,s=t.elementType===i?s:ra(i,s),r);case 1:return i=t.type,s=t.pendingProps,Ra(e,t,i,s=t.elementType===i?s:ra(i,s),r);case 3:e:{if(Aa(t),null===e)throw Error(n(387));i=t.pendingProps,s=(o=t.memoizedState).element,In(e,t),Wn(t,i,null,r);var a=t.memoizedState;if(i=a.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ta(e,t,i,r,s=ca(Error(n(423)),t));break e}if(i!==s){t=Ta(e,t,i,r,s=ca(Error(n(424)),t));break e}for(rn=ls(t.stateNode.containerInfo.firstChild),tn=t,sn=!0,nn=null,r=bn(t,null,i,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(fn(),i===s){t=qa(e,t,r);break e}wa(e,t,i,r)}t=t.child}return t;case 5:return Qn(t),null===e&&cn(t),i=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,a=s.children,ts(i,s)?a=null:null!==o&&ts(i,o)&&(t.flags|=32),ka(e,t),wa(e,t,a,r),t.child;case 6:return null===e&&cn(t),null;case 13:return Ia(e,t,r);case 4:return $n(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=wn(t,null,i,r):wa(e,t,i,r),t.child;case 11:return i=t.type,s=t.pendingProps,ba(e,t,i,s=t.elementType===i?s:ra(i,s),r);case 7:return wa(e,t,t.pendingProps,r),t.child;case 8:case 12:return wa(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,ks(Sn,i._currentValue),i._currentValue=a,null!==o)if(oi(o.value,a)){if(o.children===s.children&&!Ls.current){t=qa(e,t,r);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===o.tag){(c=Bn(-1,r&-r)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=r,null!==(c=o.alternate)&&(c.lanes|=r),Ln(o.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(n(341));a.lanes|=r,null!==(l=a.alternate)&&(l.lanes|=r),Ln(a,r,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}wa(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,An(t,r),i=i(s=Tn(s)),t.flags|=1,wa(e,t,i,r),t.child;case 14:return s=ra(i=t.type,t.pendingProps),Sa(e,t,i,s=ra(i.type,s),r);case 15:return xa(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:ra(i,s),za(e,t),t.tag=1,js(i)?(e=!0,Ms(t)):e=!1,An(t,r),oa(t,i,s),la(t,i,s,r),La(null,t,i,!0,e,r);case 19:return Wa(e,t,r);case 22:return Ca(e,t,r)}throw Error(n(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Yc(){}function Zc(e,t,r,i,s){var n=r._reactRootContainer;if(n){var o=n;if("function"===typeof s){var a=s;s=function(){var e=qc(o);a.call(e)}}zc(t,o,e,s)}else o=function(e,t,r,i,s){if(s){if("function"===typeof i){var n=i;i=function(){var e=qc(o);n.call(e)}}var o=Wc(t,i,e,0,null,!1,0,"",Yc);return e._reactRootContainer=o,e[fs]=o.current,Fi(8===e.nodeType?e.parentNode:e),uc(),o}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof i){var a=i;i=function(){var e=qc(l);a.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Yc);return e._reactRootContainer=l,e[fs]=l.current,Fi(8===e.nodeType?e.parentNode:e),uc(function(){zc(t,l,r,i)}),l}(r,t,e,s,i);return qc(o)}$c.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(n(409));zc(e,t,null,null)},$c.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){zc(null,e,null,null)}),t[fs]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Dt.length&&0!==t&&t<Dt[r].priority;r++);Dt.splice(r,0,e),0===r&&It(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ht(t.pendingLanes);0!==r&&(vt(t,1|r),ic(t,Qe()),0===(6&Ll)&&(Wl=Qe()+500,Fs()))}break;case 13:uc(function(){var t=Pn(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}}),Vc(e,1)}},St=function(e){if(13===e.tag){var t=Pn(e,134217728);if(null!==t)rc(t,e,134217728,ec());Vc(e,134217728)}},xt=function(e){if(13===e.tag){var t=tc(e),r=Pn(e,t);if(null!==r)rc(r,e,t,ec());Vc(e,t)}},Ct=function(){return yt},kt=function(e,t){var r=yt;try{return yt=e,t()}finally{yt=r}},Se=function(e,t,r){switch(t){case"input":if(Y(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var s=ws(i);if(!s)throw Error(n(90));G(i),Y(i,s)}}}break;case"textarea":ne(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Le=cc,Ae=uc;var eu={usingClientEntryPoint:!1,Events:[vs,ys,ws,Ee,Re,cc]},tu={findFiberByHostInstance:ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ru={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{st=iu.inject(ru),nt=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(n(200));return function(e,t,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==i?null:""+i,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Xc(e))throw Error(n(299));var r=!1,i="",s=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Uc(e,1,!1,null,0,r,0,i,s),e[fs]=t.current,Fi(8===e.nodeType?e.parentNode:e),new Jc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(n(188));throw e=Object.keys(e).join(","),Error(n(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,r){if(!Qc(t))throw Error(n(200));return Zc(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Xc(e))throw Error(n(405));var i=null!=r&&r.hydratedSources||null,s=!1,o="",a=Gc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(s=!0),void 0!==r.identifierPrefix&&(o=r.identifierPrefix),void 0!==r.onRecoverableError&&(a=r.onRecoverableError)),t=Wc(t,null,e,1,null!=r?r:null,s,0,o,a),e[fs]=t.current,Fi(e),i)for(e=0;e<i.length;e++)s=(s=(r=i[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new $c(t)},t.render=function(e,t,r){if(!Qc(t))throw Error(n(200));return Zc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(n(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[fs]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!Qc(r))throw Error(n(200));if(null==e||void 0===e._reactInternals)throw Error(n(38));return Zc(e,t,r,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},736:(e,t,r)=>{var i=r(738).default,s=r(45);e.exports=function(e){var t=s(e,"string");return"symbol"==i(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},748:(e,t,r)=>{"use strict";r.r(t),r.d(t,{TerminalModal:()=>h});var i=r(43),s=r(69),n=r(77),o=r(933),a=r(996),l=r(579);const c={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://localhost:3001/api",u=e=>{let{workspaceId:t,onClose:r}=e;const{getAccessToken:u}=(0,a.A)(),h=(0,i.useRef)(null),d=(0,i.useRef)(null),f=(0,i.useRef)(null),p=(0,i.useRef)(null),[g,_]=(0,i.useState)("connecting"),[m,v]=(0,i.useState)(null);return(0,i.useEffect)(()=>{if(!h.current)return;const e=new s.Terminal({cursorBlink:!0,fontSize:14,fontFamily:'Menlo, Monaco, "Courier New", monospace',theme:{background:"#1e1e1e",foreground:"#d4d4d4",cursor:"#d4d4d4",black:"#000000",red:"#cd3131",green:"#0dbc79",yellow:"#e5e510",blue:"#2472c8",magenta:"#bc3fbc",cyan:"#11a8cd",white:"#e5e5e5",brightBlack:"#666666",brightRed:"#f14c4c",brightGreen:"#23d18b",brightYellow:"#f5f543",brightBlue:"#3b8eea",brightMagenta:"#d670d6",brightCyan:"#29b8db",brightWhite:"#ffffff"},scrollback:1e3,convertEol:!0}),r=new n.FitAddon;e.loadAddon(r),e.loadAddon(new o.WebLinksAddon),e.open(h.current),r.fit(),d.current=e,p.current=r;const i=u();if(!i)return _("error"),v("No authentication token found"),void e.writeln("\r\n\x1b[1;31mError: Not authenticated\x1b[0m\r\n");const a=c.startsWith("https")?"wss":"ws",l=c.replace(/^https?/,a),m="".concat(l,"/admin/workspaces/").concat(t,"/exec?token=").concat(encodeURIComponent(i));e.writeln("\r\nConnecting to workspace...\r\n");const y=new WebSocket(m);f.current=y,y.onopen=()=>{_("connected"),e.writeln("\r\n\x1b[1;32mConnected!\x1b[0m\r\n")},y.onmessage=t=>{"string"===typeof t.data&&e.write(t.data)},y.onerror=t=>{_("error"),v("WebSocket connection error"),e.writeln("\r\n\x1b[1;31mConnection error\x1b[0m\r\n")},y.onclose=()=>{"error"!==g&&(_("disconnected"),e.writeln("\r\n\x1b[1;33mConnection closed\x1b[0m\r\n"))};const w=e.onData(e=>{y.readyState===WebSocket.OPEN&&y.send(e)}),b=()=>{r.fit()};return window.addEventListener("resize",b),()=>{w.dispose(),window.removeEventListener("resize",b),y.readyState===WebSocket.OPEN&&y.close(),e.dispose()}},[t,u]),(0,l.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[(0,l.jsxs)("div",{style:{padding:"8px 16px",backgroundColor:"#2d2d30",color:"#cccccc",borderBottom:"1px solid #3e3e42",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,l.jsx)("span",{style:{display:"inline-block",width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"connected"===g?"#0dbc79":"connecting"===g?"#e5e510":"error"===g?"#cd3131":"#666666"}}),(0,l.jsxs)("span",{style:{fontSize:"14px"},children:["connected"===g&&"Connected","connecting"===g&&"Connecting...","disconnected"===g&&"Disconnected","error"===g&&"Error: ".concat(m)]})]}),r&&(0,l.jsx)("button",{onClick:r,style:{background:"none",border:"none",color:"#cccccc",cursor:"pointer",fontSize:"18px",padding:"4px 8px"},children:"\xd7"})]}),(0,l.jsx)("div",{ref:h,style:{flex:1,overflow:"hidden",padding:"8px"}})]})},h=e=>{let{isOpen:t,onClose:r,workspaceId:i,workspaceName:s}=e;return t?(0,l.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:e=>{e.target===e.currentTarget&&r()},children:(0,l.jsxs)("div",{style:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90vw",height:"80vh",maxWidth:"1400px",maxHeight:"900px",display:"flex",flexDirection:"column",overflow:"hidden",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},onClick:e=>e.stopPropagation(),children:[(0,l.jsxs)("div",{style:{padding:"16px 24px",backgroundColor:"#2d2d30",borderBottom:"1px solid #3e3e42",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("h2",{style:{margin:0,fontSize:"18px",fontWeight:600,color:"#cccccc"},children:["Terminal - ",s]}),(0,l.jsxs)("p",{style:{margin:"4px 0 0 0",fontSize:"13px",color:"#888888"},children:["Workspace ID: ",i]})]}),(0,l.jsx)("button",{onClick:r,style:{background:"none",border:"none",color:"#cccccc",cursor:"pointer",fontSize:"24px",padding:"4px 12px",transition:"color 0.2s"},onMouseEnter:e=>e.currentTarget.style.color="#ffffff",onMouseLeave:e=>e.currentTarget.style.color="#cccccc",children:"\xd7"})]}),(0,l.jsx)("div",{style:{flex:1,overflow:"hidden"},children:(0,l.jsx)(u,{workspaceId:i})}),(0,l.jsxs)("div",{style:{padding:"12px 24px",backgroundColor:"#2d2d30",borderTop:"1px solid #3e3e42",fontSize:"12px",color:"#888888",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,l.jsx)("span",{children:"Use Ctrl+C, Ctrl+D, or type 'exit' to end session"}),(0,l.jsx)("button",{onClick:r,style:{padding:"6px 16px",backgroundColor:"#3e3e42",color:"#cccccc",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",transition:"background-color 0.2s"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#4e4e52",onMouseLeave:e=>e.currentTarget.style.backgroundColor="#3e3e42",children:"Close"})]})]})}):null}},853:(e,t,r)=>{"use strict";e.exports=r(234)},897:(e,t,r)=>{var i=r(693);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){i(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e},e.exports.__esModule=!0,e.exports.default=e.exports},933:e=>{var t;self,t=()=>(()=>{"use strict";var e={6:(e,t)=>{function r(e){try{const t=new URL(e),r=t.password&&t.username?"".concat(t.protocol,"//").concat(t.username,":").concat(t.password,"@").concat(t.host):t.username?"".concat(t.protocol,"//").concat(t.username,"@").concat(t.host):"".concat(t.protocol,"//").concat(t.host);return e.toLocaleLowerCase().startsWith(r.toLocaleLowerCase())}catch(e){return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.LinkComputer=t.WebLinkProvider=void 0,t.WebLinkProvider=class{constructor(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._terminal=e,this._regex=t,this._handler=r,this._options=i}provideLinks(e,t){const r=i.computeLink(e,this._regex,this._terminal,this._handler);t(this._addCallbacks(r))}_addCallbacks(e){return e.map(e=>(e.leave=this._options.leave,e.hover=(t,r)=>{if(this._options.hover){const{range:i}=e;this._options.hover(t,r,i)}},e))}};class i{static computeLink(e,t,s,n){const o=new RegExp(t.source,(t.flags||"")+"g"),[a,l]=i._getWindowedLineStrings(e-1,s),c=a.join("");let u;const h=[];for(;u=o.exec(c);){const e=u[0];if(!r(e))continue;const[t,o]=i._mapStrIdx(s,l,0,u.index),[a,c]=i._mapStrIdx(s,t,o,e.length);if(-1===t||-1===o||-1===a||-1===c)continue;const d={start:{x:o+1,y:t+1},end:{x:c,y:a+1}};h.push({range:d,text:e,activate:n})}return h}static _getWindowedLineStrings(e,t){let r,i=e,s=e,n=0,o="";const a=[];if(r=t.buffer.active.getLine(e)){const e=r.translateToString(!0);if(r.isWrapped&&" "!==e[0]){for(n=0;(r=t.buffer.active.getLine(--i))&&n<2048&&(o=r.translateToString(!0),n+=o.length,a.push(o),r.isWrapped&&-1===o.indexOf(" ")););a.reverse()}for(a.push(e),n=0;(r=t.buffer.active.getLine(++s))&&r.isWrapped&&n<2048&&(o=r.translateToString(!0),n+=o.length,a.push(o),-1===o.indexOf(" ")););}return[a,i]}static _mapStrIdx(e,t,r,i){const s=e.buffer.active,n=s.getNullCell();let o=r;for(;i;){const e=s.getLine(t);if(!e)return[-1,-1];for(let r=o;r<e.length;++r){e.getCell(r,n);const o=n.getChars();if(n.getWidth()&&(i-=o.length||1,r===e.length-1&&""===o)){const e=s.getLine(t+1);e&&e.isWrapped&&(e.getCell(0,n),2===n.getWidth()&&(i+=1))}if(i<0)return[t,r]}t++,o=0}return[t,o]}}t.LinkComputer=i}},t={};function r(i){var s=t[i];if(void 0!==s)return s.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,r),n.exports}var i={};return(()=>{var e=i;Object.defineProperty(e,"__esModule",{value:!0}),e.WebLinksAddon=void 0;const t=r(6),s=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function n(e,t){const r=window.open();if(r){try{r.opener=null}catch(i){}r.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}e.WebLinksAddon=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._handler=e,this._options=t}activate(e){this._terminal=e;const r=this._options,i=r.urlRegex||s;this._linkProvider=this._terminal.registerLinkProvider(new t.WebLinkProvider(this._terminal,i,this._handler,r))}dispose(){var e;null===(e=this._linkProvider)||void 0===e||e.dispose()}}})(),i})(),e.exports=t()},950:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(730)},986:(e,t,r)=>{"use strict";function i(e,t){if(null==e)return{};var r,i,s=function(e,t){if(null==e)return{};var r={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;r[i]=e[i]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)r=n[i],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}r.d(t,{A:()=>i})},996:(e,t,r)=>{"use strict";r.d(t,{O:()=>Je,A:()=>$e});var i=r(8),s=r(43),n=r(986);class o extends Error{}function a(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,(e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}(t)}catch(r){return atob(t)}}o.prototype.name="InvalidTokenError";const l=["timeoutInSeconds"],c=["grant_type","redirect_uri","client_id","client_secret","extraHeaders"],u=["grant_type","client_id","client_secret","scope"],h=["grant_type","client_id","client_secret","timeoutInSeconds","extraHeaders"],d=["url","authority","client_id","redirect_uri","response_type","scope","state_data","response_mode","request_type","client_secret","nonce","url_state","resource","skipUserInfo","extraQueryParams","extraTokenParams","disablePKCE","dpopJkt","omitScopeWhenRequesting"],f=["redirectMethod"],p=["popupWindowFeatures","popupWindowTarget","popupSignal"],g=["silentRequestTimeoutInSeconds"],_=["silentRequestTimeoutInSeconds"],m=["redirectMethod"],v=["popupWindowFeatures","popupWindowTarget","popupSignal"],y=["silentRequestTimeoutInSeconds"];var w,b,S,x={debug:()=>{},info:()=>{},warn:()=>{},error:()=>{}},C=(e=>(e[e.NONE=0]="NONE",e[e.ERROR=1]="ERROR",e[e.WARN=2]="WARN",e[e.INFO=3]="INFO",e[e.DEBUG=4]="DEBUG",e))(C||{});(S=C||(C={})).reset=function(){w=3,b=x},S.setLevel=function(e){if(!(0<=e&&e<=4))throw new Error("Invalid log level");w=e},S.setLogger=function(e){b=e};var k=class e{constructor(e){this._name=e}debug(){if(w>=4){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];b.debug(e._format(this._name,this._method),...r)}}info(){if(w>=3){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];b.info(e._format(this._name,this._method),...r)}}warn(){if(w>=2){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];b.warn(e._format(this._name,this._method),...r)}}error(){if(w>=1){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];b.error(e._format(this._name,this._method),...r)}}throw(e){throw this.error(e),e}create(e){const t=Object.create(this);return t._method=e,t.debug("begin"),t}static createStatic(t,r){const i=new e("".concat(t,".").concat(r));return i.debug("begin"),i}static _format(e,t){const r="[".concat(e,"]");return t?"".concat(r," ").concat(t,":"):r}static debug(t){if(w>=4){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];b.debug(e._format(t),...i)}}static info(t){if(w>=3){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];b.info(e._format(t),...i)}}static warn(t){if(w>=2){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];b.warn(e._format(t),...i)}}static error(t){if(w>=1){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];b.error(e._format(t),...i)}}};C.reset();var E=class{static decode(e){try{return function(e,t){if("string"!==typeof e)throw new o("Invalid token specified: must be a string");t||(t={});const r=!0===t.header?0:1,i=e.split(".")[r];if("string"!==typeof i)throw new o("Invalid token specified: missing part #".concat(r+1));let s;try{s=a(i)}catch(n){throw new o("Invalid token specified: invalid base64 for part #".concat(r+1," (").concat(n.message,")"))}try{return JSON.parse(s)}catch(n){throw new o("Invalid token specified: invalid json for part #".concat(r+1," (").concat(n.message,")"))}}(e)}catch(t){throw k.error("JwtUtils.decode",t),t}}static async generateSignedJwt(e,t,r){const i=A.encodeBase64Url((new TextEncoder).encode(JSON.stringify(e))),s=A.encodeBase64Url((new TextEncoder).encode(JSON.stringify(t))),n="".concat(i,".").concat(s),o=await window.crypto.subtle.sign({name:"ECDSA",hash:{name:"SHA-256"}},r,(new TextEncoder).encode(n)),a=A.encodeBase64Url(new Uint8Array(o));return"".concat(n,".").concat(a)}static async generateSignedJwtWithHmac(e,t,r){const i=A.encodeBase64Url((new TextEncoder).encode(JSON.stringify(e))),s=A.encodeBase64Url((new TextEncoder).encode(JSON.stringify(t))),n="".concat(i,".").concat(s),o=await window.crypto.subtle.sign("HMAC",r,(new TextEncoder).encode(n)),a=A.encodeBase64Url(new Uint8Array(o));return"".concat(n,".").concat(a)}},R=e=>btoa([...new Uint8Array(e)].map(e=>String.fromCharCode(e)).join("")),L=class e{static _randomWord(){const e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]}static generateUUIDv4(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,t=>(+t^e._randomWord()&15>>+t/4).toString(16)).replace(/-/g,"")}static generateCodeVerifier(){return e.generateUUIDv4()+e.generateUUIDv4()+e.generateUUIDv4()}static async generateCodeChallenge(e){if(!crypto.subtle)throw new Error("Crypto.subtle is available only in secure contexts (HTTPS).");try{const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t);return R(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}catch(t){throw k.error("CryptoUtils.generateCodeChallenge",t),t}}static generateBasicAuth(e,t){const r=(new TextEncoder).encode([e,t].join(":"));return R(r)}static async hash(e,t){const r=(new TextEncoder).encode(t),i=await crypto.subtle.digest(e,r);return new Uint8Array(i)}static async customCalculateJwkThumbprint(t){let r;switch(t.kty){case"RSA":r={e:t.e,kty:t.kty,n:t.n};break;case"EC":r={crv:t.crv,kty:t.kty,x:t.x,y:t.y};break;case"OKP":r={crv:t.crv,kty:t.kty,x:t.x};break;case"oct":r={crv:t.k,kty:t.kty};break;default:throw new Error("Unknown jwk type")}const i=await e.hash("SHA-256",JSON.stringify(r));return e.encodeBase64Url(i)}static async generateDPoPProof(t){let r,i,{url:s,accessToken:n,httpMethod:o,keyPair:a,nonce:l}=t;const c={jti:window.crypto.randomUUID(),htm:null!=o?o:"GET",htu:s,iat:Math.floor(Date.now()/1e3)};n&&(r=await e.hash("SHA-256",n),i=e.encodeBase64Url(r),c.ath=i),l&&(c.nonce=l);try{const e=await crypto.subtle.exportKey("jwk",a.publicKey),t={alg:"ES256",typ:"dpop+jwt",jwk:{crv:e.crv,kty:e.kty,x:e.x,y:e.y}};return await E.generateSignedJwt(t,c,a.privateKey)}catch(u){throw u instanceof TypeError?new Error("Error exporting dpop public key: ".concat(u.message)):u}}static async generateDPoPJkt(t){try{const r=await crypto.subtle.exportKey("jwk",t.publicKey);return await e.customCalculateJwkThumbprint(r)}catch(r){throw r instanceof TypeError?new Error("Could not retrieve dpop keys from storage: ".concat(r.message)):r}}static async generateDPoPKeys(){return await window.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign","verify"])}static async generateClientAssertionJwt(t,r,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"HS256";const n=Math.floor(Date.now()/1e3),o={alg:s,typ:"JWT"},a={iss:t,sub:t,aud:i,jti:e.generateUUIDv4(),exp:n+300,iat:n},l={HS256:"SHA-256",HS384:"SHA-384",HS512:"SHA-512"}[s];if(!l)throw new Error("Unsupported algorithm: ".concat(s,". Supported algorithms are: HS256, HS384, HS512"));const c=new TextEncoder,u=await crypto.subtle.importKey("raw",c.encode(r),{name:"HMAC",hash:l},!1,["sign"]);return await E.generateSignedJwtWithHmac(o,a,u)}};L.encodeBase64Url=e=>R(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");var A=L,T=class{constructor(e){this._name=e,this._callbacks=[],this._logger=new k("Event('".concat(this._name,"')"))}addHandler(e){return this._callbacks.push(e),()=>this.removeHandler(e)}removeHandler(e){const t=this._callbacks.lastIndexOf(e);t>=0&&this._callbacks.splice(t,1)}async raise(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._logger.debug("raise:",...t);for(const i of this._callbacks)await i(...t)}},j=class{static center(e){let t=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));var r;return null==t.width&&(t.width=null!=(r=[800,720,600,480].find(e=>e<=window.outerWidth/1.618))?r:360),null!=t.left||(t.left=Math.max(0,Math.round(window.screenX+(window.outerWidth-t.width)/2))),null!=t.height&&(null!=t.top||(t.top=Math.max(0,Math.round(window.screenY+(window.outerHeight-t.height)/2)))),t}static serialize(e){return Object.entries(e).filter(e=>{let[,t]=e;return null!=t}).map(e=>{let[t,r]=e;return"".concat(t,"=").concat("boolean"!==typeof r?r:r?"yes":"no")}).join(",")}},N=class e extends T{constructor(){super(...arguments),this._logger=new k("Timer('".concat(this._name,"')")),this._timerHandle=null,this._expiration=0,this._callback=()=>{const t=this._expiration-e.getEpochTime();this._logger.debug("timer completes in",t),this._expiration<=e.getEpochTime()&&(this.cancel(),super.raise())}}static getEpochTime(){return Math.floor(Date.now()/1e3)}init(t){const r=this._logger.create("init");t=Math.max(Math.floor(t),1);const i=e.getEpochTime()+t;if(this.expiration===i&&this._timerHandle)return void r.debug("skipping since already initialized for expiration at",this.expiration);this.cancel(),r.debug("using duration",t),this._expiration=i;const s=Math.min(t,5);this._timerHandle=setInterval(this._callback,1e3*s)}get expiration(){return this._expiration}cancel(){this._logger.create("cancel"),this._timerHandle&&(clearInterval(this._timerHandle),this._timerHandle=null)}},D=class{static readParams(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"query";if(!e)throw new TypeError("Invalid URL");const r=new URL(e,"http://127.0.0.1")["fragment"===t?"hash":"search"];return new URLSearchParams(r.slice(1))}},P=";",M=class extends Error{constructor(e,t){var r,i,s;if(super(e.error_description||e.error||""),this.form=t,this.name="ErrorResponse",!e.error)throw k.error("ErrorResponse","No error passed"),new Error("No error passed");this.error=e.error,this.error_description=null!=(r=e.error_description)?r:null,this.error_uri=null!=(i=e.error_uri)?i:null,this.state=e.userState,this.session_state=null!=(s=e.session_state)?s:null,this.url_state=e.url_state}},O=class extends Error{constructor(e){super(e),this.name="ErrorTimeout"}},I=class{constructor(e){this._logger=new k("AccessTokenEvents"),this._expiringTimer=new N("Access token expiring"),this._expiredTimer=new N("Access token expired"),this._expiringNotificationTimeInSeconds=e.expiringNotificationTimeInSeconds}async load(e){const t=this._logger.create("load");if(e.access_token&&void 0!==e.expires_in){const r=e.expires_in;if(t.debug("access token present, remaining duration:",r),r>0){let e=r-this._expiringNotificationTimeInSeconds;e<=0&&(e=1),t.debug("registering expiring timer, raising in",e,"seconds"),this._expiringTimer.init(e)}else t.debug("canceling existing expiring timer because we're past expiration."),this._expiringTimer.cancel();const i=r+1;t.debug("registering expired timer, raising in",i,"seconds"),this._expiredTimer.init(i)}else this._expiringTimer.cancel(),this._expiredTimer.cancel()}async unload(){this._logger.debug("unload: canceling existing access token timers"),this._expiringTimer.cancel(),this._expiredTimer.cancel()}addAccessTokenExpiring(e){return this._expiringTimer.addHandler(e)}removeAccessTokenExpiring(e){this._expiringTimer.removeHandler(e)}addAccessTokenExpired(e){return this._expiredTimer.addHandler(e)}removeAccessTokenExpired(e){this._expiredTimer.removeHandler(e)}},B=class{constructor(e,t,r,i,s){this._callback=e,this._client_id=t,this._intervalInSeconds=i,this._stopOnError=s,this._logger=new k("CheckSessionIFrame"),this._timer=null,this._session_state=null,this._message=e=>{e.origin===this._frame_origin&&e.source===this._frame.contentWindow&&("error"===e.data?(this._logger.error("error message from check session op iframe"),this._stopOnError&&this.stop()):"changed"===e.data?(this._logger.debug("changed message from check session op iframe"),this.stop(),this._callback()):this._logger.debug(e.data+" message from check session op iframe"))};const n=new URL(r);this._frame_origin=n.origin,this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="fixed",this._frame.style.left="-1000px",this._frame.style.top="0",this._frame.width="0",this._frame.height="0",this._frame.src=n.href}load(){return new Promise(e=>{this._frame.onload=()=>{e()},window.document.body.appendChild(this._frame),window.addEventListener("message",this._message,!1)})}start(e){if(this._session_state===e)return;this._logger.create("start"),this.stop(),this._session_state=e;const t=()=>{this._frame.contentWindow&&this._session_state&&this._frame.contentWindow.postMessage(this._client_id+" "+this._session_state,this._frame_origin)};t(),this._timer=setInterval(t,1e3*this._intervalInSeconds)}stop(){this._logger.create("stop"),this._session_state=null,this._timer&&(clearInterval(this._timer),this._timer=null)}},H=class{constructor(){this._logger=new k("InMemoryWebStorage"),this._data={}}clear(){this._logger.create("clear"),this._data={}}getItem(e){return this._logger.create("getItem('".concat(e,"')")),this._data[e]}setItem(e,t){this._logger.create("setItem('".concat(e,"')")),this._data[e]=t}removeItem(e){this._logger.create("removeItem('".concat(e,"')")),delete this._data[e]}get length(){return Object.getOwnPropertyNames(this._data).length}key(e){return Object.getOwnPropertyNames(this._data)[e]}},U=class extends Error{constructor(e,t){super(t),this.name="ErrorDPoPNonce",this.nonce=e}},F=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._jwtHandler=t,this._extraHeaders=r,this._logger=new k("JsonService"),this._contentTypes=[],this._contentTypes.push(...e,"application/json"),t&&this._contentTypes.push("application/jwt")}async fetchWithTimeout(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{timeoutInSeconds:r}=t,s=(0,n.A)(t,l);if(!r)return await fetch(e,s);const o=new AbortController,a=setTimeout(()=>o.abort(),1e3*r);try{return await fetch(e,(0,i.A)((0,i.A)({},t),{},{signal:o.signal}))}catch(c){if(c instanceof DOMException&&"AbortError"===c.name)throw new O("Network timed out");throw c}finally{clearTimeout(a)}}async getJson(e){let{token:t,credentials:r,timeoutInSeconds:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=this._logger.create("getJson"),n={Accept:this._contentTypes.join(", ")};let o;t&&(s.debug("token passed, setting Authorization header"),n.Authorization="Bearer "+t),this._appendExtraHeaders(n);try{s.debug("url:",e),o=await this.fetchWithTimeout(e,{method:"GET",headers:n,timeoutInSeconds:i,credentials:r})}catch(c){throw s.error("Network Error"),c}s.debug("HTTP response received, status",o.status);const a=o.headers.get("Content-Type");if(a&&!this._contentTypes.find(e=>a.startsWith(e))&&s.throw(new Error("Invalid response Content-Type: ".concat(null!=a?a:"undefined",", from URL: ").concat(e))),o.ok&&this._jwtHandler&&(null==a?void 0:a.startsWith("application/jwt")))return await this._jwtHandler(await o.text());let l;try{l=await o.json()}catch(c){if(s.error("Error parsing JSON response",c),o.ok)throw c;throw new Error("".concat(o.statusText," (").concat(o.status,")"))}if(!o.ok){if(s.error("Error from server:",l),l.error)throw new M(l);throw new Error("".concat(o.statusText," (").concat(o.status,"): ").concat(JSON.stringify(l)))}return l}async postForm(e,t){let{body:r,basicAuth:s,timeoutInSeconds:n,initCredentials:o,extraHeaders:a}=t;const l=this._logger.create("postForm"),c=(0,i.A)({Accept:this._contentTypes.join(", "),"Content-Type":"application/x-www-form-urlencoded"},a);let u;void 0!==s&&(c.Authorization="Basic "+s),this._appendExtraHeaders(c);try{l.debug("url:",e),u=await this.fetchWithTimeout(e,{method:"POST",headers:c,body:r,timeoutInSeconds:n,credentials:o})}catch(p){throw l.error("Network error"),p}l.debug("HTTP response received, status",u.status);const h=u.headers.get("Content-Type");if(h&&!this._contentTypes.find(e=>h.startsWith(e)))throw new Error("Invalid response Content-Type: ".concat(null!=h?h:"undefined",", from URL: ").concat(e));const d=await u.text();let f={};if(d)try{f=JSON.parse(d)}catch(p){if(l.error("Error parsing JSON response",p),u.ok)throw p;throw new Error("".concat(u.statusText," (").concat(u.status,")"))}if(!u.ok){if(l.error("Error from server:",f),u.headers.has("dpop-nonce")){const e=u.headers.get("dpop-nonce");throw new U(e,"".concat(JSON.stringify(f)))}if(f.error)throw new M(f,r);throw new Error("".concat(u.statusText," (").concat(u.status,"): ").concat(JSON.stringify(f)))}return f}_appendExtraHeaders(e){const t=this._logger.create("appendExtraHeaders"),r=Object.keys(this._extraHeaders),i=["accept","content-type"],s=["authorization"];0!==r.length&&r.forEach(r=>{if(i.includes(r.toLocaleLowerCase()))return void t.warn("Protected header could not be set",r,i);if(s.includes(r.toLocaleLowerCase())&&Object.keys(e).includes(r))return void t.warn("Header could not be overridden",r,s);const n="function"===typeof this._extraHeaders[r]?this._extraHeaders[r]():this._extraHeaders[r];n&&""!==n&&(e[r]=n)})}},W=class{constructor(e){this._settings=e,this._logger=new k("MetadataService"),this._signingKeys=null,this._metadata=null,this._metadataUrl=this._settings.metadataUrl,this._jsonService=new F(["application/jwk-set+json"],null,this._settings.extraHeaders),this._settings.signingKeys&&(this._logger.debug("using signingKeys from settings"),this._signingKeys=this._settings.signingKeys),this._settings.metadata&&(this._logger.debug("using metadata from settings"),this._metadata=this._settings.metadata),this._settings.fetchRequestCredentials&&(this._logger.debug("using fetchRequestCredentials from settings"),this._fetchRequestCredentials=this._settings.fetchRequestCredentials)}resetSigningKeys(){this._signingKeys=null}async getMetadata(){const e=this._logger.create("getMetadata");if(this._metadata)return e.debug("using cached values"),this._metadata;if(!this._metadataUrl)throw e.throw(new Error("No authority or metadataUrl configured on settings")),null;e.debug("getting metadata from",this._metadataUrl);const t=await this._jsonService.getJson(this._metadataUrl,{credentials:this._fetchRequestCredentials,timeoutInSeconds:this._settings.requestTimeoutInSeconds});return e.debug("merging remote JSON with seed metadata"),this._metadata=Object.assign({},t,this._settings.metadataSeed),this._metadata}getIssuer(){return this._getMetadataProperty("issuer")}getAuthorizationEndpoint(){return this._getMetadataProperty("authorization_endpoint")}getUserInfoEndpoint(){return this._getMetadataProperty("userinfo_endpoint")}getTokenEndpoint(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._getMetadataProperty("token_endpoint",e)}getCheckSessionIframe(){return this._getMetadataProperty("check_session_iframe",!0)}getEndSessionEndpoint(){return this._getMetadataProperty("end_session_endpoint",!0)}getRevocationEndpoint(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._getMetadataProperty("revocation_endpoint",e)}getKeysEndpoint(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._getMetadataProperty("jwks_uri",e)}async _getMetadataProperty(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=this._logger.create("_getMetadataProperty('".concat(e,"')")),i=await this.getMetadata();if(r.debug("resolved"),void 0===i[e]){if(!0===t)return void r.warn("Metadata does not contain optional property");r.throw(new Error("Metadata does not contain property "+e))}return i[e]}async getSigningKeys(){const e=this._logger.create("getSigningKeys");if(this._signingKeys)return e.debug("returning signingKeys from cache"),this._signingKeys;const t=await this.getKeysEndpoint(!1);e.debug("got jwks_uri",t);const r=await this._jsonService.getJson(t,{timeoutInSeconds:this._settings.requestTimeoutInSeconds});if(e.debug("got key set",r),!Array.isArray(r.keys))throw e.throw(new Error("Missing keys on keyset")),null;return this._signingKeys=r.keys,this._signingKeys}},z=class{constructor(){let{prefix:e="oidc.",store:t=localStorage}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._logger=new k("WebStorageStateStore"),this._store=t,this._prefix=e}async set(e,t){this._logger.create("set('".concat(e,"')")),e=this._prefix+e,await this._store.setItem(e,t)}async get(e){this._logger.create("get('".concat(e,"')")),e=this._prefix+e;return await this._store.getItem(e)}async remove(e){this._logger.create("remove('".concat(e,"')")),e=this._prefix+e;const t=await this._store.getItem(e);return await this._store.removeItem(e),t}async getAllKeys(){this._logger.create("getAllKeys");const e=await this._store.length,t=[];for(let r=0;r<e;r++){const e=await this._store.key(r);e&&0===e.indexOf(this._prefix)&&t.push(e.substr(this._prefix.length))}return t}},q="code",K="openid",V="client_secret_post",G=900,J=class{constructor(e){let{authority:t,metadataUrl:r,metadata:i,signingKeys:s,metadataSeed:n,client_id:o,client_secret:a,response_type:l=q,scope:c=K,redirect_uri:u,post_logout_redirect_uri:h,client_authentication:d=V,token_endpoint_auth_signing_alg:f="HS256",prompt:p,display:g,max_age:_,ui_locales:m,acr_values:v,resource:y,response_mode:w,filterProtocolClaims:b=!0,loadUserInfo:S=!1,requestTimeoutInSeconds:x,staleStateAgeInSeconds:C=G,mergeClaimsStrategy:k={array:"replace"},disablePKCE:E=!1,stateStore:R,revokeTokenAdditionalContentTypes:L,fetchRequestCredentials:A,refreshTokenAllowedScope:T,extraQueryParams:j={},extraTokenParams:N={},extraHeaders:D={},dpop:P,omitScopeWhenRequesting:M=!1}=e;var O;if(this.authority=t,r?this.metadataUrl=r:(this.metadataUrl=t,t&&(this.metadataUrl.endsWith("/")||(this.metadataUrl+="/"),this.metadataUrl+=".well-known/openid-configuration")),this.metadata=i,this.metadataSeed=n,this.signingKeys=s,this.client_id=o,this.client_secret=a,this.response_type=l,this.scope=c,this.redirect_uri=u,this.post_logout_redirect_uri=h,this.client_authentication=d,this.token_endpoint_auth_signing_alg=f,this.prompt=p,this.display=g,this.max_age=_,this.ui_locales=m,this.acr_values=v,this.resource=y,this.response_mode=w,this.filterProtocolClaims=null==b||b,this.loadUserInfo=!!S,this.staleStateAgeInSeconds=C,this.mergeClaimsStrategy=k,this.omitScopeWhenRequesting=M,this.disablePKCE=!!E,this.revokeTokenAdditionalContentTypes=L,this.fetchRequestCredentials=A||"same-origin",this.requestTimeoutInSeconds=x,R)this.stateStore=R;else{const e="undefined"!==typeof window?window.localStorage:new H;this.stateStore=new z({store:e})}if(this.refreshTokenAllowedScope=T,this.extraQueryParams=j,this.extraTokenParams=N,this.extraHeaders=D,this.dpop=P,this.dpop&&!(null==(O=this.dpop)?void 0:O.store))throw new Error("A DPoPStore is required when dpop is enabled")}},$=class{constructor(e,t){this._settings=e,this._metadataService=t,this._logger=new k("UserInfoService"),this._getClaimsFromJwt=async e=>{const t=this._logger.create("_getClaimsFromJwt");try{const r=E.decode(e);return t.debug("JWT decoding successful"),r}catch(r){throw t.error("Error parsing JWT response"),r}},this._jsonService=new F(void 0,this._getClaimsFromJwt,this._settings.extraHeaders)}async getClaims(e){const t=this._logger.create("getClaims");e||this._logger.throw(new Error("No token passed"));const r=await this._metadataService.getUserInfoEndpoint();t.debug("got userinfo url",r);const i=await this._jsonService.getJson(r,{token:e,credentials:this._settings.fetchRequestCredentials,timeoutInSeconds:this._settings.requestTimeoutInSeconds});return t.debug("got claims",i),i}},X=class{constructor(e,t){this._settings=e,this._metadataService=t,this._logger=new k("TokenClient"),this._jsonService=new F(this._settings.revokeTokenAdditionalContentTypes,null,this._settings.extraHeaders)}async exchangeCode(e){let{grant_type:t="authorization_code",redirect_uri:r=this._settings.redirect_uri,client_id:i=this._settings.client_id,client_secret:s=this._settings.client_secret,extraHeaders:o}=e,a=(0,n.A)(e,c);const l=this._logger.create("exchangeCode");i||l.throw(new Error("A client_id is required")),r||l.throw(new Error("A redirect_uri is required")),a.code||l.throw(new Error("A code is required"));const u=new URLSearchParams({grant_type:t,redirect_uri:r});for(const[n,c]of Object.entries(a))null!=c&&u.set(n,c);if(("client_secret_basic"===this._settings.client_authentication||"client_secret_jwt"===this._settings.client_authentication)&&(void 0===s||null===s))throw l.throw(new Error("A client_secret is required")),null;let h;const d=await this._metadataService.getTokenEndpoint(!1);switch(this._settings.client_authentication){case"client_secret_basic":h=A.generateBasicAuth(i,s);break;case"client_secret_post":u.append("client_id",i),s&&u.append("client_secret",s);break;case"client_secret_jwt":{const e=await A.generateClientAssertionJwt(i,s,d,this._settings.token_endpoint_auth_signing_alg);u.append("client_id",i),u.append("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),u.append("client_assertion",e);break}}l.debug("got token endpoint");const f=await this._jsonService.postForm(d,{body:u,basicAuth:h,timeoutInSeconds:this._settings.requestTimeoutInSeconds,initCredentials:this._settings.fetchRequestCredentials,extraHeaders:o});return l.debug("got response"),f}async exchangeCredentials(e){let{grant_type:t="password",client_id:r=this._settings.client_id,client_secret:i=this._settings.client_secret,scope:s=this._settings.scope}=e,o=(0,n.A)(e,u);const a=this._logger.create("exchangeCredentials");r||a.throw(new Error("A client_id is required"));const l=new URLSearchParams({grant_type:t});this._settings.omitScopeWhenRequesting||l.set("scope",s);for(const[n,u]of Object.entries(o))null!=u&&l.set(n,u);if(("client_secret_basic"===this._settings.client_authentication||"client_secret_jwt"===this._settings.client_authentication)&&(void 0===i||null===i))throw a.throw(new Error("A client_secret is required")),null;let c;const h=await this._metadataService.getTokenEndpoint(!1);switch(this._settings.client_authentication){case"client_secret_basic":c=A.generateBasicAuth(r,i);break;case"client_secret_post":l.append("client_id",r),i&&l.append("client_secret",i);break;case"client_secret_jwt":{const e=await A.generateClientAssertionJwt(r,i,h,this._settings.token_endpoint_auth_signing_alg);l.append("client_id",r),l.append("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),l.append("client_assertion",e);break}}a.debug("got token endpoint");const d=await this._jsonService.postForm(h,{body:l,basicAuth:c,timeoutInSeconds:this._settings.requestTimeoutInSeconds,initCredentials:this._settings.fetchRequestCredentials});return a.debug("got response"),d}async exchangeRefreshToken(e){let{grant_type:t="refresh_token",client_id:r=this._settings.client_id,client_secret:i=this._settings.client_secret,timeoutInSeconds:s,extraHeaders:o}=e,a=(0,n.A)(e,h);const l=this._logger.create("exchangeRefreshToken");r||l.throw(new Error("A client_id is required")),a.refresh_token||l.throw(new Error("A refresh_token is required"));const c=new URLSearchParams({grant_type:t});for(const[n,h]of Object.entries(a))Array.isArray(h)?h.forEach(e=>c.append(n,e)):null!=h&&c.set(n,h);if(("client_secret_basic"===this._settings.client_authentication||"client_secret_jwt"===this._settings.client_authentication)&&(void 0===i||null===i))throw l.throw(new Error("A client_secret is required")),null;let u;const d=await this._metadataService.getTokenEndpoint(!1);switch(this._settings.client_authentication){case"client_secret_basic":u=A.generateBasicAuth(r,i);break;case"client_secret_post":c.append("client_id",r),i&&c.append("client_secret",i);break;case"client_secret_jwt":{const e=await A.generateClientAssertionJwt(r,i,d,this._settings.token_endpoint_auth_signing_alg);c.append("client_id",r),c.append("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),c.append("client_assertion",e);break}}l.debug("got token endpoint");const f=await this._jsonService.postForm(d,{body:c,basicAuth:u,timeoutInSeconds:s,initCredentials:this._settings.fetchRequestCredentials,extraHeaders:o});return l.debug("got response"),f}async revoke(e){var t;const r=this._logger.create("revoke");e.token||r.throw(new Error("A token is required"));const i=await this._metadataService.getRevocationEndpoint(!1);r.debug("got revocation endpoint, revoking ".concat(null!=(t=e.token_type_hint)?t:"default token type"));const s=new URLSearchParams;for(const[n,o]of Object.entries(e))null!=o&&s.set(n,o);s.set("client_id",this._settings.client_id),this._settings.client_secret&&s.set("client_secret",this._settings.client_secret),await this._jsonService.postForm(i,{body:s,timeoutInSeconds:this._settings.requestTimeoutInSeconds}),r.debug("got response")}},Q=class{constructor(e,t,r){this._settings=e,this._metadataService=t,this._claimsService=r,this._logger=new k("ResponseValidator"),this._userInfoService=new $(this._settings,this._metadataService),this._tokenClient=new X(this._settings,this._metadataService)}async validateSigninResponse(e,t,r){const i=this._logger.create("validateSigninResponse");this._processSigninState(e,t),i.debug("state processed"),await this._processCode(e,t,r),i.debug("code processed"),e.isOpenId&&this._validateIdTokenAttributes(e),i.debug("tokens validated"),await this._processClaims(e,null==t?void 0:t.skipUserInfo,e.isOpenId),i.debug("claims processed")}async validateCredentialsResponse(e,t){const r=this._logger.create("validateCredentialsResponse"),i=e.isOpenId&&!!e.id_token;i&&this._validateIdTokenAttributes(e),r.debug("tokens validated"),await this._processClaims(e,t,i),r.debug("claims processed")}async validateRefreshResponse(e,t){const r=this._logger.create("validateRefreshResponse");e.userState=t.data,null!=e.session_state||(e.session_state=t.session_state),null!=e.scope||(e.scope=t.scope),e.isOpenId&&e.id_token&&(this._validateIdTokenAttributes(e,t.id_token),r.debug("ID Token validated")),e.id_token||(e.id_token=t.id_token,e.profile=t.profile);const i=e.isOpenId&&!!e.id_token;await this._processClaims(e,!1,i),r.debug("claims processed")}validateSignoutResponse(e,t){const r=this._logger.create("validateSignoutResponse");if(t.id!==e.state&&r.throw(new Error("State does not match")),r.debug("state validated"),e.userState=t.data,e.error)throw r.warn("Response was error",e.error),new M(e)}_processSigninState(e,t){const r=this._logger.create("_processSigninState");if(t.id!==e.state&&r.throw(new Error("State does not match")),t.client_id||r.throw(new Error("No client_id on state")),t.authority||r.throw(new Error("No authority on state")),this._settings.authority!==t.authority&&r.throw(new Error("authority mismatch on settings vs. signin state")),this._settings.client_id&&this._settings.client_id!==t.client_id&&r.throw(new Error("client_id mismatch on settings vs. signin state")),r.debug("state validated"),e.userState=t.data,e.url_state=t.url_state,null!=e.scope||(e.scope=t.scope),e.error)throw r.warn("Response was error",e.error),new M(e);t.code_verifier&&!e.code&&r.throw(new Error("Expected code in response"))}async _processClaims(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this._logger.create("_processClaims");if(e.profile=this._claimsService.filterProtocolClaims(e.profile),t||!this._settings.loadUserInfo||!e.access_token)return void i.debug("not loading user info");i.debug("loading user info");const s=await this._userInfoService.getClaims(e.access_token);i.debug("user info claims received from user info endpoint"),r&&s.sub!==e.profile.sub&&i.throw(new Error("subject from UserInfo response does not match subject in ID Token")),e.profile=this._claimsService.mergeClaims(e.profile,this._claimsService.filterProtocolClaims(s)),i.debug("user info claims received, updated profile:",e.profile)}async _processCode(e,t,r){const s=this._logger.create("_processCode");if(e.code){s.debug("Validating code");const n=await this._tokenClient.exchangeCode((0,i.A)({client_id:t.client_id,client_secret:t.client_secret,code:e.code,redirect_uri:t.redirect_uri,code_verifier:t.code_verifier,extraHeaders:r},t.extraTokenParams));Object.assign(e,n)}else s.debug("No code to process")}_validateIdTokenAttributes(e,t){var r;const i=this._logger.create("_validateIdTokenAttributes");i.debug("decoding ID Token JWT");const s=E.decode(null!=(r=e.id_token)?r:"");if(s.sub||i.throw(new Error("ID Token is missing a subject claim")),t){const e=E.decode(t);s.sub!==e.sub&&i.throw(new Error("sub in id_token does not match current sub")),s.auth_time&&s.auth_time!==e.auth_time&&i.throw(new Error("auth_time in id_token does not match original auth_time")),s.azp&&s.azp!==e.azp&&i.throw(new Error("azp in id_token does not match original azp")),!s.azp&&e.azp&&i.throw(new Error("azp not in id_token, but present in original id_token"))}e.profile=s}},Y=class e{constructor(e){this.id=e.id||A.generateUUIDv4(),this.data=e.data,e.created&&e.created>0?this.created=e.created:this.created=N.getEpochTime(),this.request_type=e.request_type,this.url_state=e.url_state}toStorageString(){return new k("State").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,url_state:this.url_state})}static fromStorageString(t){return k.createStatic("State","fromStorageString"),Promise.resolve(new e(JSON.parse(t)))}static async clearStaleState(t,r){const i=k.createStatic("State","clearStaleState"),s=N.getEpochTime()-r,n=await t.getAllKeys();i.debug("got keys",n);for(let a=0;a<n.length;a++){const r=n[a],l=await t.get(r);let c=!1;if(l)try{const t=await e.fromStorageString(l);i.debug("got item from key:",r,t.created),t.created<=s&&(c=!0)}catch(o){i.error("Error parsing state for key:",r,o),c=!0}else i.debug("no item in storage for key:",r),c=!0;c&&(i.debug("removed item for key:",r),t.remove(r))}}},Z=class e extends Y{constructor(e){super(e),this.code_verifier=e.code_verifier,this.code_challenge=e.code_challenge,this.authority=e.authority,this.client_id=e.client_id,this.redirect_uri=e.redirect_uri,this.scope=e.scope,this.client_secret=e.client_secret,this.extraTokenParams=e.extraTokenParams,this.response_mode=e.response_mode,this.skipUserInfo=e.skipUserInfo}static async create(t){const r=!0===t.code_verifier?A.generateCodeVerifier():t.code_verifier||void 0,s=r?await A.generateCodeChallenge(r):void 0;return new e((0,i.A)((0,i.A)({},t),{},{code_verifier:r,code_challenge:s}))}toStorageString(){return new k("SigninState").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,url_state:this.url_state,code_verifier:this.code_verifier,authority:this.authority,client_id:this.client_id,redirect_uri:this.redirect_uri,scope:this.scope,client_secret:this.client_secret,extraTokenParams:this.extraTokenParams,response_mode:this.response_mode,skipUserInfo:this.skipUserInfo})}static fromStorageString(t){k.createStatic("SigninState","fromStorageString");const r=JSON.parse(t);return e.create(r)}},ee=class e{constructor(e){this.url=e.url,this.state=e.state}static async create(t){let{url:r,authority:s,client_id:o,redirect_uri:a,response_type:l,scope:c,state_data:u,response_mode:h,request_type:f,client_secret:p,nonce:g,url_state:_,resource:m,skipUserInfo:v,extraQueryParams:y,extraTokenParams:w,disablePKCE:b,dpopJkt:S,omitScopeWhenRequesting:x}=t,C=(0,n.A)(t,d);if(!r)throw this._logger.error("create: No url passed"),new Error("url");if(!o)throw this._logger.error("create: No client_id passed"),new Error("client_id");if(!a)throw this._logger.error("create: No redirect_uri passed"),new Error("redirect_uri");if(!l)throw this._logger.error("create: No response_type passed"),new Error("response_type");if(!c)throw this._logger.error("create: No scope passed"),new Error("scope");if(!s)throw this._logger.error("create: No authority passed"),new Error("authority");const k=await Z.create({data:u,request_type:f,url_state:_,code_verifier:!b,client_id:o,authority:s,redirect_uri:a,response_mode:h,client_secret:p,scope:c,extraTokenParams:w,skipUserInfo:v}),E=new URL(r);E.searchParams.append("client_id",o),E.searchParams.append("redirect_uri",a),E.searchParams.append("response_type",l),x||E.searchParams.append("scope",c),g&&E.searchParams.append("nonce",g),S&&E.searchParams.append("dpop_jkt",S);let R=k.id;if(_&&(R="".concat(R).concat(P).concat(_)),E.searchParams.append("state",R),k.code_challenge&&(E.searchParams.append("code_challenge",k.code_challenge),E.searchParams.append("code_challenge_method","S256")),m){(Array.isArray(m)?m:[m]).forEach(e=>E.searchParams.append("resource",e))}for(const[e,n]of Object.entries((0,i.A)((0,i.A)({response_mode:h},C),y)))null!=n&&E.searchParams.append(e,n.toString());return new e({url:E.href,state:k})}};ee._logger=new k("SigninRequest");var te=ee,re=class{constructor(e){if(this.access_token="",this.token_type="",this.profile={},this.state=e.get("state"),this.session_state=e.get("session_state"),this.state){const e=decodeURIComponent(this.state).split(P);this.state=e[0],e.length>1&&(this.url_state=e.slice(1).join(P))}this.error=e.get("error"),this.error_description=e.get("error_description"),this.error_uri=e.get("error_uri"),this.code=e.get("code")}get expires_in(){if(void 0!==this.expires_at)return this.expires_at-N.getEpochTime()}set expires_in(e){"string"===typeof e&&(e=Number(e)),void 0!==e&&e>=0&&(this.expires_at=Math.floor(e)+N.getEpochTime())}get isOpenId(){var e;return(null==(e=this.scope)?void 0:e.split(" ").includes("openid"))||!!this.id_token}},ie=class{constructor(e){let{url:t,state_data:r,id_token_hint:s,post_logout_redirect_uri:n,extraQueryParams:o,request_type:a,client_id:l,url_state:c}=e;if(this._logger=new k("SignoutRequest"),!t)throw this._logger.error("ctor: No url passed"),new Error("url");const u=new URL(t);if(s&&u.searchParams.append("id_token_hint",s),l&&u.searchParams.append("client_id",l),n&&(u.searchParams.append("post_logout_redirect_uri",n),r||c)){this.state=new Y({data:r,request_type:a,url_state:c});let e=this.state.id;c&&(e="".concat(e).concat(P).concat(c)),u.searchParams.append("state",e)}for(const[h,d]of Object.entries((0,i.A)({},o)))null!=d&&u.searchParams.append(h,d.toString());this.url=u.href}},se=class{constructor(e){if(this.state=e.get("state"),this.state){const e=decodeURIComponent(this.state).split(P);this.state=e[0],e.length>1&&(this.url_state=e.slice(1).join(P))}this.error=e.get("error"),this.error_description=e.get("error_description"),this.error_uri=e.get("error_uri")}},ne=["nbf","jti","auth_time","nonce","acr","amr","azp","at_hash"],oe=["sub","iss","aud","exp","iat"],ae=class{constructor(e){this._settings=e,this._logger=new k("ClaimsService")}filterProtocolClaims(e){const t=(0,i.A)({},e);if(this._settings.filterProtocolClaims){let e;e=Array.isArray(this._settings.filterProtocolClaims)?this._settings.filterProtocolClaims:ne;for(const r of e)oe.includes(r)||delete t[r]}return t}mergeClaims(e,t){const r=(0,i.A)({},e);for(const[i,s]of Object.entries(t))if(r[i]!==s)if(Array.isArray(r[i])||Array.isArray(s))if("replace"==this._settings.mergeClaimsStrategy.array)r[i]=s;else{const e=Array.isArray(r[i])?r[i]:[r[i]];for(const t of Array.isArray(s)?s:[s])e.includes(t)||e.push(t);r[i]=e}else"object"===typeof r[i]&&"object"===typeof s?r[i]=this.mergeClaims(r[i],s):r[i]=s;return r}},le=class{constructor(e,t){this.keys=e,this.nonce=t}},ce=class{constructor(e,t){this._logger=new k("OidcClient"),this.settings=e instanceof J?e:new J(e),this.metadataService=null!=t?t:new W(this.settings),this._claimsService=new ae(this.settings),this._validator=new Q(this.settings,this.metadataService,this._claimsService),this._tokenClient=new X(this.settings,this.metadataService)}async createSigninRequest(e){let{state:t,request:r,request_uri:i,request_type:s,id_token_hint:n,login_hint:o,skipUserInfo:a,nonce:l,url_state:c,response_type:u=this.settings.response_type,scope:h=this.settings.scope,redirect_uri:d=this.settings.redirect_uri,prompt:f=this.settings.prompt,display:p=this.settings.display,max_age:g=this.settings.max_age,ui_locales:_=this.settings.ui_locales,acr_values:m=this.settings.acr_values,resource:v=this.settings.resource,response_mode:y=this.settings.response_mode,extraQueryParams:w=this.settings.extraQueryParams,extraTokenParams:b=this.settings.extraTokenParams,dpopJkt:S,omitScopeWhenRequesting:x=this.settings.omitScopeWhenRequesting}=e;const C=this._logger.create("createSigninRequest");if("code"!==u)throw new Error("Only the Authorization Code flow (with PKCE) is supported");const k=await this.metadataService.getAuthorizationEndpoint();C.debug("Received authorization endpoint",k);const E=await te.create({url:k,authority:this.settings.authority,client_id:this.settings.client_id,redirect_uri:d,response_type:u,scope:h,state_data:t,url_state:c,prompt:f,display:p,max_age:g,ui_locales:_,id_token_hint:n,login_hint:o,acr_values:m,dpopJkt:S,resource:v,request:r,request_uri:i,extraQueryParams:w,extraTokenParams:b,request_type:s,response_mode:y,client_secret:this.settings.client_secret,skipUserInfo:a,nonce:l,disablePKCE:this.settings.disablePKCE,omitScopeWhenRequesting:x});await this.clearStaleState();const R=E.state;return await this.settings.stateStore.set(R.id,R.toStorageString()),E}async readSigninResponseState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=this._logger.create("readSigninResponseState"),i=new re(D.readParams(e,this.settings.response_mode));if(!i.state)throw r.throw(new Error("No state in response")),null;const s=await this.settings.stateStore[t?"remove":"get"](i.state);if(!s)throw r.throw(new Error("No matching state found in storage")),null;return{state:await Z.fromStorageString(s),response:i}}async processSigninResponse(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const s=this._logger.create("processSigninResponse"),{state:n,response:o}=await this.readSigninResponseState(e,r);if(s.debug("received state from storage; validating response"),this.settings.dpop&&this.settings.dpop.store){const e=await this.getDpopProof(this.settings.dpop.store);t=(0,i.A)((0,i.A)({},t),{},{DPoP:e})}try{await this._validator.validateSigninResponse(o,n,t)}catch(a){if(!(a instanceof U&&this.settings.dpop))throw a;{const e=await this.getDpopProof(this.settings.dpop.store,a.nonce);t.DPoP=e,await this._validator.validateSigninResponse(o,n,t)}}return o}async getDpopProof(e,t){let r,i;return(await e.getAllKeys()).includes(this.settings.client_id)?(i=await e.get(this.settings.client_id),i.nonce!==t&&t&&(i.nonce=t,await e.set(this.settings.client_id,i))):(r=await A.generateDPoPKeys(),i=new le(r,t),await e.set(this.settings.client_id,i)),await A.generateDPoPProof({url:await this.metadataService.getTokenEndpoint(!1),httpMethod:"POST",keyPair:i.keys,nonce:i.nonce})}async processResourceOwnerPasswordCredentials(e){let{username:t,password:r,skipUserInfo:s=!1,extraTokenParams:n={}}=e;const o=await this._tokenClient.exchangeCredentials((0,i.A)({username:t,password:r},n)),a=new re(new URLSearchParams);return Object.assign(a,o),await this._validator.validateCredentialsResponse(a,s),a}async useRefreshToken(e){let{state:t,redirect_uri:r,resource:s,timeoutInSeconds:n,extraHeaders:o,extraTokenParams:a}=e;var l;const c=this._logger.create("useRefreshToken");let u,h;if(void 0===this.settings.refreshTokenAllowedScope)u=t.scope;else{const e=this.settings.refreshTokenAllowedScope.split(" ");u=((null==(l=t.scope)?void 0:l.split(" "))||[]).filter(t=>e.includes(t)).join(" ")}if(this.settings.dpop&&this.settings.dpop.store){const e=await this.getDpopProof(this.settings.dpop.store);o=(0,i.A)((0,i.A)({},o),{},{DPoP:e})}try{h=await this._tokenClient.exchangeRefreshToken((0,i.A)({refresh_token:t.refresh_token,scope:u,redirect_uri:r,resource:s,timeoutInSeconds:n,extraHeaders:o},a))}catch(f){if(!(f instanceof U&&this.settings.dpop))throw f;o.DPoP=await this.getDpopProof(this.settings.dpop.store,f.nonce),h=await this._tokenClient.exchangeRefreshToken((0,i.A)({refresh_token:t.refresh_token,scope:u,redirect_uri:r,resource:s,timeoutInSeconds:n,extraHeaders:o},a))}const d=new re(new URLSearchParams);return Object.assign(d,h),c.debug("validating response",d),await this._validator.validateRefreshResponse(d,(0,i.A)((0,i.A)({},t),{},{scope:u})),d}async createSignoutRequest(){let{state:e,id_token_hint:t,client_id:r,request_type:i,url_state:s,post_logout_redirect_uri:n=this.settings.post_logout_redirect_uri,extraQueryParams:o=this.settings.extraQueryParams}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=this._logger.create("createSignoutRequest"),l=await this.metadataService.getEndSessionEndpoint();if(!l)throw a.throw(new Error("No end session endpoint")),null;a.debug("Received end session endpoint",l),r||!n||t||(r=this.settings.client_id);const c=new ie({url:l,id_token_hint:t,client_id:r,post_logout_redirect_uri:n,state_data:e,extraQueryParams:o,request_type:i,url_state:s});await this.clearStaleState();const u=c.state;return u&&(a.debug("Signout request has state to persist"),await this.settings.stateStore.set(u.id,u.toStorageString())),c}async readSignoutResponseState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=this._logger.create("readSignoutResponseState"),i=new se(D.readParams(e,this.settings.response_mode));if(!i.state){if(r.debug("No state in response"),i.error)throw r.warn("Response was error:",i.error),new M(i);return{state:void 0,response:i}}const s=await this.settings.stateStore[t?"remove":"get"](i.state);if(!s)throw r.throw(new Error("No matching state found in storage")),null;return{state:await Y.fromStorageString(s),response:i}}async processSignoutResponse(e){const t=this._logger.create("processSignoutResponse"),{state:r,response:i}=await this.readSignoutResponseState(e,!0);return r?(t.debug("Received state from storage; validating response"),this._validator.validateSignoutResponse(i,r)):t.debug("No state from storage; skipping response validation"),i}clearStaleState(){return this._logger.create("clearStaleState"),Y.clearStaleState(this.settings.stateStore,this.settings.staleStateAgeInSeconds)}async revokeToken(e,t){return this._logger.create("revokeToken"),await this._tokenClient.revoke({token:e,token_type_hint:t})}},ue=class{constructor(e){this._userManager=e,this._logger=new k("SessionMonitor"),this._start=async e=>{const t=e.session_state;if(!t)return;const r=this._logger.create("_start");if(e.profile?(this._sub=e.profile.sub,r.debug("session_state",t,", sub",this._sub)):(this._sub=void 0,r.debug("session_state",t,", anonymous user")),this._checkSessionIFrame)this._checkSessionIFrame.start(t);else try{const e=await this._userManager.metadataService.getCheckSessionIframe();if(e){r.debug("initializing check session iframe");const i=this._userManager.settings.client_id,s=this._userManager.settings.checkSessionIntervalInSeconds,n=this._userManager.settings.stopCheckSessionOnError,o=new B(this._callback,i,e,s,n);await o.load(),this._checkSessionIFrame=o,o.start(t)}else r.warn("no check session iframe found in the metadata")}catch(i){r.error("Error from getCheckSessionIframe:",i instanceof Error?i.message:i)}},this._stop=()=>{const e=this._logger.create("_stop");if(this._sub=void 0,this._checkSessionIFrame&&this._checkSessionIFrame.stop(),this._userManager.settings.monitorAnonymousSession){const t=setInterval(async()=>{clearInterval(t);try{const e=await this._userManager.querySessionStatus();if(e){const t={session_state:e.session_state,profile:e.sub?{sub:e.sub}:null};this._start(t)}}catch(r){e.error("error from querySessionStatus",r instanceof Error?r.message:r)}},1e3)}},this._callback=async()=>{const e=this._logger.create("_callback");try{const t=await this._userManager.querySessionStatus();let r=!0;t&&this._checkSessionIFrame?t.sub===this._sub?(r=!1,this._checkSessionIFrame.start(t.session_state),e.debug("same sub still logged in at OP, session state has changed, restarting check session iframe; session_state",t.session_state),await this._userManager.events._raiseUserSessionChanged()):e.debug("different subject signed into OP",t.sub):e.debug("subject no longer signed into OP"),r?this._sub?await this._userManager.events._raiseUserSignedOut():await this._userManager.events._raiseUserSignedIn():e.debug("no change in session detected, no event to raise")}catch(t){this._sub&&(e.debug("Error calling queryCurrentSigninSession; raising signed out event",t),await this._userManager.events._raiseUserSignedOut())}},e||this._logger.throw(new Error("No user manager passed")),this._userManager.events.addUserLoaded(this._start),this._userManager.events.addUserUnloaded(this._stop),this._init().catch(e=>{this._logger.error(e)})}async _init(){this._logger.create("_init");const e=await this._userManager.getUser();if(e)this._start(e);else if(this._userManager.settings.monitorAnonymousSession){const e=await this._userManager.querySessionStatus();if(e){const t={session_state:e.session_state,profile:e.sub?{sub:e.sub}:null};this._start(t)}}}},he=class e{constructor(e){var t;this.id_token=e.id_token,this.session_state=null!=(t=e.session_state)?t:null,this.access_token=e.access_token,this.refresh_token=e.refresh_token,this.token_type=e.token_type,this.scope=e.scope,this.profile=e.profile,this.expires_at=e.expires_at,this.state=e.userState,this.url_state=e.url_state}get expires_in(){if(void 0!==this.expires_at)return this.expires_at-N.getEpochTime()}set expires_in(e){void 0!==e&&(this.expires_at=Math.floor(e)+N.getEpochTime())}get expired(){const e=this.expires_in;if(void 0!==e)return e<=0}get scopes(){var e,t;return null!=(t=null==(e=this.scope)?void 0:e.split(" "))?t:[]}toStorageString(){return new k("User").create("toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})}static fromStorageString(t){return k.createStatic("User","fromStorageString"),new e(JSON.parse(t))}},de="oidc-client",fe=class{constructor(){this._abort=new T("Window navigation aborted"),this._disposeHandlers=new Set,this._window=null}async navigate(e){const t=this._logger.create("navigate");if(!this._window)throw new Error("Attempted to navigate on a disposed window");t.debug("setting URL in window"),this._window.location.replace(e.url);const{url:r,keepOpen:i}=await new Promise((r,i)=>{const s=s=>{var n;const o=s.data,a=null!=(n=e.scriptOrigin)?n:window.location.origin;if(s.origin===a&&(null==o?void 0:o.source)===de){try{const r=D.readParams(o.url,e.response_mode).get("state");if(r||t.warn("no state found in response url"),s.source!==this._window&&r!==e.state)return}catch(l){this._dispose(),i(new Error("Invalid response from window"))}r(o)}};window.addEventListener("message",s,!1),this._disposeHandlers.add(()=>window.removeEventListener("message",s,!1));const n=new BroadcastChannel("oidc-client-popup-".concat(e.state));n.addEventListener("message",s,!1),this._disposeHandlers.add(()=>n.close()),this._disposeHandlers.add(this._abort.addHandler(e=>{this._dispose(),i(e)}))});return t.debug("got response from window"),this._dispose(),i||this.close(),{url:r}}_dispose(){this._logger.create("_dispose");for(const e of this._disposeHandlers)e();this._disposeHandlers.clear()}static _notifyParent(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window.location.origin;const s={source:de,url:t,keepOpen:r},n=new k("_notifyParent");if(e)n.debug("With parent. Using parent.postMessage."),e.postMessage(s,i);else{n.debug("No parent. Using BroadcastChannel.");const e=new URL(t).searchParams.get("state");if(!e)throw new Error("No parent and no state in URL. Can't complete notification.");const r=new BroadcastChannel("oidc-client-popup-".concat(e));r.postMessage(s),r.close()}}},pe={location:!1,toolbar:!1,height:640,closePopupWindowAfterInSeconds:-1},ge="_blank",_e=60,me=2,ve=10,ye=class extends J{constructor(e){const{popup_redirect_uri:t=e.redirect_uri,popup_post_logout_redirect_uri:r=e.post_logout_redirect_uri,popupWindowFeatures:i=pe,popupWindowTarget:s=ge,redirectMethod:n="assign",redirectTarget:o="self",iframeNotifyParentOrigin:a=e.iframeNotifyParentOrigin,iframeScriptOrigin:l=e.iframeScriptOrigin,requestTimeoutInSeconds:c,silent_redirect_uri:u=e.redirect_uri,silentRequestTimeoutInSeconds:h,automaticSilentRenew:d=!0,validateSubOnSilentRenew:f=!0,includeIdTokenInSilentRenew:p=!1,monitorSession:g=!1,monitorAnonymousSession:_=!1,checkSessionIntervalInSeconds:m=me,query_status_response_type:v="code",stopCheckSessionOnError:y=!0,revokeTokenTypes:w=["access_token","refresh_token"],revokeTokensOnSignout:b=!1,includeIdTokenInSilentSignout:S=!1,accessTokenExpiringNotificationTimeInSeconds:x=_e,userStore:C}=e;if(super(e),this.popup_redirect_uri=t,this.popup_post_logout_redirect_uri=r,this.popupWindowFeatures=i,this.popupWindowTarget=s,this.redirectMethod=n,this.redirectTarget=o,this.iframeNotifyParentOrigin=a,this.iframeScriptOrigin=l,this.silent_redirect_uri=u,this.silentRequestTimeoutInSeconds=h||c||ve,this.automaticSilentRenew=d,this.validateSubOnSilentRenew=f,this.includeIdTokenInSilentRenew=p,this.monitorSession=g,this.monitorAnonymousSession=_,this.checkSessionIntervalInSeconds=m,this.stopCheckSessionOnError=y,this.query_status_response_type=v,this.revokeTokenTypes=w,this.revokeTokensOnSignout=b,this.includeIdTokenInSilentSignout=S,this.accessTokenExpiringNotificationTimeInSeconds=x,C)this.userStore=C;else{const e="undefined"!==typeof window?window.sessionStorage:new H;this.userStore=new z({store:e})}}},we=class e extends fe{constructor(t){let{silentRequestTimeoutInSeconds:r=ve}=t;super(),this._logger=new k("IFrameWindow"),this._timeoutInSeconds=r,this._frame=e.createHiddenIframe(),this._window=this._frame.contentWindow}static createHiddenIframe(){const e=window.document.createElement("iframe");return e.style.visibility="hidden",e.style.position="fixed",e.style.left="-1000px",e.style.top="0",e.width="0",e.height="0",window.document.body.appendChild(e),e}async navigate(e){this._logger.debug("navigate: Using timeout of:",this._timeoutInSeconds);const t=setTimeout(()=>{this._abort.raise(new O("IFrame timed out without a response"))},1e3*this._timeoutInSeconds);return this._disposeHandlers.add(()=>clearTimeout(t)),await super.navigate(e)}close(){var e;this._frame&&(this._frame.parentNode&&(this._frame.addEventListener("load",e=>{var t;const r=e.target;null==(t=r.parentNode)||t.removeChild(r),this._abort.raise(new Error("IFrame removed from DOM"))},!0),null==(e=this._frame.contentWindow)||e.location.replace("about:blank")),this._frame=null),this._window=null}static notifyParent(e,t){return super._notifyParent(window.parent,e,!1,t)}},be=class{constructor(e){this._settings=e,this._logger=new k("IFrameNavigator")}async prepare(e){let{silentRequestTimeoutInSeconds:t=this._settings.silentRequestTimeoutInSeconds}=e;return new we({silentRequestTimeoutInSeconds:t})}async callback(e){this._logger.create("callback"),we.notifyParent(e,this._settings.iframeNotifyParentOrigin)}},Se=class extends fe{constructor(e){let{popupWindowTarget:t=ge,popupWindowFeatures:r={},popupSignal:s,popupAbortOnClose:n}=e;super(),this._logger=new k("PopupWindow");const o=j.center((0,i.A)((0,i.A)({},pe),r));this._window=window.open(void 0,t,j.serialize(o)),this.abortOnClose=Boolean(n),s&&s.addEventListener("abort",()=>{var e;this._abort.raise(new Error(null!=(e=s.reason)?e:"Popup aborted"))}),r.closePopupWindowAfterInSeconds&&r.closePopupWindowAfterInSeconds>0&&setTimeout(()=>{this._window&&"boolean"===typeof this._window.closed&&!this._window.closed?this.close():this._abort.raise(new Error("Popup blocked by user"))},1e3*r.closePopupWindowAfterInSeconds)}async navigate(e){var t;null==(t=this._window)||t.focus();const r=setInterval(()=>{this._window&&!this._window.closed||(this._logger.debug("Popup closed by user or isolated by redirect"),i(),this._disposeHandlers.delete(i),this.abortOnClose&&this._abort.raise(new Error("Popup closed by user")))},500),i=()=>clearInterval(r);return this._disposeHandlers.add(i),await super.navigate(e)}close(){this._window&&(this._window.closed||(this._window.close(),this._abort.raise(new Error("Popup closed")))),this._window=null}static notifyOpener(e,t){super._notifyParent(window.opener,e,t),t||window.opener||window.close()}},xe=class{constructor(e){this._settings=e,this._logger=new k("PopupNavigator")}async prepare(e){let{popupWindowFeatures:t=this._settings.popupWindowFeatures,popupWindowTarget:r=this._settings.popupWindowTarget,popupSignal:i,popupAbortOnClose:s}=e;return new Se({popupWindowFeatures:t,popupWindowTarget:r,popupSignal:i,popupAbortOnClose:s})}async callback(e,t){let{keepOpen:r=!1}=t;this._logger.create("callback"),Se.notifyOpener(e,r)}},Ce=class{constructor(e){this._settings=e,this._logger=new k("RedirectNavigator")}async prepare(e){let{redirectMethod:t=this._settings.redirectMethod,redirectTarget:r=this._settings.redirectTarget}=e;var i;this._logger.create("prepare");let s=window.self;"top"===r&&(s=null!=(i=window.top)?i:window.self);const n=s.location[t].bind(s.location);let o;return{navigate:async e=>{this._logger.create("navigate");const t=new Promise((t,r)=>{o=r,window.addEventListener("pageshow",()=>t(window.location.href)),n(e.url)});return await t},close:()=>{this._logger.create("close"),null==o||o(new Error("Redirect aborted")),s.stop()}}}async callback(){}},ke=class extends I{constructor(e){super({expiringNotificationTimeInSeconds:e.accessTokenExpiringNotificationTimeInSeconds}),this._logger=new k("UserManagerEvents"),this._userLoaded=new T("User loaded"),this._userUnloaded=new T("User unloaded"),this._silentRenewError=new T("Silent renew error"),this._userSignedIn=new T("User signed in"),this._userSignedOut=new T("User signed out"),this._userSessionChanged=new T("User session changed")}async load(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];await super.load(e),t&&await this._userLoaded.raise(e)}async unload(){await super.unload(),await this._userUnloaded.raise()}addUserLoaded(e){return this._userLoaded.addHandler(e)}removeUserLoaded(e){return this._userLoaded.removeHandler(e)}addUserUnloaded(e){return this._userUnloaded.addHandler(e)}removeUserUnloaded(e){return this._userUnloaded.removeHandler(e)}addSilentRenewError(e){return this._silentRenewError.addHandler(e)}removeSilentRenewError(e){return this._silentRenewError.removeHandler(e)}async _raiseSilentRenewError(e){await this._silentRenewError.raise(e)}addUserSignedIn(e){return this._userSignedIn.addHandler(e)}removeUserSignedIn(e){this._userSignedIn.removeHandler(e)}async _raiseUserSignedIn(){await this._userSignedIn.raise()}addUserSignedOut(e){return this._userSignedOut.addHandler(e)}removeUserSignedOut(e){this._userSignedOut.removeHandler(e)}async _raiseUserSignedOut(){await this._userSignedOut.raise()}addUserSessionChanged(e){return this._userSessionChanged.addHandler(e)}removeUserSessionChanged(e){this._userSessionChanged.removeHandler(e)}async _raiseUserSessionChanged(){await this._userSessionChanged.raise()}},Ee=class{constructor(e){this._userManager=e,this._logger=new k("SilentRenewService"),this._isStarted=!1,this._retryTimer=new N("Retry Silent Renew"),this._tokenExpiring=async()=>{const e=this._logger.create("_tokenExpiring");try{await this._userManager.signinSilent(),e.debug("silent token renewal successful")}catch(t){if(t instanceof O)return e.warn("ErrorTimeout from signinSilent:",t,"retry in 5s"),void this._retryTimer.init(5);e.error("Error from signinSilent:",t),await this._userManager.events._raiseSilentRenewError(t)}}}async start(){const e=this._logger.create("start");if(!this._isStarted){this._isStarted=!0,this._userManager.events.addAccessTokenExpiring(this._tokenExpiring),this._retryTimer.addHandler(this._tokenExpiring);try{await this._userManager.getUser()}catch(t){e.error("getUser error",t)}}}stop(){this._isStarted&&(this._retryTimer.cancel(),this._retryTimer.removeHandler(this._tokenExpiring),this._userManager.events.removeAccessTokenExpiring(this._tokenExpiring),this._isStarted=!1)}},Re=class{constructor(e){this.refresh_token=e.refresh_token,this.id_token=e.id_token,this.session_state=e.session_state,this.scope=e.scope,this.profile=e.profile,this.data=e.state}};const Le=["children","onSigninCallback","skipSigninCallback","matchSignoutCallback","onSignoutCallback","onRemoveUser","userManager"];var Ae=s.createContext(void 0);Ae.displayName="AuthContext";var Te={isLoading:!0,isAuthenticated:!1},je=(e,t)=>{switch(t.type){case"INITIALISED":case"USER_LOADED":return(0,i.A)((0,i.A)({},e),{},{user:t.user,isLoading:!1,isAuthenticated:!!t.user&&!t.user.expired,error:void 0});case"USER_SIGNED_OUT":case"USER_UNLOADED":return(0,i.A)((0,i.A)({},e),{},{user:void 0,isAuthenticated:!1});case"NAVIGATOR_INIT":return(0,i.A)((0,i.A)({},e),{},{isLoading:!0,activeNavigator:t.method});case"NAVIGATOR_CLOSE":return(0,i.A)((0,i.A)({},e),{},{isLoading:!1,activeNavigator:void 0});case"ERROR":{const r=t.error;return r.toString=()=>"".concat(r.name,": ").concat(r.message),(0,i.A)((0,i.A)({},e),{},{isLoading:!1,error:r})}default:{const r=new TypeError("unknown type ".concat(t.type)),s={name:r.name,message:r.message,innerError:r,stack:r.stack,source:"unknown",toString:()=>"".concat(s.name,": ").concat(s.message)};return(0,i.A)((0,i.A)({},e),{},{isLoading:!1,error:s})}}},Ne=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location,t=new URLSearchParams(e.search);return!(!t.get("code")&&!t.get("error")||!t.get("state"))||(t=new URLSearchParams(e.hash.replace("#","?")),!(!t.get("code")&&!t.get("error")||!t.get("state")))},De=Ie("signinCallback","Sign-in failed"),Pe=Ie("signoutCallback","Sign-out failed"),Me=Ie("renewSilent","Renew silent failed");function Oe(e,t){return{name:Be(e,"name",()=>"Error"),message:Be(e,"message",()=>t),stack:Be(e,"stack",()=>(new Error).stack),innerError:e}}function Ie(e,t){return r=>(0,i.A)((0,i.A)({},Oe(r,t)),{},{source:e})}function Be(e,t,r){if(e&&"object"===typeof e){const r=e[t];if("string"===typeof r)return r}return r()}var He=["clearStaleState","querySessionStatus","revokeTokens","startSilentRenew","stopSilentRenew"],Ue=["signinPopup","signinSilent","signinRedirect","signinResourceOwnerCredentials","signoutPopup","signoutRedirect","signoutSilent"],Fe=e=>()=>{throw new Error("UserManager#".concat(e," was called from an unsupported context. If this is a server-rendered page, defer this call with useEffect() or pass a custom UserManager implementation."))},We="undefined"===typeof window?null:class{constructor(e,t,r,i){this._logger=new k("UserManager"),this.settings=new ye(e),this._client=new ce(e),this._redirectNavigator=null!=t?t:new Ce(this.settings),this._popupNavigator=null!=r?r:new xe(this.settings),this._iframeNavigator=null!=i?i:new be(this.settings),this._events=new ke(this.settings),this._silentRenewService=new Ee(this),this.settings.automaticSilentRenew&&this.startSilentRenew(),this._sessionMonitor=null,this.settings.monitorSession&&(this._sessionMonitor=new ue(this))}get events(){return this._events}get metadataService(){return this._client.metadataService}async getUser(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this._logger.create("getUser"),r=await this._loadUser();return r?(t.info("user loaded"),await this._events.load(r,e),r):(t.info("user not found in storage"),null)}async removeUser(){const e=this._logger.create("removeUser");await this.storeUser(null),e.info("user removed from storage"),await this._events.unload()}async signinRedirect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;this._logger.create("signinRedirect");const{redirectMethod:r}=e,s=(0,n.A)(e,f);let o;(null==(t=this.settings.dpop)?void 0:t.bind_authorization_code)&&(o=await this.generateDPoPJkt(this.settings.dpop));const a=await this._redirectNavigator.prepare({redirectMethod:r});await this._signinStart((0,i.A)({request_type:"si:r",dpopJkt:o},s),a)}async signinRedirectCallback(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;const t=this._logger.create("signinRedirectCallback"),r=await this._signinEnd(e);return r.profile&&r.profile.sub?t.info("success, signed in subject",r.profile.sub):t.info("no subject"),r}async signinResourceOwnerCredentials(e){let{username:t,password:r,skipUserInfo:i=!1}=e;const s=this._logger.create("signinResourceOwnerCredential"),n=await this._client.processResourceOwnerPasswordCredentials({username:t,password:r,skipUserInfo:i,extraTokenParams:this.settings.extraTokenParams});s.debug("got signin response");const o=await this._buildUser(n);return o.profile&&o.profile.sub?s.info("success, signed in subject",o.profile.sub):s.info("no subject"),o}async signinPopup(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;const r=this._logger.create("signinPopup");let s;(null==(t=this.settings.dpop)?void 0:t.bind_authorization_code)&&(s=await this.generateDPoPJkt(this.settings.dpop));const{popupWindowFeatures:o,popupWindowTarget:a,popupSignal:l}=e,c=(0,n.A)(e,p),u=this.settings.popup_redirect_uri;u||r.throw(new Error("No popup_redirect_uri configured"));const h=await this._popupNavigator.prepare({popupWindowFeatures:o,popupWindowTarget:a,popupSignal:l}),d=await this._signin((0,i.A)({request_type:"si:p",redirect_uri:u,display:"popup",dpopJkt:s},c),h);return d&&(d.profile&&d.profile.sub?r.info("success, signed in subject",d.profile.sub):r.info("no subject")),d}async signinPopupCallback(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=this._logger.create("signinPopupCallback");await this._popupNavigator.callback(e,{keepOpen:t}),r.info("success")}async signinSilent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t,r;const s=this._logger.create("signinSilent"),{silentRequestTimeoutInSeconds:o}=e,a=(0,n.A)(e,g);let l,c=await this._loadUser();if(!e.forceIframeAuth&&(null==c?void 0:c.refresh_token)){s.debug("using refresh token");const e=new Re(c);return await this._useRefreshToken({state:e,redirect_uri:a.redirect_uri,resource:a.resource,extraTokenParams:a.extraTokenParams,timeoutInSeconds:o})}(null==(t=this.settings.dpop)?void 0:t.bind_authorization_code)&&(l=await this.generateDPoPJkt(this.settings.dpop));const u=this.settings.silent_redirect_uri;let h;u||s.throw(new Error("No silent_redirect_uri configured")),c&&this.settings.validateSubOnSilentRenew&&(s.debug("subject prior to silent renew:",c.profile.sub),h=c.profile.sub);const d=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:o});return c=await this._signin((0,i.A)({request_type:"si:s",redirect_uri:u,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?null==c?void 0:c.id_token:void 0,dpopJkt:l},a),d,h),c&&((null==(r=c.profile)?void 0:r.sub)?s.info("success, signed in subject",c.profile.sub):s.info("no subject")),c}async _useRefreshToken(e){const t=await this._client.useRefreshToken((0,i.A)({timeoutInSeconds:this.settings.silentRequestTimeoutInSeconds},e)),r=new he((0,i.A)((0,i.A)({},e.state),t));return await this.storeUser(r),await this._events.load(r),r}async signinSilentCallback(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;const t=this._logger.create("signinSilentCallback");await this._iframeNavigator.callback(e),t.info("success")}async signinCallback(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;const{state:t}=await this._client.readSigninResponseState(e);switch(t.request_type){case"si:r":return await this.signinRedirectCallback(e);case"si:p":await this.signinPopupCallback(e);break;case"si:s":await this.signinSilentCallback(e);break;default:throw new Error("invalid response_type in state")}}async signoutCallback(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{state:r}=await this._client.readSignoutResponseState(e);if(r)switch(r.request_type){case"so:r":return await this.signoutRedirectCallback(e);case"so:p":await this.signoutPopupCallback(e,t);break;case"so:s":await this.signoutSilentCallback(e);break;default:throw new Error("invalid response_type in state")}}async querySessionStatus(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this._logger.create("querySessionStatus"),{silentRequestTimeoutInSeconds:r}=e,s=(0,n.A)(e,_),o=this.settings.silent_redirect_uri;o||t.throw(new Error("No silent_redirect_uri configured"));const a=await this._loadUser(),l=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:r}),c=await this._signinStart((0,i.A)({request_type:"si:s",redirect_uri:o,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?null==a?void 0:a.id_token:void 0,response_type:this.settings.query_status_response_type,scope:"openid",skipUserInfo:!0},s),l);try{const e={},r=await this._client.processSigninResponse(c.url,e);return t.debug("got signin response"),r.session_state&&r.profile.sub?(t.info("success for subject",r.profile.sub),{session_state:r.session_state,sub:r.profile.sub}):(t.info("success, user not authenticated"),null)}catch(u){if(this.settings.monitorAnonymousSession&&u instanceof M)switch(u.error){case"login_required":case"consent_required":case"interaction_required":case"account_selection_required":return t.info("success for anonymous user"),{session_state:u.session_state}}throw u}}async _signin(e,t,r){const i=await this._signinStart(e,t);return await this._signinEnd(i.url,r)}async _signinStart(e,t){const r=this._logger.create("_signinStart");try{const i=await this._client.createSigninRequest(e);return r.debug("got signin request"),await t.navigate({url:i.url,state:i.state.id,response_mode:i.state.response_mode,scriptOrigin:this.settings.iframeScriptOrigin})}catch(i){throw r.debug("error after preparing navigator, closing navigator window"),t.close(),i}}async _signinEnd(e,t){const r=this._logger.create("_signinEnd"),i=await this._client.processSigninResponse(e,{});r.debug("got signin response");return await this._buildUser(i,t)}async _buildUser(e,t){const r=this._logger.create("_buildUser"),s=new he(e);if(t){if(t!==s.profile.sub)throw r.debug("current user does not match user returned from signin. sub from signin:",s.profile.sub),new M((0,i.A)((0,i.A)({},e),{},{error:"login_required"}));r.debug("current user matches user returned from signin")}return await this.storeUser(s),r.debug("user stored"),await this._events.load(s),s}async signoutRedirect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this._logger.create("signoutRedirect"),{redirectMethod:r}=e,s=(0,n.A)(e,m),o=await this._redirectNavigator.prepare({redirectMethod:r});await this._signoutStart((0,i.A)({request_type:"so:r",post_logout_redirect_uri:this.settings.post_logout_redirect_uri},s),o),t.info("success")}async signoutRedirectCallback(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;const t=this._logger.create("signoutRedirectCallback"),r=await this._signoutEnd(e);return t.info("success"),r}async signoutPopup(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this._logger.create("signoutPopup"),{popupWindowFeatures:r,popupWindowTarget:s,popupSignal:o}=e,a=(0,n.A)(e,v),l=this.settings.popup_post_logout_redirect_uri,c=await this._popupNavigator.prepare({popupWindowFeatures:r,popupWindowTarget:s,popupSignal:o});await this._signout((0,i.A)({request_type:"so:p",post_logout_redirect_uri:l,state:null==l?void 0:{}},a),c),t.info("success")}async signoutPopupCallback(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=this._logger.create("signoutPopupCallback");await this._popupNavigator.callback(e,{keepOpen:t}),r.info("success")}async _signout(e,t){const r=await this._signoutStart(e,t);return await this._signoutEnd(r.url)}async _signoutStart(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var r;const i=this._logger.create("_signoutStart");try{const s=await this._loadUser();i.debug("loaded current user from storage"),this.settings.revokeTokensOnSignout&&await this._revokeInternal(s);const n=e.id_token_hint||s&&s.id_token;n&&(i.debug("setting id_token_hint in signout request"),e.id_token_hint=n),await this.removeUser(),i.debug("user removed, creating signout request");const o=await this._client.createSignoutRequest(e);return i.debug("got signout request"),await t.navigate({url:o.url,state:null==(r=o.state)?void 0:r.id,scriptOrigin:this.settings.iframeScriptOrigin})}catch(s){throw i.debug("error after preparing navigator, closing navigator window"),t.close(),s}}async _signoutEnd(e){const t=this._logger.create("_signoutEnd"),r=await this._client.processSignoutResponse(e);return t.debug("got signout response"),r}async signoutSilent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;const r=this._logger.create("signoutSilent"),{silentRequestTimeoutInSeconds:s}=e,o=(0,n.A)(e,y),a=this.settings.includeIdTokenInSilentSignout?null==(t=await this._loadUser())?void 0:t.id_token:void 0,l=this.settings.popup_post_logout_redirect_uri,c=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:s});await this._signout((0,i.A)({request_type:"so:s",post_logout_redirect_uri:l,id_token_hint:a},o),c),r.info("success")}async signoutSilentCallback(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;const t=this._logger.create("signoutSilentCallback");await this._iframeNavigator.callback(e),t.info("success")}async revokeTokens(e){const t=await this._loadUser();await this._revokeInternal(t,e)}async _revokeInternal(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.settings.revokeTokenTypes;const r=this._logger.create("_revokeInternal");if(!e)return;const i=t.filter(t=>"string"===typeof e[t]);if(i.length){for(const t of i)await this._client.revokeToken(e[t],t),r.info("".concat(t," revoked successfully")),"access_token"!==t&&(e[t]=null);await this.storeUser(e),r.debug("user stored"),await this._events.load(e)}else r.debug("no need to revoke due to no token(s)")}startSilentRenew(){this._logger.create("startSilentRenew"),this._silentRenewService.start()}stopSilentRenew(){this._silentRenewService.stop()}get _userStoreKey(){return"user:".concat(this.settings.authority,":").concat(this.settings.client_id)}async _loadUser(){const e=this._logger.create("_loadUser"),t=await this.settings.userStore.get(this._userStoreKey);return t?(e.debug("user storageString loaded"),he.fromStorageString(t)):(e.debug("no user storageString"),null)}async storeUser(e){const t=this._logger.create("storeUser");if(e){t.debug("storing user");const r=e.toStorageString();await this.settings.userStore.set(this._userStoreKey,r)}else this._logger.debug("removing user"),await this.settings.userStore.remove(this._userStoreKey),this.settings.dpop&&await this.settings.dpop.store.remove(this.settings.client_id)}async clearStaleState(){await this._client.clearStaleState()}async dpopProof(e,t,r,i){var s,n;const o=await(null==(n=null==(s=this.settings.dpop)?void 0:s.store)?void 0:n.get(this.settings.client_id));if(o)return await A.generateDPoPProof({url:e,accessToken:null==t?void 0:t.access_token,httpMethod:r,keyPair:o.keys,nonce:i})}async generateDPoPJkt(e){let t=await e.store.get(this.settings.client_id);if(!t){const r=await A.generateDPoPKeys();t=new le(r),await e.store.set(this.settings.client_id,t)}return await A.generateDPoPJkt(t.keys)}},ze=e=>{const{children:t,onSigninCallback:r,skipSigninCallback:o,matchSignoutCallback:a,onSignoutCallback:l,onRemoveUser:c,userManager:u=null}=e,h=(0,n.A)(e,Le),[d]=s.useState(()=>null!=u?u:We?new We(h):{settings:h}),[f,p]=s.useReducer(je,Te),g=s.useMemo(()=>Object.assign({settings:d.settings,events:d.events},Object.fromEntries(He.map(e=>{var t,r;return[e,null!=(r=null==(t=d[e])?void 0:t.bind(d))?r:Fe(e)]})),Object.fromEntries(Ue.map(e=>[e,d[e]?async t=>{p({type:"NAVIGATOR_INIT",method:e});try{return await d[e](t)}catch(r){return p({type:"ERROR",error:(0,i.A)((0,i.A)({},Oe(r,"Unknown error while executing ".concat(e,"(...)."))),{},{source:e,args:t})}),null}finally{p({type:"NAVIGATOR_CLOSE"})}}:Fe(e)]))),[d]),_=s.useRef(!1);s.useEffect(()=>{d&&!_.current&&(_.current=!0,(async()=>{try{let e=null;Ne()&&!o&&(e=await d.signinCallback(),r&&await r(e)),e=e||await d.getUser(),p({type:"INITIALISED",user:e})}catch(e){p({type:"ERROR",error:De(e)})}try{if(a&&a(d.settings)){const e=await d.signoutCallback();l&&await l(e)}}catch(e){p({type:"ERROR",error:Pe(e)})}})())},[d,o,r,l,a]),s.useEffect(()=>{if(!d)return;const e=e=>{p({type:"USER_LOADED",user:e})};d.events.addUserLoaded(e);const t=()=>{p({type:"USER_UNLOADED"})};d.events.addUserUnloaded(t);const r=()=>{p({type:"USER_SIGNED_OUT"})};d.events.addUserSignedOut(r);const i=e=>{p({type:"ERROR",error:Me(e)})};return d.events.addSilentRenewError(i),()=>{d.events.removeUserLoaded(e),d.events.removeUserUnloaded(t),d.events.removeUserSignedOut(r),d.events.removeSilentRenewError(i)}},[d]);const m=s.useCallback(async()=>{d||Fe("removeUser"),await d.removeUser(),c&&await c()},[d,c]),v=s.useMemo(()=>(0,i.A)((0,i.A)((0,i.A)({},f),g),{},{removeUser:m}),[f,g,m]);return s.createElement(Ae.Provider,{value:v},t)},qe=()=>{const e=s.useContext(Ae);return e||console.warn("AuthProvider context is undefined, please verify you are calling useAuth() as child of a <AuthProvider> component."),e};var Ke=r(579);const Ve=(0,s.createContext)(void 0);function Ge(e){let{children:t}=e;const r=qe(),i={user:r.user?{id:r.user.profile.sub||"",username:r.user.profile.preferred_username||r.user.profile.email||"",email:r.user.profile.email||"",name:r.user.profile.name||r.user.profile.email||"",groups:r.user.profile["cognito:groups"]||[],isAdmin:(r.user.profile["cognito:groups"]||[]).includes("platform-admins")}:null,isLoading:r.isLoading,isAuthenticated:r.isAuthenticated,login:async()=>{await r.signinRedirect()},logout:async()=>{const e=window.__COGNITO_DOMAIN__,t=r.settings.client_id,i=r.settings.post_logout_redirect_uri||window.location.origin;e?(await r.removeUser(),window.location.href="https://".concat(e,"/logout?client_id=").concat(t,"&logout_uri=").concat(encodeURIComponent(i))):await r.signoutRedirect()},getAccessToken:()=>{var e;return null===(e=r.user)||void 0===e?void 0:e.access_token}};return(0,Ke.jsx)(Ve.Provider,{value:i,children:t})}function Je(e){let{children:t,config:r}=e;r.cognitoDomain&&(window.__COGNITO_DOMAIN__=r.cognitoDomain);const s={authority:r.authority,client_id:r.clientId,redirect_uri:r.redirectUri,post_logout_redirect_uri:r.logoutUri||r.redirectUri.replace("/auth/callback",""),response_type:"code",scope:r.scope||"aws.cognito.signin.user.admin email openid profile"};return(0,Ke.jsx)(ze,(0,i.A)((0,i.A)({},s),{},{children:(0,Ke.jsx)(Ge,{children:t})}))}function $e(){const e=(0,s.useContext)(Ve);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}}},t={};function r(i){var s=t[i];if(void 0!==s)return s.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,r),n.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(i,s){if(1&s&&(i=this(i)),8&s)return i;if("object"===typeof i&&i){if(4&s&&i.__esModule)return i;if(16&s&&"function"===typeof i.then)return i}var n=Object.create(null);r.r(n);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&s&&i;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>o[e]=()=>i[e]);return o.default=()=>i,r.d(n,o),n}})(),r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e,t=r(43),i=r.t(t,2),s=r(391),n=r(950),o=r.t(n,2);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const l="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t,r,i){return void 0===r&&(r=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:r,key:t&&t.key||i||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:r="",hash:i=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function p(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function g(t,r,i,s){void 0===s&&(s={});let{window:n=document.defaultView,v5Compat:o=!1}=s,u=n.history,p=e.Pop,g=null,_=m();function m(){return(u.state||{idx:null}).idx}function v(){p=e.Pop;let t=m(),r=null==t?null:t-_;_=t,g&&g({action:p,location:w.location,delta:r})}function y(e){let t="null"!==n.location.origin?n.location.origin:n.location.href,r="string"===typeof e?e:f(e);return r=r.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}null==_&&(_=0,u.replaceState(a({},u.state,{idx:_}),""));let w={get action(){return p},get location(){return t(n,u)},listen(e){if(g)throw new Error("A history only accepts one active listener");return n.addEventListener(l,v),g=e,()=>{n.removeEventListener(l,v),g=null}},createHref:e=>r(n,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,r){p=e.Push;let s=d(w.location,t,r);i&&i(s,t),_=m()+1;let a=h(s,_),l=w.createHref(s);try{u.pushState(a,"",l)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;n.location.assign(l)}o&&g&&g({action:p,location:w.location,delta:1})},replace:function(t,r){p=e.Replace;let s=d(w.location,t,r);i&&i(s,t),_=m();let n=h(s,_),a=w.createHref(s);u.replaceState(n,"",a),o&&g&&g({action:p,location:w.location,delta:0})},go:e=>u.go(e)};return w}var _;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(_||(_={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function m(e,t,r){return void 0===r&&(r="/"),v(e,t,r,!1)}function v(e,t,r,i){let s=N(("string"===typeof t?p(t):t).pathname||"/",r);if(null==s)return null;let n=y(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(n);let o=null;for(let a=0;null==o&&a<n.length;++a){let e=j(s);o=A(n[a],e,i)}return o}function y(e,t,r,i){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===i&&(i="");let s=(e,s,n)=>{let o={relativePath:void 0===n?e.path||"":n,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};o.relativePath.startsWith("/")&&(c(o.relativePath.startsWith(i),'Absolute route path "'+o.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(i.length));let a=I([i,o.relativePath]),l=r.concat(o);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),y(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:L(a,e.index),routesMeta:l})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let i of w(e.path))s(e,t,i);else s(e,t)}),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[r,...i]=t,s=r.endsWith("?"),n=r.replace(/\?$/,"");if(0===i.length)return s?[n,""]:[n];let o=w(i.join("/")),a=[];return a.push(...o.map(e=>""===e?n:[n,e].join("/"))),s&&a.push(...o),a.map(t=>e.startsWith("/")&&""===t?"/":t)}const b=/^:[\w-]+$/,S=3,x=2,C=1,k=10,E=-2,R=e=>"*"===e;function L(e,t){let r=e.split("/"),i=r.length;return r.some(R)&&(i+=E),t&&(i+=x),r.filter(e=>!R(e)).reduce((e,t)=>e+(b.test(t)?S:""===t?C:k),i)}function A(e,t,r){void 0===r&&(r=!1);let{routesMeta:i}=e,s={},n="/",o=[];for(let a=0;a<i.length;++a){let e=i[a],l=a===i.length-1,c="/"===n?t:t.slice(n.length)||"/",u=T({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&r&&!i[i.length-1].route.index&&(u=T({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),o.push({params:s,pathname:I([n,u.pathname]),pathnameBase:B(I([n,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(n=I([n,u.pathnameBase]))}return o}function T(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let i=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(i.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(i.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let n=new RegExp(s,t?void 0:"i");return[n,i]}(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let n=s[0],o=n.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:i.reduce((e,t,r)=>{let{paramName:i,isOptional:s}=t;if("*"===i){let e=a[r]||"";o=n.slice(0,n.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[r];return e[i]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:n,pathnameBase:o,pattern:e}}function j(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function N(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=e.charAt(r);return i&&"/"!==i?null:e.slice(r)||"/"}function D(e,t,r,i){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function P(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function M(e,t){let r=P(e);return t?r.map((e,t)=>t===r.length-1?e.pathname:e.pathnameBase):r.map(e=>e.pathnameBase)}function O(e,t,r,i){let s;void 0===i&&(i=!1),"string"===typeof e?s=p(e):(s=a({},e),c(!s.pathname||!s.pathname.includes("?"),D("?","pathname","search",s)),c(!s.pathname||!s.pathname.includes("#"),D("#","pathname","hash",s)),c(!s.search||!s.search.includes("#"),D("#","search","hash",s)));let n,o=""===e||""===s.pathname,l=o?"/":s.pathname;if(null==l)n=r;else{let e=t.length-1;if(!i&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}n=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:r,search:i="",hash:s=""}="string"===typeof e?p(e):e,n=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:n,search:H(i),hash:U(s)}}(s,n),h=l&&"/"!==l&&l.endsWith("/"),d=(o||"."===l)&&r.endsWith("/");return u.pathname.endsWith("/")||!h&&!d||(u.pathname+="/"),u}const I=e=>e.join("/").replace(/\/\/+/g,"/"),B=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),H=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",U=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function F(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const W=["post","put","patch","delete"],z=(new Set(W),["get",...W]);new Set(z),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},q.apply(this,arguments)}const K=t.createContext(null);const V=t.createContext(null);const G=t.createContext(null);const J=t.createContext(null);const $=t.createContext({outlet:null,matches:[],isDataRoute:!1});const X=t.createContext(null);function Q(){return null!=t.useContext(J)}function Y(){return Q()||c(!1),t.useContext(J).location}function Z(e){t.useContext(G).static||t.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=t.useContext($);return e?function(){let{router:e}=ue(le.UseNavigateStable),r=de(ce.UseNavigateStable),i=t.useRef(!1);return Z(()=>{i.current=!0}),t.useCallback(function(t,s){void 0===s&&(s={}),i.current&&("number"===typeof t?e.navigate(t):e.navigate(t,q({fromRouteId:r},s)))},[e,r])}():function(){Q()||c(!1);let e=t.useContext(K),{basename:r,future:i,navigator:s}=t.useContext(G),{matches:n}=t.useContext($),{pathname:o}=Y(),a=JSON.stringify(M(n,i.v7_relativeSplatPath)),l=t.useRef(!1);return Z(()=>{l.current=!0}),t.useCallback(function(t,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof t)return void s.go(t);let n=O(t,JSON.parse(a),o,"path"===i.relative);null==e&&"/"!==r&&(n.pathname="/"===n.pathname?r:I([r,n.pathname])),(i.replace?s.replace:s.push)(n,i.state,i)},[r,s,a,o,e])}()}function te(e,r){let{relative:i}=void 0===r?{}:r,{future:s}=t.useContext(G),{matches:n}=t.useContext($),{pathname:o}=Y(),a=JSON.stringify(M(n,s.v7_relativeSplatPath));return t.useMemo(()=>O(e,JSON.parse(a),o,"path"===i),[e,a,o,i])}function re(r,i,s,n){Q()||c(!1);let{navigator:o}=t.useContext(G),{matches:a}=t.useContext($),l=a[a.length-1],u=l?l.params:{},h=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,f=Y();if(i){var g;let e="string"===typeof i?p(i):i;"/"===h||(null==(g=e.pathname)?void 0:g.startsWith(h))||c(!1),d=e}else d=f;let _=d.pathname||"/",v=_;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+_.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=m(r,{pathname:v});let w=ae(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:I([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:I([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,s,n);return i&&w?t.createElement(J.Provider,{value:{location:q({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:e.Pop}},w):w}function ie(){let e=function(){var e;let r=t.useContext(X),i=he(ce.UseRouteError),s=de(ce.UseRouteError);if(void 0!==r)return r;return null==(e=i.errors)?void 0:e[s]}(),r=F(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:s};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},r),i?t.createElement("pre",{style:n},i):null,null)}const se=t.createElement(ie,null);class ne extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement($.Provider,{value:this.props.routeContext},t.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oe(e){let{routeContext:r,match:i,children:s}=e,n=t.useContext(K);return n&&n.static&&n.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=i.route.id),t.createElement($.Provider,{value:r},s)}function ae(e,r,i,s){var n;if(void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s=null),null==e){var o;if(!i)return null;if(i.errors)e=i.matches;else{if(!(null!=(o=s)&&o.v7_partialHydration&&0===r.length&&!i.initialized&&i.matches.length>0))return null;e=i.matches}}let a=e,l=null==(n=i)?void 0:n.errors;if(null!=l){let e=a.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||c(!1),a=a.slice(0,Math.min(a.length,e+1))}let u=!1,h=-1;if(i&&s&&s.v7_partialHydration)for(let t=0;t<a.length;t++){let e=a[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=t),e.route.id){let{loaderData:t,errors:r}=i,s=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){u=!0,a=h>=0?a.slice(0,h+1):[a[0]];break}}}return a.reduceRight((e,s,n)=>{let o,c=!1,d=null,f=null;var p;i&&(o=l&&s.route.id?l[s.route.id]:void 0,d=s.route.errorElement||se,u&&(h<0&&0===n?(p="route-fallback",!1||fe[p]||(fe[p]=!0),c=!0,f=null):h===n&&(c=!0,f=s.route.hydrateFallbackElement||null)));let g=r.concat(a.slice(0,n+1)),_=()=>{let r;return r=o?d:c?f:s.route.Component?t.createElement(s.route.Component,null):s.route.element?s.route.element:e,t.createElement(oe,{match:s,routeContext:{outlet:e,matches:g,isDataRoute:null!=i},children:r})};return i&&(s.route.ErrorBoundary||s.route.errorElement||0===n)?t.createElement(ne,{location:i.location,revalidation:i.revalidation,component:d,error:o,children:_(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):_()},null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ce=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ce||{});function ue(e){let r=t.useContext(K);return r||c(!1),r}function he(e){let r=t.useContext(V);return r||c(!1),r}function de(e){let r=function(){let e=t.useContext($);return e||c(!1),e}(),i=r.matches[r.matches.length-1];return i.route.id||c(!1),i.route.id}const fe={};function pe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}i.startTransition;function ge(e){let{to:r,replace:i,state:s,relative:n}=e;Q()||c(!1);let{future:o,static:a}=t.useContext(G),{matches:l}=t.useContext($),{pathname:u}=Y(),h=ee(),d=O(r,M(l,o.v7_relativeSplatPath),u,"path"===n),f=JSON.stringify(d);return t.useEffect(()=>h(JSON.parse(f),{replace:i,state:s,relative:n}),[h,f,n,i,s]),null}function _e(e){c(!1)}function me(r){let{basename:i="/",children:s=null,location:n,navigationType:o=e.Pop,navigator:a,static:l=!1,future:u}=r;Q()&&c(!1);let h=i.replace(/^\/*/,"/"),d=t.useMemo(()=>({basename:h,navigator:a,static:l,future:q({v7_relativeSplatPath:!1},u)}),[h,u,a,l]);"string"===typeof n&&(n=p(n));let{pathname:f="/",search:g="",hash:_="",state:m=null,key:v="default"}=n,y=t.useMemo(()=>{let e=N(f,h);return null==e?null:{location:{pathname:e,search:g,hash:_,state:m,key:v},navigationType:o}},[h,f,g,_,m,v,o]);return null==y?null:t.createElement(G.Provider,{value:d},t.createElement(J.Provider,{children:s,value:y}))}function ve(e){let{children:t,location:r}=e;return re(ye(t),r)}new Promise(()=>{});t.Component;function ye(e,r){void 0===r&&(r=[]);let i=[];return t.Children.forEach(e,(e,s)=>{if(!t.isValidElement(e))return;let n=[...r,s];if(e.type===t.Fragment)return void i.push.apply(i,ye(e.props.children,n));e.type!==_e&&c(!1),e.props.index&&e.props.children&&c(!1);let o={id:e.props.id||n.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ye(e.props.children,n)),i.push(o)}),i}function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},we.apply(this,arguments)}function be(e,t){if(null==e)return{};var r,i,s={},n=Object.keys(e);for(i=0;i<n.length;i++)r=n[i],t.indexOf(r)>=0||(s[r]=e[r]);return s}function Se(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let i=e[r];return t.concat(Array.isArray(i)?i.map(e=>[r,e]):[[r,i]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const xe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Rr){}new Map;const Ce=i.startTransition;o.flushSync,i.useId;function ke(e){let{basename:r,children:i,future:s,window:n}=e,o=t.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:n,v5Compat:!0})&&(a={}),g(function(e,t){let{pathname:r,search:i,hash:s}=e.location;return d("",{pathname:r,search:i,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:f(t)},null,a)));let l=o.current,[c,u]=t.useState({action:l.action,location:l.location}),{v7_startTransition:h}=s||{},p=t.useCallback(e=>{h&&Ce?Ce(()=>u(e)):u(e)},[u,h]);return t.useLayoutEffect(()=>l.listen(p),[l,p]),t.useEffect(()=>pe(s),[s]),t.createElement(me,{basename:r,children:i,location:c.location,navigationType:c.action,navigator:l,future:s})}const Ee="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Re=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Le=t.forwardRef(function(e,r){let i,{onClick:s,relative:n,reloadDocument:o,replace:a,state:l,target:u,to:h,preventScrollReset:d,viewTransition:p}=e,g=be(e,xe),{basename:_}=t.useContext(G),m=!1;if("string"===typeof h&&Re.test(h)&&(i=h,Ee))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),r=N(t.pathname,_);t.origin===e.origin&&null!=r?h=r+t.search+t.hash:m=!0}catch(Rr){}let v=function(e,r){let{relative:i}=void 0===r?{}:r;Q()||c(!1);let{basename:s,navigator:n}=t.useContext(G),{hash:o,pathname:a,search:l}=te(e,{relative:i}),u=a;return"/"!==s&&(u="/"===a?s:I([s,a])),n.createHref({pathname:u,search:l,hash:o})}(h,{relative:n}),y=function(e,r){let{target:i,replace:s,state:n,preventScrollReset:o,relative:a,viewTransition:l}=void 0===r?{}:r,c=ee(),u=Y(),h=te(e,{relative:a});return t.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();let r=void 0!==s?s:f(u)===f(h);c(e,{replace:r,state:n,preventScrollReset:o,relative:a,viewTransition:l})}},[u,c,h,s,n,i,e,o,a,l])}(h,{replace:a,state:l,target:u,preventScrollReset:d,relative:n,viewTransition:p});return t.createElement("a",we({},g,{href:i||v,onClick:m||o?s:function(e){s&&s(e),e.defaultPrevented||y(e)},ref:r,target:u}))});var Ae,Te;function je(e){let r=t.useRef(Se(e)),i=t.useRef(!1),s=Y(),n=t.useMemo(()=>function(e,t){let r=Se(e);return t&&t.forEach((e,i)=>{r.has(i)||t.getAll(i).forEach(e=>{r.append(i,e)})}),r}(s.search,i.current?null:r.current),[s.search]),o=ee(),a=t.useCallback((e,t)=>{const r=Se("function"===typeof e?e(n):e);i.current=!0,o("?"+r,t)},[o,n]);return[n,a]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ae||(Ae={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Te||(Te={}));var Ne=r(996),De=r(8),Pe=r(986),Me=(Math.pow(10,8),6e4),Oe=36e5;function Ie(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Be(e,t){var r;Ie(1,arguments);var i=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}(null!==(r=null===t||void 0===t?void 0:t.additionalDigits)&&void 0!==r?r:2);if(2!==i&&1!==i&&0!==i)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!==typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var s,n=function(e){var t,r={},i=e.split(He.dateTimeDelimiter);if(i.length>2)return r;/:/.test(i[0])?t=i[0]:(r.date=i[0],t=i[1],He.timeZoneDelimiter.test(r.date)&&(r.date=e.split(He.timeZoneDelimiter)[0],t=e.substr(r.date.length,e.length)));if(t){var s=He.timezone.exec(t);s?(r.time=t.replace(s[1],""),r.timezone=s[1]):r.time=t}return r}(e);if(n.date){var o=function(e,t){var r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),i=e.match(r);if(!i)return{year:NaN,restDateString:""};var s=i[1]?parseInt(i[1]):null,n=i[2]?parseInt(i[2]):null;return{year:null===n?s:100*n,restDateString:e.slice((i[1]||i[2]).length)}}(n.date,i);s=function(e,t){if(null===t)return new Date(NaN);var r=e.match(Ue);if(!r)return new Date(NaN);var i=!!r[4],s=ze(r[1]),n=ze(r[2])-1,o=ze(r[3]),a=ze(r[4]),l=ze(r[5])-1;if(i)return function(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}(0,a,l)?function(e,t,r){var i=new Date(0);i.setUTCFullYear(e,0,4);var s=i.getUTCDay()||7,n=7*(t-1)+r+1-s;return i.setUTCDate(i.getUTCDate()+n),i}(t,a,l):new Date(NaN);var c=new Date(0);return function(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(Ke[t]||(Ve(e)?29:28))}(t,n,o)&&function(e,t){return t>=1&&t<=(Ve(e)?366:365)}(t,s)?(c.setUTCFullYear(t,n,Math.max(s,o)),c):new Date(NaN)}(o.restDateString,o.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);var a,l=s.getTime(),c=0;if(n.time&&(c=function(e){var t=e.match(Fe);if(!t)return NaN;var r=qe(t[1]),i=qe(t[2]),s=qe(t[3]);if(!function(e,t,r){if(24===e)return 0===t&&0===r;return r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}(r,i,s))return NaN;return r*Oe+i*Me+1e3*s}(n.time),isNaN(c)))return new Date(NaN);if(!n.timezone){var u=new Date(l+c),h=new Date(0);return h.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),h.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),h}return a=function(e){if("Z"===e)return 0;var t=e.match(We);if(!t)return 0;var r="+"===t[1]?-1:1,i=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,s))return NaN;return r*(i*Oe+s*Me)}(n.timezone),isNaN(a)?new Date(NaN):new Date(l+c+a)}var He={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Ue=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Fe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,We=/^([+-])(\d{2})(?::?(\d{2}))?$/;function ze(e){return e?parseInt(e):1}function qe(e){return e&&parseFloat(e.replace(",","."))||0}var Ke=[31,null,31,30,31,30,31,31,30,31,30,31];function Ve(e){return e%400===0||e%4===0&&e%100!==0}var Ge={};function Je(){return Ge}var $e=r(284);function Xe(e){Ie(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===(0,$e.A)(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function Qe(e,t){Ie(2,arguments);var r=Xe(e),i=Xe(t),s=r.getTime()-i.getTime();return s<0?-1:s>0?1:s}function Ye(e){Ie(1,arguments);var t=Xe(e);return function(e){Ie(1,arguments);var t=Xe(e);return t.setHours(23,59,59,999),t}(t).getTime()===function(e){Ie(1,arguments);var t=Xe(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}(t).getTime()}function Ze(e,t){Ie(2,arguments);var r,i=Xe(e),s=Xe(t),n=Qe(i,s),o=Math.abs(function(e,t){Ie(2,arguments);var r=Xe(e),i=Xe(t);return 12*(r.getFullYear()-i.getFullYear())+(r.getMonth()-i.getMonth())}(i,s));if(o<1)r=0;else{1===i.getMonth()&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-n*o);var a=Qe(i,s)===-n;Ye(Xe(e))&&1===o&&1===Qe(e,s)&&(a=!1),r=n*(o-Number(a))}return 0===r?0:r}var et={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}};function tt(e,t,r){Ie(2,arguments);var i,s=function(e,t){return Ie(2,arguments),Xe(e).getTime()-Xe(t).getTime()}(e,t)/1e3;return((i=null===r||void 0===r?void 0:r.roundingMethod)?et[i]:et.trunc)(s)}var rt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const it=function(e,t,r){var i,s=rt[e];return i="string"===typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),null!==r&&void 0!==r&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function st(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var nt={date:st({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:st({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:st({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var ot={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function at(e){return function(t,r){var i;if("formatting"===(null!==r&&void 0!==r&&r.context?String(r.context):"standalone")&&e.formattingValues){var s=e.defaultFormattingWidth||e.defaultWidth,n=null!==r&&void 0!==r&&r.width?String(r.width):s;i=e.formattingValues[n]||e.formattingValues[s]}else{var o=e.defaultWidth,a=null!==r&&void 0!==r&&r.width?String(r.width):e.defaultWidth;i=e.values[a]||e.values[o]}return i[e.argumentCallback?e.argumentCallback(t):t]}}function lt(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.width,s=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],n=t.match(s);if(!n)return null;var o,a=n[0],l=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r;return}(l,function(e){return e.test(a)}):function(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r;return}(l,function(e){return e.test(a)});return o=e.valueCallback?e.valueCallback(c):c,{value:o=r.valueCallback?r.valueCallback(o):o,rest:t.slice(a.length)}}}var ct;const ut={code:"en-US",formatDistance:it,formatLong:nt,formatRelative:function(e,t,r,i){return ot[e]},localize:{ordinalNumber:function(e,t){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:at({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:at({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:at({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:at({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:at({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(ct={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.match(ct.matchPattern);if(!r)return null;var i=r[0],s=e.match(ct.parsePattern);if(!s)return null;var n=ct.valueCallback?ct.valueCallback(s[0]):s[0];return{value:n=t.valueCallback?t.valueCallback(n):n,rest:e.slice(i.length)}}),era:lt({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:lt({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:lt({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:lt({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:lt({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function ht(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}function dt(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var ft=43200;function pt(e,t,r){var i,s;Ie(2,arguments);var n=Je(),o=null!==(i=null!==(s=null===r||void 0===r?void 0:r.locale)&&void 0!==s?s:n.locale)&&void 0!==i?i:ut;if(!o.formatDistance)throw new RangeError("locale must contain formatDistance property");var a=Qe(e,t);if(isNaN(a))throw new RangeError("Invalid time value");var l,c,u=ht(ht({},r),{addSuffix:Boolean(null===r||void 0===r?void 0:r.addSuffix),comparison:a});a>0?(l=Xe(t),c=Xe(e)):(l=Xe(e),c=Xe(t));var h,d=tt(c,l),f=(dt(c)-dt(l))/1e3,p=Math.round((d-f)/60);if(p<2)return null!==r&&void 0!==r&&r.includeSeconds?d<5?o.formatDistance("lessThanXSeconds",5,u):d<10?o.formatDistance("lessThanXSeconds",10,u):d<20?o.formatDistance("lessThanXSeconds",20,u):d<40?o.formatDistance("halfAMinute",0,u):d<60?o.formatDistance("lessThanXMinutes",1,u):o.formatDistance("xMinutes",1,u):0===p?o.formatDistance("lessThanXMinutes",1,u):o.formatDistance("xMinutes",p,u);if(p<45)return o.formatDistance("xMinutes",p,u);if(p<90)return o.formatDistance("aboutXHours",1,u);if(p<1440){var g=Math.round(p/60);return o.formatDistance("aboutXHours",g,u)}if(p<2520)return o.formatDistance("xDays",1,u);if(p<ft){var _=Math.round(p/1440);return o.formatDistance("xDays",_,u)}if(p<86400)return h=Math.round(p/ft),o.formatDistance("aboutXMonths",h,u);if((h=Ze(c,l))<12){var m=Math.round(p/ft);return o.formatDistance("xMonths",m,u)}var v=h%12,y=Math.floor(h/12);return v<3?o.formatDistance("aboutXYears",y,u):v<9?o.formatDistance("overXYears",y,u):o.formatDistance("almostXYears",y+1,u)}function gt(e){try{const t="string"===typeof e?Be(e):e;return isNaN(t.getTime())?"Invalid date":function(e,t){return Ie(1,arguments),pt(e,Date.now(),t)}(t,{addSuffix:!0})}catch(t){return console.error("Error formatting date:",e,t),"Invalid date"}}function _t(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";const r=t<0?0:t,i=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,i)).toFixed(r))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][i]}function mt(e){if(e.endsWith("m")){return(parseInt(e.slice(0,-1))/1e3).toFixed(2)+" cores"}return e+" cores"}function vt(e){return e.endsWith("Ki")?_t(1024*parseInt(e.slice(0,-2))):e.endsWith("Mi")?_t(1024*parseInt(e.slice(0,-2))*1024):e.endsWith("Gi")?_t(1024*parseInt(e.slice(0,-2))*1024*1024):e}function yt(e){return e instanceof Error?e.message:"string"===typeof e?e:e&&"object"===typeof e&&"message"in e?String(e.message):"An unknown error occurred"}function wt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}var bt=r(579);const St=["className","variant","size","isLoading","leftIcon","rightIcon","children","disabled"],xt=t.forwardRef((e,t)=>{let{className:r,variant:i="primary",size:s="md",isLoading:n=!1,leftIcon:o,rightIcon:a,children:l,disabled:c}=e,u=(0,Pe.A)(e,St);return(0,bt.jsxs)("button",(0,De.A)((0,De.A)({className:wt("inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-primary-500",success:"bg-success-600 text-white hover:bg-success-700 focus:ring-success-500",warning:"bg-warning-500 text-white hover:bg-warning-600 focus:ring-warning-500",error:"bg-error-500 text-white hover:bg-error-600 focus:ring-error-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-primary-500"}[i],{sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[s],r),disabled:c||n,ref:t},u),{},{children:[n&&(0,bt.jsx)("div",{className:"mr-2",children:(0,bt.jsx)("div",{className:"spinner w-4 h-4"})}),!n&&o&&(0,bt.jsx)("div",{className:"mr-2",children:o}),l,!n&&a&&(0,bt.jsx)("div",{className:"ml-2",children:a})]}))});xt.displayName="Button";const Ct=["className","variant","padding","children"],kt=["className"],Et=["className","children"],Rt=["className"],Lt=["className"],At=["className"],Tt=t.forwardRef((e,t)=>{let{className:r,variant:i="default",padding:s="md",children:n}=e,o=(0,Pe.A)(e,Ct);return(0,bt.jsx)("div",(0,De.A)((0,De.A)({className:wt("rounded-xl border",{default:"bg-white border-gray-200 shadow-soft",outline:"bg-white border-gray-300",shadow:"bg-white border-gray-200 shadow-medium"}[i],{none:"",sm:"p-4",md:"p-6",lg:"p-8"}[s],r),ref:t},o),{},{children:n}))});Tt.displayName="Card";const jt=t.forwardRef((e,t)=>{let{className:r}=e,i=(0,Pe.A)(e,kt);return(0,bt.jsx)("div",(0,De.A)({ref:t,className:wt("flex flex-col space-y-1.5",r)},i))});jt.displayName="CardHeader";const Nt=t.forwardRef((e,t)=>{let{className:r,children:i}=e,s=(0,Pe.A)(e,Et);return(0,bt.jsx)("h3",(0,De.A)((0,De.A)({ref:t,className:wt("font-semibold leading-none tracking-tight",r)},s),{},{children:i}))});Nt.displayName="CardTitle";t.forwardRef((e,t)=>{let{className:r}=e,i=(0,Pe.A)(e,Rt);return(0,bt.jsx)("p",(0,De.A)({ref:t,className:wt("text-sm text-gray-600",r)},i))}).displayName="CardDescription";const Dt=t.forwardRef((e,t)=>{let{className:r}=e,i=(0,Pe.A)(e,Lt);return(0,bt.jsx)("div",(0,De.A)({ref:t,className:wt("pt-0",r)},i))});Dt.displayName="CardContent";t.forwardRef((e,t)=>{let{className:r}=e,i=(0,Pe.A)(e,At);return(0,bt.jsx)("div",(0,De.A)({ref:t,className:wt("flex items-center pt-6",r)},i))}).displayName="CardFooter";const Pt=()=>{const{login:e,isLoading:r,isAuthenticated:i}=(0,Ne.A)(),[s,n]=(0,t.useState)(null),[o]=je();(0,t.useEffect)(()=>{const e=o.get("error"),t=o.get("error_description");e&&n(t||"Authentication failed. Please try again.")},[o]);return i?(0,bt.jsx)(ge,{to:"/",replace:!0}):(0,bt.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,bt.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,bt.jsxs)("div",{className:"text-center",children:[(0,bt.jsx)("div",{className:"mx-auto h-16 w-16 bg-primary-600 rounded-xl flex items-center justify-center",children:(0,bt.jsx)("svg",{className:"h-10 w-10 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,bt.jsx)("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm0 4a1 1 0 011-1h12a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1V8z",clipRule:"evenodd"})})}),(0,bt.jsx)("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Codex Web"}),(0,bt.jsx)("p",{className:"mt-2 text-sm text-gray-600 max-w-sm mx-auto text-balance",children:"Sign in to access your development workspaces and collaborate with your team."})]}),(0,bt.jsx)(Tt,{className:"mt-8",children:(0,bt.jsxs)("div",{className:"space-y-6",children:[(0,bt.jsxs)("div",{children:[(0,bt.jsx)("h3",{className:"text-lg font-medium text-gray-900 text-center",children:"Sign in to your account"}),(0,bt.jsx)("p",{className:"mt-2 text-sm text-gray-600 text-center",children:"Choose your authentication method below"})]}),s&&(0,bt.jsx)("div",{className:"rounded-md bg-error-50 p-4",children:(0,bt.jsxs)("div",{className:"flex",children:[(0,bt.jsx)("div",{className:"flex-shrink-0",children:(0,bt.jsx)("svg",{className:"h-5 w-5 text-error-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,bt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,bt.jsxs)("div",{className:"ml-3",children:[(0,bt.jsx)("h3",{className:"text-sm font-medium text-error-800",children:"Authentication Error"}),(0,bt.jsx)("div",{className:"mt-1 text-sm text-error-700",children:s})]})]})}),(0,bt.jsx)("div",{className:"space-y-4",children:(0,bt.jsx)(xt,{onClick:async()=>{try{n(null),await e()}catch(s){console.error("Login failed:",s),n("Login failed. Please try again.")}},isLoading:r,className:"w-full",size:"lg",leftIcon:(0,bt.jsx)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:(0,bt.jsx)("path",{d:"M13.527 1.955c.665.086 1.319.237 1.948.448a.5.5 0 01.32.624l-.428 1.542a.5.5 0 01-.624.32 8.003 8.003 0 00-2.486-.368c-4.418 0-8 3.582-8 8s3.582 8 8 8c1.748 0 3.362-.56 4.676-1.509a.5.5 0 01.665.748A9.978 9.978 0 0112 22C6.477 22 2 17.523 2 12S6.477 2 12 2c.532 0 1.055.044 1.562.129a.5.5 0 01.417.583l-.452 1.243z"})}),children:r?"Signing in...":"Continue with AWS Cognito"})}),(0,bt.jsx)("div",{className:"text-center",children:(0,bt.jsxs)("p",{className:"text-xs text-gray-500",children:["By signing in, you agree to our"," ",(0,bt.jsx)("a",{href:"/terms",className:"font-medium text-primary-600 hover:text-primary-500",children:"Terms of Service"})," ","and"," ",(0,bt.jsx)("a",{href:"/privacy",className:"font-medium text-primary-600 hover:text-primary-500",children:"Privacy Policy"})]})})]})}),(0,bt.jsxs)("div",{className:"mt-8",children:[(0,bt.jsxs)("div",{className:"relative",children:[(0,bt.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,bt.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,bt.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,bt.jsx)("span",{className:"px-2 bg-gray-50 text-gray-500",children:"Platform Features"})})]}),(0,bt.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-4 text-sm text-gray-600",children:[(0,bt.jsxs)("div",{className:"flex items-center",children:[(0,bt.jsx)("svg",{className:"h-4 w-4 text-success-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,bt.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Browser-based VSCode"]}),(0,bt.jsxs)("div",{className:"flex items-center",children:[(0,bt.jsx)("svg",{className:"h-4 w-4 text-success-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,bt.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Multi-tenant isolation"]}),(0,bt.jsxs)("div",{className:"flex items-center",children:[(0,bt.jsx)("svg",{className:"h-4 w-4 text-success-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,bt.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Persistent workspaces"]}),(0,bt.jsxs)("div",{className:"flex items-center",children:[(0,bt.jsx)("svg",{className:"h-4 w-4 text-success-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,bt.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Team collaboration"]})]})]})]})})},Mt=[{name:"Dashboard",href:"/",icon:(0,bt.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"})})},{name:"Workspaces",href:"/workspaces",icon:(0,bt.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})},{name:"Admin",href:"/admin",icon:(0,bt.jsxs)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),adminOnly:!0}],Ot=e=>{var r,i,s,n;let{children:o}=e;const[a,l]=(0,t.useState)(!1),{user:c,logout:u}=(0,Ne.A)(),h=Y(),d=ee(),f=Mt.filter(e=>!e.adminOnly||(null===c||void 0===c?void 0:c.isAdmin));return(0,bt.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,bt.jsxs)("div",{className:wt("fixed inset-0 z-40 md:hidden",a?"block":"hidden"),children:[(0,bt.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>l(!1)}),(0,bt.jsxs)("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-white",children:[(0,bt.jsx)("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:(0,bt.jsxs)("button",{type:"button",className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>l(!1),children:[(0,bt.jsx)("span",{className:"sr-only",children:"Close sidebar"}),(0,bt.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})}),(0,bt.jsx)(It,{navigation:f,currentPath:h.pathname})]})]}),(0,bt.jsx)("div",{className:"hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0",children:(0,bt.jsx)(It,{navigation:f,currentPath:h.pathname})}),(0,bt.jsxs)("div",{className:"md:pl-64 flex flex-col flex-1",children:[(0,bt.jsx)("div",{className:"sticky top-0 z-10 md:hidden pl-1 pt-1 sm:pl-3 sm:pt-3 bg-gray-50",children:(0,bt.jsxs)("button",{type:"button",className:"-ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center rounded-md text-gray-500 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500",onClick:()=>l(!0),children:[(0,bt.jsx)("span",{className:"sr-only",children:"Open sidebar"}),(0,bt.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]})}),(0,bt.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,bt.jsx)("div",{className:"px-4 sm:px-6 lg:px-8",children:(0,bt.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,bt.jsx)("div",{className:"flex-1 min-w-0"}),(0,bt.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,bt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,bt.jsx)("div",{className:"flex-shrink-0",children:(0,bt.jsx)("div",{className:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center",children:(0,bt.jsx)("span",{className:"text-sm font-medium text-primary-600",children:(null===c||void 0===c||null===(r=c.name)||void 0===r||null===(i=r.charAt(0))||void 0===i?void 0:i.toUpperCase())||(null===c||void 0===c||null===(s=c.email)||void 0===s||null===(n=s.charAt(0))||void 0===n?void 0:n.toUpperCase())})})}),(0,bt.jsxs)("div",{className:"hidden md:block",children:[(0,bt.jsx)("div",{className:"text-sm font-medium text-gray-900",children:(null===c||void 0===c?void 0:c.name)||(null===c||void 0===c?void 0:c.username)}),(0,bt.jsx)("div",{className:"text-sm text-gray-500",children:null===c||void 0===c?void 0:c.email})]})]}),(0,bt.jsx)(xt,{variant:"ghost",size:"sm",onClick:async()=>{try{await u(),d("/login")}catch(e){console.error("Logout failed:",e)}},children:"Sign out"})]})]})})}),(0,bt.jsx)("main",{className:"flex-1",children:o})]})]})},It=e=>{let{navigation:t,currentPath:r}=e;return(0,bt.jsxs)("div",{className:"flex flex-col flex-grow border-r border-gray-200 pt-5 bg-white overflow-y-auto",children:[(0,bt.jsx)("div",{className:"flex items-center flex-shrink-0 px-4",children:(0,bt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,bt.jsx)("div",{className:"h-8 w-8 bg-primary-600 rounded-lg flex items-center justify-center",children:(0,bt.jsx)("svg",{className:"h-5 w-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,bt.jsx)("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm0 4a1 1 0 011-1h12a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1V8z",clipRule:"evenodd"})})}),(0,bt.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Codex Web"})]})}),(0,bt.jsx)("div",{className:"mt-5 flex-grow flex flex-col",children:(0,bt.jsx)("nav",{className:"flex-1 px-2 space-y-1",children:t.map(e=>{const t="/"===e.href?"/"===r:r.startsWith(e.href);return(0,bt.jsxs)(Le,{to:e.href,className:wt("group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors",t?"bg-primary-100 text-primary-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,bt.jsx)("div",{className:wt("mr-3 flex-shrink-0",t?"text-primary-500":"text-gray-400 group-hover:text-gray-500"),children:e.icon}),e.name]},e.name)})})})]})},Bt=["className","variant","size","dot","children"],Ht=t.forwardRef((e,t)=>{let{className:r,variant:i="default",size:s="md",dot:n=!1,children:o}=e,a=(0,Pe.A)(e,Bt);return(0,bt.jsxs)("span",(0,De.A)((0,De.A)({className:wt("inline-flex items-center font-medium rounded-full",{default:"bg-gray-100 text-gray-800",success:"bg-success-100 text-success-800",warning:"bg-warning-100 text-warning-800",error:"bg-error-100 text-error-800",info:"bg-primary-100 text-primary-800"}[i],{sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-xs",lg:"px-3 py-1 text-sm"}[s],r),ref:t},a),{},{children:[n&&(0,bt.jsx)("span",{className:wt("mr-1.5 h-1.5 w-1.5 rounded-full",{default:"bg-gray-400",success:"bg-success-500",warning:"bg-warning-500",error:"bg-error-500",info:"bg-primary-500"}[i])}),o]}))});Ht.displayName="Badge";const Ut=e=>{let{status:t,children:r,className:i}=e;const s={running:{variant:"success",dot:!0},stopped:{variant:"default",dot:!0},starting:{variant:"warning",dot:!0},stopping:{variant:"warning",dot:!0},error:{variant:"error",dot:!0},pending:{variant:"default",dot:!0}}[t];return(0,bt.jsx)(Ht,{variant:s.variant,dot:s.dot,className:i,children:r||t.charAt(0).toUpperCase()+t.slice(1)})},Ft=["className","value","max","size","variant","showValue","label"],Wt=t.forwardRef((e,t)=>{let{className:r,value:i,max:s=100,size:n="md",variant:o="default",showValue:a=!1,label:l}=e,c=(0,Pe.A)(e,Ft);const u=Math.min(i/s*100,100),h={sm:"h-1",md:"h-2",lg:"h-3"},d="default"!==o?o:u>=90?"error":u>=75?"warning":"success";return(0,bt.jsxs)("div",(0,De.A)((0,De.A)({className:"space-y-1"},c),{},{children:[(l||a)&&(0,bt.jsxs)("div",{className:"flex justify-between items-center",children:[l&&(0,bt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:l}),a&&(0,bt.jsxs)("span",{className:"text-sm text-gray-500",children:[Math.round(u),"%"]})]}),(0,bt.jsx)("div",{ref:t,className:wt("w-full bg-gray-200 rounded-full overflow-hidden",h[n],r),children:(0,bt.jsx)("div",{className:wt("transition-all duration-300 ease-in-out rounded-full",h[n],{default:"bg-primary-500",success:"bg-success-500",warning:"bg-warning-500",error:"bg-error-500"}[d]),style:{width:"".concat(u,"%")}})})]}))});Wt.displayName="Progress";const zt=e=>{let{value:t,max:r=100,size:i=64,strokeWidth:s=4,variant:n="default",showValue:o=!1,className:a}=e;const l=Math.min(t/r*100,100),c=(i-s)/2,u=2*c*Math.PI,h=u,d=u-l/100*u,f="default"!==n?n:l>=90?"error":l>=75?"warning":"success";return(0,bt.jsxs)("div",{className:wt("relative inline-flex items-center justify-center",a),children:[(0,bt.jsxs)("svg",{width:i,height:i,className:"transform -rotate-90",children:[(0,bt.jsx)("circle",{cx:i/2,cy:i/2,r:c,stroke:"currentColor",strokeWidth:s,fill:"none",className:"text-gray-200"}),(0,bt.jsx)("circle",{cx:i/2,cy:i/2,r:c,stroke:"currentColor",strokeWidth:s,fill:"none",strokeLinecap:"round",strokeDasharray:h,strokeDashoffset:d,className:wt("transition-all duration-300 ease-in-out",{default:"stroke-primary-500",success:"stroke-success-500",warning:"stroke-warning-500",error:"stroke-error-500"}[f])})]}),o&&(0,bt.jsxs)("span",{className:"absolute text-sm font-medium text-gray-700",children:[Math.round(l),"%"]})]})};var qt=r(677);const Kt=()=>{var e,r;const[i,s]=(0,t.useState)(null),[n,o]=(0,t.useState)([]),[a,l]=(0,t.useState)(!0),[c,u]=(0,t.useState)(null);(0,t.useEffect)(()=>{h()},[]);const h=async()=>{try{l(!0),u(null);const[e,t]=await Promise.all([qt.K.getDashboardStats(),qt.K.getWorkspaces()]);s(e),o(t.slice(0,5))}catch(c){console.error("Failed to load dashboard data:",c),u(yt(c))}finally{l(!1)}};return a?(0,bt.jsx)(Ot,{children:(0,bt.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,bt.jsxs)("div",{className:"text-center",children:[(0,bt.jsx)("div",{className:"spinner w-8 h-8 mx-auto mb-4"}),(0,bt.jsx)("p",{className:"text-gray-500",children:"Loading dashboard..."})]})})}):c?(0,bt.jsx)(Ot,{children:(0,bt.jsx)("div",{className:"min-h-[400px] flex items-center justify-center",children:(0,bt.jsx)(Tt,{className:"max-w-md",children:(0,bt.jsxs)(Dt,{className:"text-center",children:[(0,bt.jsx)("div",{className:"w-12 h-12 bg-error-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,bt.jsx)("svg",{className:"w-6 h-6 text-error-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,bt.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to load dashboard"}),(0,bt.jsx)("p",{className:"text-gray-600 mb-4",children:c}),(0,bt.jsx)(xt,{onClick:h,children:"Try again"})]})})})}):(0,bt.jsx)(Ot,{children:(0,bt.jsxs)("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:[(0,bt.jsxs)("div",{className:"mb-8",children:[(0,bt.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),(0,bt.jsx)("p",{className:"text-gray-600 mt-2",children:"Welcome back! Here's an overview of your development workspaces and platform activity."})]}),(0,bt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,bt.jsx)(Vt,{title:"Total Workspaces",value:(null===i||void 0===i?void 0:i.totalWorkspaces)||0,icon:(0,bt.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),color:"bg-primary-500"}),(0,bt.jsx)(Vt,{title:"Running Workspaces",value:(null===i||void 0===i?void 0:i.runningWorkspaces)||0,icon:(0,bt.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1.586a1 1 0 01.707.293L12 11l.707-.707A1 1 0 0113.414 10H15M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),color:"bg-success-500"}),(0,bt.jsx)(Vt,{title:"Groups",value:(null===i||void 0===i?void 0:i.totalGroups)||0,icon:(0,bt.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),color:"bg-warning-500"}),(0,bt.jsx)(Vt,{title:"CPU Usage",value:"".concat(Math.round((null===i||void 0===i||null===(e=i.resourceUsage)||void 0===e||null===(r=e.cpu)||void 0===r?void 0:r.percentage)||0),"%"),icon:(0,bt.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})}),color:"bg-purple-500"})]}),(0,bt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,bt.jsxs)(Tt,{children:[(0,bt.jsx)(jt,{children:(0,bt.jsx)(Nt,{children:"Resource Usage"})}),(0,bt.jsx)(Dt,{children:null!==i&&void 0!==i&&i.resourceUsage?(0,bt.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,bt.jsxs)("div",{className:"text-center",children:[(0,bt.jsx)(zt,{value:i.resourceUsage.cpu.percentage,size:80,showValue:!0,className:"mb-2"}),(0,bt.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"CPU"}),(0,bt.jsxs)("div",{className:"text-xs text-gray-500",children:[i.resourceUsage.cpu.used," / ",i.resourceUsage.cpu.total]})]}),(0,bt.jsxs)("div",{className:"text-center",children:[(0,bt.jsx)(zt,{value:i.resourceUsage.memory.percentage,size:80,showValue:!0,className:"mb-2"}),(0,bt.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Memory"}),(0,bt.jsxs)("div",{className:"text-xs text-gray-500",children:[i.resourceUsage.memory.used," / ",i.resourceUsage.memory.total]})]}),(0,bt.jsxs)("div",{className:"text-center",children:[(0,bt.jsx)(zt,{value:i.resourceUsage.storage.percentage,size:80,showValue:!0,className:"mb-2"}),(0,bt.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Storage"}),(0,bt.jsxs)("div",{className:"text-xs text-gray-500",children:[i.resourceUsage.storage.used," / ",i.resourceUsage.storage.total]})]}),(0,bt.jsxs)("div",{className:"text-center",children:[(0,bt.jsx)(zt,{value:i.resourceUsage.pods.percentage,size:80,showValue:!0,className:"mb-2"}),(0,bt.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Pods"}),(0,bt.jsxs)("div",{className:"text-xs text-gray-500",children:[i.resourceUsage.pods.used," / ",i.resourceUsage.pods.total]})]})]}):(0,bt.jsx)("div",{className:"text-center text-gray-500 py-8",children:"No resource data available"})})]}),(0,bt.jsxs)(Tt,{children:[(0,bt.jsx)(jt,{children:(0,bt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,bt.jsx)(Nt,{children:"Recent Workspaces"}),(0,bt.jsx)(Le,{to:"/workspaces",children:(0,bt.jsx)(xt,{variant:"ghost",size:"sm",children:"View all"})})]})}),(0,bt.jsx)(Dt,{children:n.length>0?(0,bt.jsx)("div",{className:"space-y-4",children:n.map(e=>(0,bt.jsx)(Gt,{workspace:e},e.id))}):(0,bt.jsxs)("div",{className:"text-center py-8",children:[(0,bt.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,bt.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,bt.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"No workspaces yet"}),(0,bt.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Get started by creating your first workspace"}),(0,bt.jsx)(Le,{to:"/workspaces",children:(0,bt.jsx)(xt,{size:"sm",children:"Create Workspace"})})]})})]})]})]})})},Vt=e=>{let{title:t,value:r,icon:i,color:s}=e;return(0,bt.jsx)(Tt,{children:(0,bt.jsxs)(Dt,{className:"flex items-center",children:[(0,bt.jsx)("div",{className:"p-3 rounded-lg ".concat(s," mr-4"),children:(0,bt.jsx)("div",{className:"text-white",children:i})}),(0,bt.jsxs)("div",{children:[(0,bt.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t}),(0,bt.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:r})]})]})})},Gt=e=>{let{workspace:t}=e;return(0,bt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,bt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,bt.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center",children:(0,bt.jsx)("svg",{className:"w-5 h-5 text-primary-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,bt.jsx)("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm0 4a1 1 0 011-1h12a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1V8z",clipRule:"evenodd"})})}),(0,bt.jsxs)("div",{children:[(0,bt.jsx)("p",{className:"text-sm font-medium text-gray-900",children:t.name}),(0,bt.jsx)("p",{className:"text-xs text-gray-500",children:t.groupName})]})]}),(0,bt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,bt.jsx)(Ut,{status:t.status}),(0,bt.jsx)("p",{className:"text-xs text-gray-500",children:gt(t.updatedAt)})]})]})},Jt=e=>{let{isOpen:r,onClose:i,title:s,size:n="md",children:o,className:a,showCloseButton:l=!0}=e;const c=(0,t.useRef)(null);(0,t.useEffect)(()=>{const e=e=>{"Escape"===e.key&&i()};return r&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[r,i]);if(!r)return null;return(0,bt.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50 animate-fade-in",onClick:e=>{e.target===e.currentTarget&&i()},children:(0,bt.jsxs)("div",{ref:c,className:wt("w-full bg-white rounded-xl shadow-xl animate-slide-in",{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-2xl"}[n],a),children:[(s||l)&&(0,bt.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s&&(0,bt.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:s}),l&&(0,bt.jsx)("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,bt.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,bt.jsx)("div",{className:"p-6",children:o})]})})},$t=["className","type","label","error","helpText","leftIcon","rightIcon","id"],Xt=["className","label","error","helpText","id","rows"],Qt=["className","label","error","helpText","id","options","placeholder"],Yt=t.forwardRef((e,t)=>{let{className:r,type:i="text",label:s,error:n,helpText:o,leftIcon:a,rightIcon:l,id:c}=e,u=(0,Pe.A)(e,$t);const h=c||"input-".concat(Math.random().toString(36).substr(2,9)),d=!!n;return(0,bt.jsxs)("div",{className:"space-y-1",children:[s&&(0,bt.jsx)("label",{htmlFor:h,className:"block text-sm font-medium text-gray-700",children:s}),(0,bt.jsxs)("div",{className:"relative",children:[a&&(0,bt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,bt.jsx)("div",{className:"h-5 w-5 text-gray-400",children:a})}),(0,bt.jsx)("input",(0,De.A)({type:i,id:h,className:wt("block w-full px-3 py-2 border rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors",a?"pl-10":"",l?"pr-10":"",d?"border-error-300 focus:border-error-500 focus:ring-error-500":"border-gray-300 focus:border-primary-500 focus:ring-primary-500",u.disabled?"bg-gray-100 cursor-not-allowed":"",r),ref:t},u)),l&&(0,bt.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,bt.jsx)("div",{className:"h-5 w-5 text-gray-400",children:l})})]}),n&&(0,bt.jsx)("p",{className:"text-sm text-error-600",children:n}),o&&!n&&(0,bt.jsx)("p",{className:"text-sm text-gray-500",children:o})]})});Yt.displayName="Input";const Zt=t.forwardRef((e,t)=>{let{className:r,label:i,error:s,helpText:n,id:o,rows:a=4}=e,l=(0,Pe.A)(e,Xt);const c=o||"textarea-".concat(Math.random().toString(36).substr(2,9)),u=!!s;return(0,bt.jsxs)("div",{className:"space-y-1",children:[i&&(0,bt.jsx)("label",{htmlFor:c,className:"block text-sm font-medium text-gray-700",children:i}),(0,bt.jsx)("textarea",(0,De.A)({id:c,rows:a,className:wt("block w-full px-3 py-2 border rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors resize-vertical",u?"border-error-300 focus:border-error-500 focus:ring-error-500":"border-gray-300 focus:border-primary-500 focus:ring-primary-500",l.disabled?"bg-gray-100 cursor-not-allowed":"",r),ref:t},l)),s&&(0,bt.jsx)("p",{className:"text-sm text-error-600",children:s}),n&&!s&&(0,bt.jsx)("p",{className:"text-sm text-gray-500",children:n})]})});Zt.displayName="TextArea";const er=t.forwardRef((e,t)=>{let{className:r,label:i,error:s,helpText:n,id:o,options:a,placeholder:l}=e,c=(0,Pe.A)(e,Qt);const u=o||"select-".concat(Math.random().toString(36).substr(2,9)),h=!!s;return(0,bt.jsxs)("div",{className:"space-y-1",children:[i&&(0,bt.jsx)("label",{htmlFor:u,className:"block text-sm font-medium text-gray-700",children:i}),(0,bt.jsxs)("select",(0,De.A)((0,De.A)({id:u,className:wt("block w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors",h?"border-error-300 focus:border-error-500 focus:ring-error-500":"border-gray-300 focus:border-primary-500 focus:ring-primary-500",c.disabled?"bg-gray-100 cursor-not-allowed":"",r),ref:t},c),{},{children:[l&&(0,bt.jsx)("option",{value:"",disabled:!0,children:l}),a.map(e=>(0,bt.jsx)("option",{value:e.value,disabled:e.disabled,children:e.label},e.value))]})),s&&(0,bt.jsx)("p",{className:"text-sm text-error-600",children:s}),n&&!s&&(0,bt.jsx)("p",{className:"text-sm text-gray-500",children:n})]})});er.displayName="Select";var tr=r(748);const rr=()=>{const e=ee(),{user:r}=(0,Ne.A)(),[i,s]=(0,t.useState)([]),[n,o]=(0,t.useState)([]),[a,l]=(0,t.useState)(!0),[c,u]=(0,t.useState)(null),[h,d]=(0,t.useState)(!1),[f,p]=(0,t.useState)(null);(0,t.useEffect)(()=>{g()},[]);const g=async()=>{try{l(!0),u(null);const[e,t]=await Promise.all([qt.K.getWorkspaces(),qt.K.getGroups()]);s(e),o(t)}catch(c){console.error("Failed to load workspaces:",c),u(yt(c))}finally{l(!1)}},_=async(e,t)=>{try{if("delete"===t)await qt.K.deleteWorkspace(e),s(t=>t.filter(t=>t.id!==e));else{const r=await qt.K.performWorkspaceAction({type:t,workspaceId:e});s(t=>t.map(t=>t.id===e?r:t))}}catch(c){console.error("Failed to ".concat(t," workspace:"),c)}};return a?(0,bt.jsx)(Ot,{children:(0,bt.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,bt.jsxs)("div",{className:"text-center",children:[(0,bt.jsx)("div",{className:"spinner w-8 h-8 mx-auto mb-4"}),(0,bt.jsx)("p",{className:"text-gray-500",children:"Loading workspaces..."})]})})}):c?(0,bt.jsx)(Ot,{children:(0,bt.jsx)("div",{className:"min-h-[400px] flex items-center justify-center",children:(0,bt.jsx)(Tt,{className:"max-w-md",children:(0,bt.jsxs)(Dt,{className:"text-center",children:[(0,bt.jsx)("div",{className:"w-12 h-12 bg-error-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,bt.jsx)("svg",{className:"w-6 h-6 text-error-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,bt.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to load workspaces"}),(0,bt.jsx)("p",{className:"text-gray-600 mb-4",children:c}),(0,bt.jsx)(xt,{onClick:g,children:"Try again"})]})})})}):(0,bt.jsx)(Ot,{children:(0,bt.jsxs)("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:[(0,bt.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,bt.jsxs)("div",{children:[(0,bt.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Workspaces"}),(0,bt.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage your development environments and collaborate with your team."})]}),(0,bt.jsx)(xt,{onClick:()=>d(!0),children:"Create Workspace"})]}),i.length>0?(0,bt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(t=>(0,bt.jsx)(ir,{workspace:t,onAction:_,onNavigate:()=>e("/workspaces/".concat(t.id)),onExec:null!==r&&void 0!==r&&r.isAdmin?()=>p(t):void 0},t.id))}):(0,bt.jsxs)("div",{className:"text-center py-12",children:[(0,bt.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,bt.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,bt.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No workspaces yet"}),(0,bt.jsx)("p",{className:"text-gray-500 mb-6 max-w-sm mx-auto",children:"Create your first workspace to start developing in the browser with full VSCode functionality."}),(0,bt.jsx)(xt,{onClick:()=>d(!0),children:"Create Your First Workspace"})]}),(0,bt.jsx)(sr,{isOpen:h,onClose:()=>d(!1),onSubmit:async e=>{try{const t=await qt.K.createWorkspace(e);s(e=>[t,...e]),d(!1)}catch(c){throw c}},groups:n}),f&&(0,bt.jsx)(tr.TerminalModal,{isOpen:!0,onClose:()=>p(null),workspaceId:f.id,workspaceName:f.name})]})})},ir=e=>{let{workspace:r,onAction:i,onNavigate:s,onExec:n}=e;const[o,a]=(0,t.useState)(null),l=async e=>{if("delete"!==e||confirm('Are you sure you want to delete "'.concat(r.name,'"? This action cannot be undone.'))){a(e);try{await i(r.id,e)}finally{a(null)}}};return(0,bt.jsxs)(Tt,{className:"hover:shadow-md transition-shadow",children:[(0,bt.jsx)(jt,{children:(0,bt.jsxs)("div",{className:"flex items-start justify-between",children:[(0,bt.jsxs)("div",{className:"flex-1 cursor-pointer",onClick:s,children:[(0,bt.jsx)(Nt,{className:"text-lg hover:text-primary-600 transition-colors",children:r.name}),r.description&&(0,bt.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:r.description})]}),(0,bt.jsx)(Ut,{status:r.status})]})}),(0,bt.jsx)(Dt,{children:(0,bt.jsxs)("div",{className:"space-y-4",children:[(0,bt.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,bt.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),r.groupName]}),(0,bt.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,bt.jsxs)("div",{children:[(0,bt.jsx)("span",{className:"font-medium text-gray-700",children:"CPU:"}),(0,bt.jsx)("span",{className:"ml-2 text-gray-600",children:mt(r.resources.cpu)})]}),(0,bt.jsxs)("div",{children:[(0,bt.jsx)("span",{className:"font-medium text-gray-700",children:"Memory:"}),(0,bt.jsx)("span",{className:"ml-2 text-gray-600",children:vt(r.resources.memory)})]})]}),r.usage&&(0,bt.jsxs)("div",{className:"space-y-2",children:[(0,bt.jsx)(Wt,{label:"CPU Usage",value:r.usage.cpu.percentage,size:"sm",showValue:!0}),(0,bt.jsx)(Wt,{label:"Memory Usage",value:r.usage.memory.percentage,size:"sm",showValue:!0})]}),(0,bt.jsxs)("div",{className:"text-xs text-gray-500",children:["Last accessed: ",r.lastAccessedAt?gt(r.lastAccessedAt):"Never"]}),(0,bt.jsxs)("div",{className:"flex space-x-2 pt-4 border-t border-gray-100",children:["running"===r.status?(0,bt.jsxs)(bt.Fragment,{children:[(0,bt.jsx)(xt,{size:"sm",onClick:()=>{r.url&&"running"===r.status&&window.open(r.url,"_blank")},className:"flex-1",children:"Open VSCode"}),(0,bt.jsx)(xt,{size:"sm",variant:"secondary",onClick:()=>l("stop"),isLoading:"stop"===o,children:"Stop"})]}):(0,bt.jsx)(xt,{size:"sm",onClick:()=>l("start"),isLoading:"start"===o,className:"flex-1",children:"Start"}),(0,bt.jsx)(nr,{trigger:(0,bt.jsx)(xt,{size:"sm",variant:"ghost",children:(0,bt.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),items:[...n&&"running"===r.status?[{label:"Open Terminal",onClick:n,loading:!1}]:[],{label:"Restart",onClick:()=>l("restart"),loading:"restart"===o},{label:"Delete",onClick:()=>l("delete"),loading:"delete"===o,destructive:!0}]})]})]})})]})},sr=e=>{var r,i,s;let{isOpen:n,onClose:o,onSubmit:a,groups:l}=e;const[c,u]=(0,t.useState)({name:"",description:"",groupId:"",image:"ghcr.io/genesis-ai-dev/codex:master",resources:{cpu:"2",memory:"4Gi",storage:"20Gi"}}),[h,d]=(0,t.useState)(!1),[f,p]=(0,t.useState)(null),g=l.map(e=>({value:e.id,label:e.displayName}));return(0,bt.jsx)(Jt,{isOpen:n,onClose:o,title:"Create New Workspace",size:"lg",children:(0,bt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),c.name.trim())if(c.groupId){d(!0),p(null);try{await a(c),u({name:"",description:"",groupId:"",image:"ghcr.io/genesis-ai-dev/codex:master",resources:{cpu:"2",memory:"4Gi",storage:"20Gi"}})}catch(f){p(yt(f))}finally{d(!1)}}else p("Please select a group");else p("Workspace name is required")},className:"space-y-6",children:[f&&(0,bt.jsx)("div",{className:"rounded-md bg-error-50 p-4",children:(0,bt.jsxs)("div",{className:"flex",children:[(0,bt.jsx)("div",{className:"flex-shrink-0",children:(0,bt.jsx)("svg",{className:"h-5 w-5 text-error-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,bt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,bt.jsxs)("div",{className:"ml-3",children:[(0,bt.jsx)("h3",{className:"text-sm font-medium text-error-800",children:"Error"}),(0,bt.jsx)("div",{className:"mt-1 text-sm text-error-700",children:f})]})]})}),(0,bt.jsx)(Yt,{label:"Workspace Name",placeholder:"e.g. My Development Environment",value:c.name,onChange:e=>u(t=>(0,De.A)((0,De.A)({},t),{},{name:e.target.value})),required:!0}),(0,bt.jsx)(Zt,{label:"Description (optional)",placeholder:"Brief description of this workspace...",value:c.description,onChange:e=>u(t=>(0,De.A)((0,De.A)({},t),{},{description:e.target.value})),rows:3}),(0,bt.jsx)(er,{label:"Group",placeholder:"Select a group...",options:g,value:c.groupId,onChange:e=>u(t=>(0,De.A)((0,De.A)({},t),{},{groupId:e.target.value})),required:!0}),(0,bt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,bt.jsx)(Yt,{label:"CPU",placeholder:"2",value:(null===(r=c.resources)||void 0===r?void 0:r.cpu)||"",onChange:e=>u(t=>(0,De.A)((0,De.A)({},t),{},{resources:(0,De.A)((0,De.A)({},t.resources),{},{cpu:e.target.value})}))}),(0,bt.jsx)(Yt,{label:"Memory",placeholder:"4Gi",value:(null===(i=c.resources)||void 0===i?void 0:i.memory)||"",onChange:e=>u(t=>(0,De.A)((0,De.A)({},t),{},{resources:(0,De.A)((0,De.A)({},t.resources),{},{memory:e.target.value})}))}),(0,bt.jsx)(Yt,{label:"Storage",placeholder:"20Gi",value:(null===(s=c.resources)||void 0===s?void 0:s.storage)||"",onChange:e=>u(t=>(0,De.A)((0,De.A)({},t),{},{resources:(0,De.A)((0,De.A)({},t.resources),{},{storage:e.target.value})}))})]}),(0,bt.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[(0,bt.jsx)(xt,{type:"button",variant:"secondary",onClick:o,children:"Cancel"}),(0,bt.jsx)(xt,{type:"submit",isLoading:h,children:"Create Workspace"})]})]})})},nr=e=>{let{trigger:r,items:i}=e;const[s,n]=(0,t.useState)(!1);return(0,bt.jsxs)("div",{className:"relative",children:[(0,bt.jsx)("div",{onClick:()=>n(!s),children:r}),s&&(0,bt.jsxs)(bt.Fragment,{children:[(0,bt.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>n(!1)}),(0,bt.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-20 border border-gray-200",children:i.map((e,t)=>(0,bt.jsx)("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 first:rounded-t-md last:rounded-b-md ".concat(e.destructive?"text-error-600 hover:bg-error-50":"text-gray-700"),onClick:()=>{e.onClick(),n(!1)},disabled:e.loading,children:e.loading?(0,bt.jsxs)("div",{className:"flex items-center",children:[(0,bt.jsx)("div",{className:"spinner w-4 h-4 mr-2"}),e.label]}):e.label},t))})]})]})},or=()=>{const{workspaceId:e}=function(){let{matches:e}=t.useContext($),r=e[e.length-1];return r?r.params:{}}(),r=ee(),[i,s]=(0,t.useState)(null),[n,o]=(0,t.useState)([]),[a,l]=(0,t.useState)(!0),[c,u]=(0,t.useState)(null),[h,d]=(0,t.useState)(!1);(0,t.useEffect)(()=>{e&&f()},[e]);const f=async()=>{if(e)try{l(!0),u(null);const[t,r]=await Promise.all([qt.K.getWorkspace(e),qt.K.getWorkspaceComponentHealth(e)]);s(t),o(r)}catch(c){console.error("Failed to load workspace details:",c),u(yt(c))}finally{l(!1)}},p=async t=>{if(e)try{await qt.K.performWorkspaceAction({type:t,workspaceId:e}),setTimeout(()=>{f()},2e3)}catch(c){console.error("Failed to ".concat(t," workspace:"),c)}};if(a)return(0,bt.jsx)(Ot,{children:(0,bt.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,bt.jsxs)("div",{className:"text-center",children:[(0,bt.jsx)("div",{className:"spinner w-8 h-8 mx-auto mb-4"}),(0,bt.jsx)("p",{className:"text-gray-500",children:"Loading workspace details..."})]})})});if(c||!i)return(0,bt.jsx)(Ot,{children:(0,bt.jsx)("div",{className:"min-h-[400px] flex items-center justify-center",children:(0,bt.jsx)(Tt,{className:"max-w-md",children:(0,bt.jsxs)(Dt,{className:"text-center",children:[(0,bt.jsx)("div",{className:"w-12 h-12 bg-error-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,bt.jsx)("svg",{className:"w-6 h-6 text-error-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,bt.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to load workspace"}),(0,bt.jsx)("p",{className:"text-gray-600 mb-4",children:c||"Workspace not found"}),(0,bt.jsxs)("div",{className:"flex space-x-3 justify-center",children:[(0,bt.jsx)(xt,{onClick:f,variant:"secondary",children:"Try again"}),(0,bt.jsx)(xt,{onClick:()=>r("/workspaces"),children:"Back to Workspaces"})]})]})})})});const g=n.every(e=>e.healthy);return(0,bt.jsx)(Ot,{children:(0,bt.jsxs)("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:[(0,bt.jsxs)("div",{className:"mb-8",children:[(0,bt.jsxs)("div",{className:"flex items-center mb-4",children:[(0,bt.jsx)(xt,{variant:"ghost",size:"sm",onClick:()=>r("/workspaces"),className:"mr-4",children:(0,bt.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,bt.jsxs)("div",{className:"flex-1",children:[(0,bt.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:i.name}),i.description&&(0,bt.jsx)("p",{className:"text-gray-600 mt-1",children:i.description})]}),(0,bt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,bt.jsx)(Ut,{status:i.status}),(0,bt.jsx)(xt,{variant:"ghost",size:"sm",onClick:async()=>{d(!0);try{await f()}finally{d(!1)}},isLoading:h,children:(0,bt.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})]}),(0,bt.jsxs)("div",{className:"flex space-x-3",children:["running"===i.status?(0,bt.jsxs)(bt.Fragment,{children:[(0,bt.jsx)(xt,{onClick:()=>i.url&&window.open(i.url,"_blank"),disabled:!i.url,children:"Open VSCode"}),(0,bt.jsx)(xt,{variant:"secondary",onClick:()=>p("stop"),children:"Stop Workspace"})]}):(0,bt.jsx)(xt,{onClick:()=>p("start"),disabled:"starting"===i.status,children:"starting"===i.status?"Starting...":"Start Workspace"}),(0,bt.jsx)(xt,{variant:"secondary",onClick:()=>p("restart"),children:"Restart"})]})]}),(0,bt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,bt.jsx)("div",{className:"lg:col-span-2",children:(0,bt.jsxs)(Tt,{children:[(0,bt.jsx)(jt,{children:(0,bt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,bt.jsx)(Nt,{children:"Kubernetes Components"}),(0,bt.jsx)("div",{className:"flex items-center space-x-2",children:g?(0,bt.jsxs)(bt.Fragment,{children:[(0,bt.jsx)("svg",{className:"w-5 h-5 text-success-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,bt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,bt.jsx)("span",{className:"text-sm font-medium text-success-700",children:"All Healthy"})]}):(0,bt.jsxs)(bt.Fragment,{children:[(0,bt.jsx)("svg",{className:"w-5 h-5 text-warning-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,bt.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,bt.jsx)("span",{className:"text-sm font-medium text-warning-700",children:"Issues Detected"})]})})]})}),(0,bt.jsx)(Dt,{children:(0,bt.jsx)("div",{className:"space-y-4",children:n.map(e=>(0,bt.jsx)(ar,{component:e},e.name))})})]})}),(0,bt.jsxs)("div",{className:"space-y-6",children:[(0,bt.jsxs)(Tt,{children:[(0,bt.jsx)(jt,{children:(0,bt.jsx)(Nt,{children:"Details"})}),(0,bt.jsx)(Dt,{children:(0,bt.jsxs)("div",{className:"space-y-4",children:[(0,bt.jsx)(lr,{label:"Group",value:i.groupName,icon:(0,bt.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,bt.jsx)(lr,{label:"Image",value:i.image,icon:(0,bt.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,bt.jsx)(lr,{label:"Created",value:gt(i.createdAt),icon:(0,bt.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,bt.jsx)(lr,{label:"Last Accessed",value:i.lastAccessedAt?gt(i.lastAccessedAt):"Never",icon:(0,bt.jsxs)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})})]}),(0,bt.jsxs)(Tt,{children:[(0,bt.jsx)(jt,{children:(0,bt.jsx)(Nt,{children:"Resources"})}),(0,bt.jsx)(Dt,{children:(0,bt.jsxs)("div",{className:"space-y-3",children:[(0,bt.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,bt.jsx)("span",{className:"text-gray-600",children:"CPU"}),(0,bt.jsx)("span",{className:"font-medium",children:mt(i.resources.cpu)})]}),(0,bt.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,bt.jsx)("span",{className:"text-gray-600",children:"Memory"}),(0,bt.jsx)("span",{className:"font-medium",children:vt(i.resources.memory)})]}),(0,bt.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,bt.jsx)("span",{className:"text-gray-600",children:"Storage"}),(0,bt.jsx)("span",{className:"font-medium",children:i.resources.storage})]})]})})]})]})]})]})})},ar=e=>{let{component:r}=e;const[i,s]=(0,t.useState)(!1);return(0,bt.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors",children:(0,bt.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,bt.jsx)("div",{className:"flex-shrink-0 p-2 rounded-lg ".concat(r.healthy?"bg-success-100 text-success-600":"bg-error-100 text-error-600"),children:(()=>{switch(r.type){case"deployment":return(0,bt.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"})});case"service":return(0,bt.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})});case"pvc":return(0,bt.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})});case"pod":return(0,bt.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}})()}),(0,bt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,bt.jsxs)("div",{className:"flex items-start justify-between",children:[(0,bt.jsxs)("div",{children:[(0,bt.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:r.name}),(0,bt.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:r.status})]}),(0,bt.jsxs)("div",{className:"flex items-center space-x-2",children:[r.healthy?(0,bt.jsx)("svg",{className:"w-5 h-5 text-success-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,bt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):(0,bt.jsx)("svg",{className:"w-5 h-5 text-error-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,bt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),Object.keys(r.details).length>0&&(0,bt.jsx)("button",{onClick:()=>s(!i),className:"text-gray-400 hover:text-gray-600",children:(0,bt.jsx)("svg",{className:"w-5 h-5 transform transition-transform ".concat(i?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),(0,bt.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:r.reason}),i&&Object.keys(r.details).length>0&&(0,bt.jsx)("div",{className:"mt-3 p-3 bg-gray-50 rounded text-xs",children:(0,bt.jsx)("pre",{className:"whitespace-pre-wrap font-mono text-gray-700",children:JSON.stringify(r.details,null,2)})})]})]})})},lr=e=>{let{label:t,value:r,icon:i}=e;return(0,bt.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,bt.jsx)("div",{className:"flex-shrink-0 text-gray-400",children:i}),(0,bt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,bt.jsx)("p",{className:"text-xs text-gray-500",children:t}),(0,bt.jsx)("p",{className:"text-sm text-gray-900 mt-0.5 break-words",children:r})]})]})},cr=e=>{let{isEmbedded:r=!1}=e;const[i,s]=(0,t.useState)([]),[n,o]=(0,t.useState)([]),[a,l]=(0,t.useState)(!0),[c,u]=(0,t.useState)(null),[h,d]=(0,t.useState)(null),[f,p]=(0,t.useState)(!1);(0,t.useEffect)(()=>{g()},[]);const g=async()=>{try{l(!0),u(null);const[e,t]=await Promise.all([qt.K.getUsers(),qt.K.getGroups()]);s(e.items),o(t)}catch(c){console.error("Failed to load data:",c),u(yt(c))}finally{l(!1)}},_=e=>{d(e),p(!0)},m=(0,bt.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,bt.jsxs)("div",{className:"text-center",children:[(0,bt.jsx)("div",{className:"spinner w-8 h-8 mx-auto mb-4"}),(0,bt.jsx)("p",{className:"text-gray-500",children:"Loading users..."})]})}),v=(0,bt.jsx)("div",{className:"min-h-[400px] flex items-center justify-center",children:(0,bt.jsx)(Tt,{className:"max-w-md",children:(0,bt.jsxs)(Dt,{className:"text-center",children:[(0,bt.jsx)("div",{className:"w-12 h-12 bg-error-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,bt.jsx)("svg",{className:"w-6 h-6 text-error-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,bt.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to load users"}),(0,bt.jsx)("p",{className:"text-gray-600 mb-4",children:c}),(0,bt.jsx)(xt,{onClick:g,children:"Try again"})]})})});if(a)return r?m:(0,bt.jsx)(Ot,{children:m});if(c)return r?v:(0,bt.jsx)(Ot,{children:v});const y=(0,bt.jsxs)("div",{className:r?"":"px-4 sm:px-6 lg:px-8 py-8",children:[(0,bt.jsxs)("div",{className:"mb-8",children:[(0,bt.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Users"}),(0,bt.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage users and their group memberships across the platform."})]}),i.length>0?(0,bt.jsxs)(Tt,{children:[(0,bt.jsx)(jt,{children:(0,bt.jsxs)(Nt,{children:["All Users (",i.length,")"]})}),(0,bt.jsx)(Dt,{children:(0,bt.jsx)("div",{className:"overflow-x-auto",children:(0,bt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,bt.jsx)("thead",{className:"bg-gray-50",children:(0,bt.jsxs)("tr",{children:[(0,bt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,bt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,bt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,bt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Groups"}),(0,bt.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,bt.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(e=>(0,bt.jsx)(ur,{user:e,groups:n,onManageGroups:_},e.id))})]})})})]}):(0,bt.jsxs)("div",{className:"text-center py-12",children:[(0,bt.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,bt.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),(0,bt.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),(0,bt.jsx)("p",{className:"text-gray-500",children:"Users will appear here once they sign in to the platform."})]}),h&&(0,bt.jsx)(hr,{isOpen:f,onClose:()=>{p(!1),d(null)},user:h,groups:n,onAddToGroup:async(e,t)=>{try{const r=await qt.K.addUserToGroup(e,t);s(t=>t.map(t=>t.id===e?r:t)),(null===h||void 0===h?void 0:h.id)===e&&d(r)}catch(c){throw console.error("Failed to add user to group:",c),c}},onRemoveFromGroup:async(e,t)=>{try{const r=await qt.K.removeUserFromGroup(e,t);s(t=>t.map(t=>t.id===e?r:t)),(null===h||void 0===h?void 0:h.id)===e&&d(r)}catch(c){throw console.error("Failed to remove user from group:",c),c}}})]});return r?y:(0,bt.jsx)(Ot,{children:y})},ur=e=>{var t,r,i,s;let{user:n,groups:o,onManageGroups:a}=e;return(0,bt.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,bt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,bt.jsxs)("div",{className:"flex items-center",children:[(0,bt.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,bt.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center",children:(0,bt.jsx)("span",{className:"text-sm font-medium text-primary-600",children:(null===(t=n.name)||void 0===t||null===(r=t.charAt(0))||void 0===r?void 0:r.toUpperCase())||(null===(i=n.email)||void 0===i||null===(s=i.charAt(0))||void 0===s?void 0:s.toUpperCase())})})}),(0,bt.jsxs)("div",{className:"ml-4",children:[(0,bt.jsx)("div",{className:"text-sm font-medium text-gray-900",children:n.name||n.username}),(0,bt.jsx)("div",{className:"text-sm text-gray-500",children:n.username})]})]})}),(0,bt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,bt.jsx)("div",{className:"text-sm text-gray-900",children:n.email})}),(0,bt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:n.isAdmin?(0,bt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Admin"}):(0,bt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"User"})}),(0,bt.jsx)("td",{className:"px-6 py-4",children:(0,bt.jsx)("div",{className:"text-sm text-gray-900",children:n.groups.length>0?(0,bt.jsxs)("div",{className:"flex flex-wrap gap-1",children:[n.groups.slice(0,2).map(e=>{const t=o.find(t=>t.id===e);return(0,bt.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:(null===t||void 0===t?void 0:t.displayName)||e},e)}),n.groups.length>2&&(0,bt.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:["+",n.groups.length-2," more"]})]}):(0,bt.jsx)("span",{className:"text-gray-400 text-xs",children:"No groups"})})}),(0,bt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,bt.jsx)(xt,{size:"sm",variant:"ghost",onClick:()=>a(n),children:"Manage Groups"})})]})},hr=e=>{let{isOpen:r,onClose:i,user:s,groups:n,onAddToGroup:o,onRemoveFromGroup:a}=e;const[l,c]=(0,t.useState)(!1),[u,h]=(0,t.useState)(null);return(0,bt.jsx)(Jt,{isOpen:r,onClose:i,title:"Manage Groups - ".concat(s.name||s.username),size:"md",children:(0,bt.jsxs)("div",{className:"space-y-4",children:[u&&(0,bt.jsx)("div",{className:"rounded-md bg-error-50 p-4",children:(0,bt.jsxs)("div",{className:"flex",children:[(0,bt.jsx)("div",{className:"flex-shrink-0",children:(0,bt.jsx)("svg",{className:"h-5 w-5 text-error-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,bt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,bt.jsxs)("div",{className:"ml-3",children:[(0,bt.jsx)("h3",{className:"text-sm font-medium text-error-800",children:"Error"}),(0,bt.jsx)("div",{className:"mt-1 text-sm text-error-700",children:u})]})]})}),(0,bt.jsxs)("div",{className:"text-sm text-gray-600 mb-4",children:["Select groups for ",(0,bt.jsx)("span",{className:"font-medium text-gray-900",children:s.email})]}),(0,bt.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:n.length>0?n.map(e=>{const t=s.groups.includes(e.id);return(0,bt.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,bt.jsxs)("div",{className:"flex-1",children:[(0,bt.jsx)("div",{className:"font-medium text-gray-900",children:e.displayName}),(0,bt.jsx)("div",{className:"text-sm text-gray-500",children:e.namespace}),e.description&&(0,bt.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:e.description})]}),(0,bt.jsx)(xt,{size:"sm",variant:t?"secondary":"primary",onClick:()=>(async(e,t)=>{c(!0),h(null);try{t?await a(s.id,e):await o(s.id,e)}catch(u){h(yt(u))}finally{c(!1)}})(e.id,t),disabled:l,children:t?"Remove":"Add"})]},e.id)}):(0,bt.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No groups available. Create a group first."})}),(0,bt.jsx)("div",{className:"flex justify-end pt-4 border-t",children:(0,bt.jsx)(xt,{variant:"secondary",onClick:i,children:"Done"})})]})})},dr=e=>{let{isEmbedded:r=!1}=e;const{user:i}=(0,Ne.A)(),[s,n]=(0,t.useState)([]),[o,a]=(0,t.useState)(!0),[l,c]=(0,t.useState)(null),[u,h]=(0,t.useState)(!1),d=(null===i||void 0===i?void 0:i.isAdmin)||!1;(0,t.useEffect)(()=>{f()},[]);const f=async()=>{try{a(!0),c(null);const e=await qt.K.getGroups();n(e)}catch(l){console.error("Failed to load groups:",l),c(yt(l))}finally{a(!1)}},p=async e=>{try{await qt.K.deleteGroup(e),n(t=>t.filter(t=>t.id!==e))}catch(l){console.error("Failed to delete group:",l)}},g=(0,bt.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,bt.jsxs)("div",{className:"text-center",children:[(0,bt.jsx)("div",{className:"spinner w-8 h-8 mx-auto mb-4"}),(0,bt.jsx)("p",{className:"text-gray-500",children:"Loading groups..."})]})}),_=(0,bt.jsx)("div",{className:"min-h-[400px] flex items-center justify-center",children:(0,bt.jsx)(Tt,{className:"max-w-md",children:(0,bt.jsxs)(Dt,{className:"text-center",children:[(0,bt.jsx)("div",{className:"w-12 h-12 bg-error-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,bt.jsx)("svg",{className:"w-6 h-6 text-error-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,bt.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to load groups"}),(0,bt.jsx)("p",{className:"text-gray-600 mb-4",children:l}),(0,bt.jsx)(xt,{onClick:f,children:"Try again"})]})})});if(o)return r?g:(0,bt.jsx)(Ot,{children:g});if(l)return r?_:(0,bt.jsx)(Ot,{children:_});const m=(0,bt.jsxs)("div",{className:r?"":"px-4 sm:px-6 lg:px-8 py-8",children:[(0,bt.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,bt.jsxs)("div",{children:[(0,bt.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Groups"}),(0,bt.jsx)("p",{className:"text-gray-600 mt-2",children:d?"Manage groups, members, and resource quotas for your organization.":"View your groups and their resource quotas."})]}),d&&(0,bt.jsx)(xt,{onClick:()=>h(!0),children:"Create Group"})]}),s.length>0?(0,bt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>(0,bt.jsx)(fr,{group:e,isAdmin:d,onDelete:p},e.id))}):(0,bt.jsxs)("div",{className:"text-center py-12",children:[(0,bt.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,bt.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,bt.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:d?"No groups yet":"You are not a member of any groups"}),(0,bt.jsx)("p",{className:"text-gray-500 mb-6 max-w-sm mx-auto",children:d?"Create your first group to organize workspaces and manage resources.":"Contact your administrator to be added to a group."}),d&&(0,bt.jsx)(xt,{onClick:()=>h(!0),children:"Create Your First Group"})]}),d&&(0,bt.jsx)(pr,{isOpen:u,onClose:()=>h(!1),onSubmit:async e=>{try{const t=await qt.K.createGroup(e);n(e=>[t,...e]),h(!1)}catch(l){throw l}}})]});return r?m:(0,bt.jsx)(Ot,{children:m})},fr=e=>{let{group:r,isAdmin:i,onDelete:s}=e;const[n,o]=(0,t.useState)(!1),[a,l]=(0,t.useState)(!1);return(0,bt.jsxs)(Tt,{className:"hover:shadow-md transition-shadow",children:[(0,bt.jsx)(jt,{children:(0,bt.jsxs)("div",{className:"flex items-start justify-between",children:[(0,bt.jsxs)("div",{className:"flex-1",children:[(0,bt.jsx)(Nt,{className:"text-lg",children:r.displayName}),(0,bt.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:r.namespace}),r.description&&(0,bt.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:r.description})]}),i&&(0,bt.jsxs)("div",{className:"relative",children:[(0,bt.jsx)(xt,{size:"sm",variant:"ghost",onClick:()=>o(!n),children:(0,bt.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),n&&(0,bt.jsxs)(bt.Fragment,{children:[(0,bt.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>o(!1)}),(0,bt.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-20 border border-gray-200",children:(0,bt.jsx)("button",{className:"w-full text-left px-4 py-2 text-sm text-error-600 hover:bg-error-50 rounded-md",onClick:()=>{(async()=>{if(confirm('Are you sure you want to delete "'.concat(r.displayName,'"? This action cannot be undone.'))){l(!0);try{await s(r.id)}finally{l(!1)}}})(),o(!1)},disabled:a,children:a?(0,bt.jsxs)("div",{className:"flex items-center",children:[(0,bt.jsx)("div",{className:"spinner w-4 h-4 mr-2"}),"Deleting..."]}):"Delete Group"})})]})]})]})}),(0,bt.jsx)(Dt,{children:(0,bt.jsxs)("div",{className:"space-y-4",children:[(0,bt.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,bt.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),r.memberCount," ",1===r.memberCount?"member":"members"]}),(0,bt.jsxs)("div",{children:[(0,bt.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Resource Quotas"}),(0,bt.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,bt.jsxs)("div",{className:"bg-gray-50 rounded-md p-2",children:[(0,bt.jsx)("div",{className:"text-gray-500 text-xs",children:"CPU"}),(0,bt.jsx)("div",{className:"font-medium text-gray-900",children:mt(r.resourceQuota.cpu)})]}),(0,bt.jsxs)("div",{className:"bg-gray-50 rounded-md p-2",children:[(0,bt.jsx)("div",{className:"text-gray-500 text-xs",children:"Memory"}),(0,bt.jsx)("div",{className:"font-medium text-gray-900",children:vt(r.resourceQuota.memory)})]}),(0,bt.jsxs)("div",{className:"bg-gray-50 rounded-md p-2",children:[(0,bt.jsx)("div",{className:"text-gray-500 text-xs",children:"Storage"}),(0,bt.jsx)("div",{className:"font-medium text-gray-900",children:vt(r.resourceQuota.storage)})]}),(0,bt.jsxs)("div",{className:"bg-gray-50 rounded-md p-2",children:[(0,bt.jsx)("div",{className:"text-gray-500 text-xs",children:"Max Pods"}),(0,bt.jsx)("div",{className:"font-medium text-gray-900",children:r.resourceQuota.pods})]})]})]}),(0,bt.jsxs)("div",{className:"text-xs text-gray-500 pt-3 border-t border-gray-100",children:["Created: ",new Date(r.createdAt).toLocaleDateString()]})]})})]})},pr=e=>{var r,i,s,n,o;let{isOpen:a,onClose:l,onSubmit:c}=e;const[u,h]=(0,t.useState)({name:"",displayName:"",description:"",namespace:"",resourceQuota:{cpu:"10",memory:"20Gi",storage:"100Gi",pods:20}}),[d,f]=(0,t.useState)(!1),[p,g]=(0,t.useState)(null);return(0,bt.jsx)(Jt,{isOpen:a,onClose:l,title:"Create New Group",size:"lg",children:(0,bt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),u.name.trim())if(u.displayName.trim())if(u.namespace.startsWith("group-")){f(!0),g(null);try{var t;const e=(0,De.A)((0,De.A)({},u),{},{description:(null===(t=u.description)||void 0===t?void 0:t.trim())||void 0});await c(e),h({name:"",displayName:"",description:"",namespace:"",resourceQuota:{cpu:"10",memory:"20Gi",storage:"100Gi",pods:20}})}catch(p){g(yt(p))}finally{f(!1)}}else g('Namespace must start with "group-"');else g("Display name is required");else g("Group name is required")},className:"space-y-6",children:[p&&(0,bt.jsx)("div",{className:"rounded-md bg-error-50 p-4",children:(0,bt.jsxs)("div",{className:"flex",children:[(0,bt.jsx)("div",{className:"flex-shrink-0",children:(0,bt.jsx)("svg",{className:"h-5 w-5 text-error-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,bt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,bt.jsxs)("div",{className:"ml-3",children:[(0,bt.jsx)("h3",{className:"text-sm font-medium text-error-800",children:"Error"}),(0,bt.jsx)("div",{className:"mt-1 text-sm text-error-700",children:p})]})]})}),(0,bt.jsx)(Yt,{label:"Group Name",placeholder:"e.g. engineering-team",value:u.name,onChange:e=>(e=>{const t=e.toLowerCase().replace(/[^a-z0-9-]/g,"-");h(e=>(0,De.A)((0,De.A)({},e),{},{name:t,namespace:t?"group-".concat(t):""}))})(e.target.value),helpText:"Lowercase letters, numbers, and hyphens only",required:!0}),(0,bt.jsx)(Yt,{label:"Display Name",placeholder:"e.g. Engineering Team",value:u.displayName,onChange:e=>h(t=>(0,De.A)((0,De.A)({},t),{},{displayName:e.target.value})),helpText:"Human-readable name for the group",required:!0}),(0,bt.jsx)(Yt,{label:"Namespace",placeholder:"group-engineering-team",value:u.namespace,onChange:e=>h(t=>(0,De.A)((0,De.A)({},t),{},{namespace:e.target.value})),helpText:"Kubernetes namespace (auto-generated from name)",required:!0,disabled:!0}),(0,bt.jsx)(Zt,{label:"Description (optional)",placeholder:"Brief description of this group...",value:u.description,onChange:e=>h(t=>(0,De.A)((0,De.A)({},t),{},{description:e.target.value})),rows:3}),(0,bt.jsxs)("div",{children:[(0,bt.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:"Resource Quotas"}),(0,bt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,bt.jsx)(Yt,{label:"CPU Cores",placeholder:"10",value:(null===(r=u.resourceQuota)||void 0===r?void 0:r.cpu)||"",onChange:e=>h(t=>(0,De.A)((0,De.A)({},t),{},{resourceQuota:(0,De.A)((0,De.A)({},t.resourceQuota),{},{cpu:e.target.value})})),helpText:"Total CPU cores for all workspaces"}),(0,bt.jsx)(Yt,{label:"Memory",placeholder:"20Gi",value:(null===(i=u.resourceQuota)||void 0===i?void 0:i.memory)||"",onChange:e=>h(t=>(0,De.A)((0,De.A)({},t),{},{resourceQuota:(0,De.A)((0,De.A)({},t.resourceQuota),{},{memory:e.target.value})})),helpText:"Total memory (e.g. 20Gi)"}),(0,bt.jsx)(Yt,{label:"Storage",placeholder:"100Gi",value:(null===(s=u.resourceQuota)||void 0===s?void 0:s.storage)||"",onChange:e=>h(t=>(0,De.A)((0,De.A)({},t),{},{resourceQuota:(0,De.A)((0,De.A)({},t.resourceQuota),{},{storage:e.target.value})})),helpText:"Total storage (e.g. 100Gi)"}),(0,bt.jsx)(Yt,{label:"Max Pods",type:"number",placeholder:"20",value:(null===(n=u.resourceQuota)||void 0===n||null===(o=n.pods)||void 0===o?void 0:o.toString())||"",onChange:e=>h(t=>(0,De.A)((0,De.A)({},t),{},{resourceQuota:(0,De.A)((0,De.A)({},t.resourceQuota),{},{pods:parseInt(e.target.value)||0})})),helpText:"Maximum number of workspaces"})]})]}),(0,bt.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[(0,bt.jsx)(xt,{type:"button",variant:"secondary",onClick:l,children:"Cancel"}),(0,bt.jsx)(xt,{type:"submit",isLoading:d,children:"Create Group"})]})]})})},gr=[{id:"users",name:"Users",icon:(0,bt.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})},{id:"groups",name:"Groups",icon:(0,bt.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})},{id:"workspaces",name:"Workspaces",icon:(0,bt.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})},{id:"audit-logs",name:"Audit Logs",icon:(0,bt.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{id:"settings",name:"Settings",icon:(0,bt.jsxs)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})},{id:"monitoring",name:"Monitoring",icon:(0,bt.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}],_r=()=>{const e=Y(),r=ee(),[i,s]=(0,t.useState)(e.hash.replace("#","")||"users");t.useEffect(()=>{const t=e.hash.replace("#","");s(t||"users")},[e.hash]);return(0,bt.jsx)(Ot,{children:(0,bt.jsxs)("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:[(0,bt.jsxs)("div",{className:"mb-8",children:[(0,bt.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Administration"}),(0,bt.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage users, groups, and system settings for your platform."})]}),(0,bt.jsx)("div",{className:"border-b border-gray-200 mb-8",children:(0,bt.jsx)("nav",{className:"-mb-px flex space-x-8",children:gr.map(e=>(0,bt.jsxs)("button",{onClick:()=>(e=>{s(e),r("/admin#".concat(e),{replace:!0})})(e.id),className:wt("group inline-flex items-center py-4 px-1 border-b-2 font-medium text-sm transition-colors",i===e.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,bt.jsx)("span",{className:wt("mr-2",i===e.id?"text-primary-500":"text-gray-400 group-hover:text-gray-500"),children:e.icon}),e.name]},e.id))})}),(0,bt.jsx)("div",{children:(()=>{switch(i){case"users":return(0,bt.jsx)(mr,{});case"groups":return(0,bt.jsx)(vr,{});case"workspaces":return(0,bt.jsx)(yr,{});case"audit-logs":return(0,bt.jsx)(wr,{});case"settings":return(0,bt.jsx)(br,{});case"monitoring":return(0,bt.jsx)(Sr,{});default:return null}})()})]})})},mr=()=>(0,bt.jsx)(cr,{isEmbedded:!0}),vr=()=>(0,bt.jsx)(dr,{isEmbedded:!0}),yr=()=>{const[e,i]=t.useState([]),[s,n]=t.useState(!0),[o,a]=t.useState(null),[l,c]=t.useState(null);t.useEffect(()=>{u()},[]);const u=async()=>{try{n(!0),a(null);const e=await r(677).K.adminGetAllWorkspaces();i(e)}catch(e){console.error("Failed to load workspaces:",e),a("Failed to load workspaces")}finally{n(!1)}};return s?(0,bt.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,bt.jsxs)("div",{className:"text-center",children:[(0,bt.jsx)("div",{className:"spinner w-8 h-8 mx-auto mb-4"}),(0,bt.jsx)("p",{className:"text-gray-500",children:"Loading workspaces..."})]})}):o?(0,bt.jsx)(Tt,{className:"max-w-md mx-auto",children:(0,bt.jsxs)(Dt,{className:"text-center py-12",children:[(0,bt.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,bt.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,bt.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error"}),(0,bt.jsx)("p",{className:"text-gray-600 mb-4",children:o}),(0,bt.jsx)("button",{onClick:u,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:"Try Again"})]})}):(0,bt.jsxs)(bt.Fragment,{children:[(0,bt.jsxs)("div",{className:"mb-6",children:[(0,bt.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"All Workspaces"}),(0,bt.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["View and manage all workspaces across all users (",e.length," total)"]})]}),0===e.length?(0,bt.jsx)(Tt,{children:(0,bt.jsxs)(Dt,{className:"text-center py-12",children:[(0,bt.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,bt.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,bt.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Workspaces"}),(0,bt.jsx)("p",{className:"text-gray-600",children:"No workspaces have been created yet."})]})}):(0,bt.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:(0,bt.jsx)("ul",{className:"divide-y divide-gray-200",children:e.map(e=>(0,bt.jsx)("li",{children:(0,bt.jsx)("div",{className:"px-4 py-4 sm:px-6 hover:bg-gray-50",children:(0,bt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,bt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,bt.jsxs)("div",{className:"flex items-center",children:[(0,bt.jsx)("h3",{className:"text-sm font-medium text-primary-600 truncate",children:e.name}),(0,bt.jsx)("span",{className:"ml-3 px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("running"===e.status?"bg-green-100 text-green-800":"stopped"===e.status?"bg-gray-100 text-gray-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.status})]}),e.description&&(0,bt.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:e.description}),(0,bt.jsxs)("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[(0,bt.jsx)("svg",{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.userName||e.userEmail,(0,bt.jsx)("span",{className:"mx-2",children:"\u2022"}),(0,bt.jsx)("svg",{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),e.groupName]})]}),(0,bt.jsx)("div",{className:"ml-4 flex-shrink-0",children:"running"===e.status&&(0,bt.jsxs)("button",{onClick:()=>c(e),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[(0,bt.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Open Terminal"]})})]})})},e.id))})}),l&&(0,bt.jsx)(t.Suspense,{fallback:(0,bt.jsx)("div",{children:"Loading..."}),children:(()=>{const{TerminalModal:e}=r(748);return(0,bt.jsx)(e,{isOpen:!0,onClose:()=>c(null),workspaceId:l.id,workspaceName:l.name})})()})]})},wr=()=>(0,bt.jsx)(Tt,{className:"max-w-2xl",children:(0,bt.jsxs)(Dt,{className:"text-center py-12",children:[(0,bt.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,bt.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,bt.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Audit Logs"}),(0,bt.jsx)("p",{className:"text-gray-600 mb-4",children:"Track all administrative actions, user activity, workspace operations, and security events across the platform."}),(0,bt.jsxs)("div",{className:"text-sm text-gray-500 space-y-2",children:[(0,bt.jsx)("p",{className:"font-medium",children:"Planned features:"}),(0,bt.jsxs)("ul",{className:"text-left max-w-md mx-auto space-y-1",children:[(0,bt.jsx)("li",{children:"\u2022 User authentication and authorization events"}),(0,bt.jsx)("li",{children:"\u2022 Workspace creation, modification, and deletion"}),(0,bt.jsx)("li",{children:"\u2022 Group and user management actions"}),(0,bt.jsx)("li",{children:"\u2022 Resource quota changes"}),(0,bt.jsx)("li",{children:"\u2022 API access logs with filtering and search"}),(0,bt.jsx)("li",{children:"\u2022 Export logs to CSV or JSON"})]})]})]})}),br=()=>(0,bt.jsx)(Tt,{className:"max-w-2xl",children:(0,bt.jsxs)(Dt,{className:"text-center py-12",children:[(0,bt.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,bt.jsxs)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,bt.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"System Settings"}),(0,bt.jsx)("p",{className:"text-gray-600 mb-4",children:"Configure platform-wide settings, default resource limits, and authentication providers."}),(0,bt.jsxs)("div",{className:"text-sm text-gray-500 space-y-2",children:[(0,bt.jsx)("p",{className:"font-medium",children:"Planned features:"}),(0,bt.jsxs)("ul",{className:"text-left max-w-md mx-auto space-y-1",children:[(0,bt.jsx)("li",{children:"\u2022 Default resource quotas for new groups"}),(0,bt.jsx)("li",{children:"\u2022 OAuth provider configuration (Cognito, Google, etc.)"}),(0,bt.jsx)("li",{children:"\u2022 Platform branding and customization"}),(0,bt.jsx)("li",{children:"\u2022 Email notification settings"}),(0,bt.jsx)("li",{children:"\u2022 Security policies and session timeouts"}),(0,bt.jsx)("li",{children:"\u2022 API rate limiting configuration"}),(0,bt.jsx)("li",{children:"\u2022 Kubernetes cluster connection settings"})]})]})]})}),Sr=()=>(0,bt.jsx)(Tt,{className:"max-w-2xl",children:(0,bt.jsxs)(Dt,{className:"text-center py-12",children:[(0,bt.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,bt.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,bt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,bt.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"System Monitoring"}),(0,bt.jsx)("p",{className:"text-gray-600 mb-4",children:"Monitor platform health, resource usage, and performance metrics across all workspaces and namespaces."}),(0,bt.jsxs)("div",{className:"text-sm text-gray-500 space-y-2",children:[(0,bt.jsx)("p",{className:"font-medium",children:"Planned features:"}),(0,bt.jsxs)("ul",{className:"text-left max-w-md mx-auto space-y-1",children:[(0,bt.jsx)("li",{children:"\u2022 Real-time resource usage dashboards"}),(0,bt.jsx)("li",{children:"\u2022 CPU, memory, and storage utilization by group"}),(0,bt.jsx)("li",{children:"\u2022 Active workspace count and status"}),(0,bt.jsx)("li",{children:"\u2022 Kubernetes cluster health metrics"}),(0,bt.jsx)("li",{children:"\u2022 Pod status and deployment monitoring"}),(0,bt.jsx)("li",{children:"\u2022 Historical usage trends and graphs"}),(0,bt.jsx)("li",{children:"\u2022 Alerting for quota limits and resource constraints"})]})]})]})}),xr={authority:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_AUTH_AUTHORITY||"https://cognito-idp.us-east-1.amazonaws.com/us-east-1_example",clientId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_AUTH_CLIENT_ID||"your-client-id",redirectUri:window.location.origin+"/auth/callback",logoutUri:window.location.origin,scope:"aws.cognito.signin.user.admin email openid profile",cognitoDomain:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_COGNITO_DOMAIN||"your-domain.auth.us-east-1.amazoncognito.com"};const Cr=e=>{let{children:t,requireAdmin:r=!1}=e;const{isAuthenticated:i,isLoading:s,user:n}=(0,Ne.A)();return s?(0,bt.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,bt.jsxs)("div",{className:"text-center",children:[(0,bt.jsx)("div",{className:"spinner w-8 h-8 mx-auto mb-4"}),(0,bt.jsx)("p",{className:"text-gray-500",children:"Loading..."})]})}):i?!r||null!==n&&void 0!==n&&n.isAdmin?(0,bt.jsx)(bt.Fragment,{children:t}):(0,bt.jsx)(ge,{to:"/",replace:!0}):(0,bt.jsx)(ge,{to:"/login",replace:!0})},kr=()=>{const{isLoading:e,isAuthenticated:r}=(0,Ne.A)();return t.useEffect(()=>{!e&&r&&(window.location.href="/")},[e,r]),(0,bt.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,bt.jsxs)("div",{className:"text-center",children:[(0,bt.jsx)("div",{className:"spinner w-8 h-8 mx-auto mb-4"}),(0,bt.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Completing sign in..."}),(0,bt.jsx)("p",{className:"text-gray-500",children:"Please wait while we authenticate you."})]})})},Er=function(){return(0,bt.jsx)(Ne.O,{config:xr,children:(0,bt.jsx)(ke,{children:(0,bt.jsx)("div",{className:"App",children:(0,bt.jsxs)(ve,{children:[(0,bt.jsx)(_e,{path:"/login",element:(0,bt.jsx)(Pt,{})}),(0,bt.jsx)(_e,{path:"/auth/callback",element:(0,bt.jsx)(kr,{})}),(0,bt.jsx)(_e,{path:"/",element:(0,bt.jsx)(Cr,{children:(0,bt.jsx)(Kt,{})})}),(0,bt.jsx)(_e,{path:"/workspaces",element:(0,bt.jsx)(Cr,{children:(0,bt.jsx)(rr,{})})}),(0,bt.jsx)(_e,{path:"/workspaces/:workspaceId",element:(0,bt.jsx)(Cr,{children:(0,bt.jsx)(or,{})})}),(0,bt.jsx)(_e,{path:"/admin",element:(0,bt.jsx)(Cr,{requireAdmin:!0,children:(0,bt.jsx)(_r,{})})}),(0,bt.jsx)(_e,{path:"*",element:(0,bt.jsx)(ge,{to:"/",replace:!0})})]})})})})};s.createRoot(document.getElementById("root")).render((0,bt.jsx)(t.StrictMode,{children:(0,bt.jsx)(Er,{})}))})()})();
//# sourceMappingURL=main.cf747429.js.map